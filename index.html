<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ZKBOYS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="技术整理归档">
<meta property="og:type" content="website">
<meta property="og:title" content="ZKBOYS">
<meta property="og:url" content="http://zkboys.com/index.html">
<meta property="og:site_name" content="ZKBOYS">
<meta property="og:description" content="技术整理归档">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZKBOYS">
<meta name="twitter:description" content="技术整理归档">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <link rel="stylesheet" href="/css/fonts-googleapis/fonts-googleapis.css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header" style="overflow: hidden">
    <div id="banner">
        <iframe id="canvas-animation" src="/canvas-animation/1.html" frameborder="0" style="width: 100%; height: 100%"></iframe>
    </div>
    <div id="header-outer">
        <div class="outer">
            <div id="header-title" class="inner">
                <a href="/">
                  <div class="header-img"></div>
                </a>
                <h1 id="logo-wrap">
                    <a href="/" id="logo">ZKBOYS</a>
                </h1>
                
                <h2 id="subtitle-wrap">
                    <a href="/" id="subtitle">I&#39;m a 博客</a>
                </h2>
                
            </div>
            <div id="header-inner" class="inner">
                <nav id="main-nav">
                    <a id="main-nav-toggle" class="nav-icon"></a>
                    
                    <a class="main-nav-link" href="/">Home</a>
                    
                    <a class="main-nav-link" href="/archives">Archives</a>
                    
                </nav>
                <nav id="sub-nav">
                    
                    <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
                </nav>
                <div id="search-form-wrap">
                    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://zkboys.com"></form>
                </div>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
                <defs>
                    <filter id="liquid">
                        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"></feGaussianBlur>
                        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 40 -10"></feColorMatrix>
                    </filter>
                </defs>
            </svg>
        </div>
    </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-cross-env" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/27/cross-env/" class="article-date">
  <time datetime="2018-02-27T06:13:14.000Z" itemprop="datePublished">2018-02-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/27/cross-env/">cross-env</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <blockquote>
<p>不同平台命令有兼容性问题，可以通过一些第三方包解决</p>
</blockquote>
<h2 id="rimraf"><a href="#rimraf" class="headerlink" title="rimraf"></a><a href="https://www.npmjs.com/package/rimraf" target="_blank" rel="noopener">rimraf</a></h2><blockquote>
<p>删除文件、文件夹</p>
</blockquote>
<h2 id="mkdirp"><a href="#mkdirp" class="headerlink" title="mkdirp"></a><a href="https://github.com/substack/node-mkdirp" target="_blank" rel="noopener">mkdirp</a></h2><blockquote>
<p>创建文件夹</p>
</blockquote>
<h2 id="cross-env"><a href="#cross-env" class="headerlink" title="cross-env"></a><a href="https://www.npmjs.com/package/cross-env" target="_blank" rel="noopener">cross-env</a></h2><blockquote>
<p>不同平台（window linux unix）命令行传递参数有兼容性问题，通过cross-env可以解决各个平台的兼容性问题</p>
</blockquote>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add cross-env --dev</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">$ npm install cross-env --save-dev</span><br></pre></td></tr></table></figure>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// package.jsxon</span><br><span class="line">...</span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;dev&quot;: &quot;cross-env NODE_ENV=development node ./builder/dev-server.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><code>NODE_ENV=development</code> 常用参数，构建工具以此区分不同的模式，开发模式（development 或 dev）还是生产环境（production 或 pro）；<br>具体需要什么 参数=值 以项目为准；</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2018/02/27/cross-env/" data-id="ck71asp34002psr9fa33cwcc7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cross-env/">cross-env</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-react相关面试题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/15/react相关面试题/" class="article-date">
  <time datetime="2017-08-15T01:29:29.000Z" itemprop="datePublished">2017-08-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/15/react相关面试题/">react相关面试题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><ol>
<li>state props 的理解，什么数据适合放入state中？</li>
<li>setState函数有几种参数形式？this.state无法立即获取setState设置的数据原因？</li>
<li>组件间通信方式</li>
<li>react有几个周期函数，各个周期函数的作用是什么（适合写什么样的逻辑）？</li>
<li>diff算法？</li>
<li>React性能优化</li>
</ol>
<h2 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h2><ol>
<li>esLint？</li>
<li>esLint如何结合IDE、GIT使用？</li>
</ol>
<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><ol>
<li>为什么要使用Redux，什么数据适合放入Redux中？</li>
<li>Redux原理（如何实现的）？</li>
</ol>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><ol>
<li>css预处理器</li>
<li>css Module</li>
</ol>
<h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><ol>
<li>let const 为什么不用var？</li>
<li>箭头函数？</li>
<li>解构赋值、函数的reset参数？</li>
<li>函数式变成？</li>
<li>class</li>
<li>promise</li>
<li>异步回调地狱解决方案</li>
</ol>
<h2 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h2><ol>
<li>配置、常用插件</li>
<li>命令行兼容性</li>
<li>各种常见loader</li>
<li>各个版本了解程度</li>
</ol>
<h2 id="react-router"><a href="#react-router" class="headerlink" title="react-router"></a>react-router</h2><ol>
<li>配置文件过大，容易冲突，如何解决？</li>
<li>hash、H5方式，用哪种？区别是什么？</li>
</ol>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol>
<li>组件化、模块化</li>
<li>前后端分离</li>
<li>GraphQL、restful</li>
<li>HTTP Code</li>
<li>组件卸载，ajax打断</li>
<li>ajax、fetch封装，封装了什么？</li>
<li>异常处理</li>
<li>yarn vs npm</li>
<li>异常处理、错误上报</li>
<li>测试：e2e unit</li>
<li>weex、RN、微信小程序</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/08/15/react相关面试题/" data-id="ck71asp550046sr9fnlsg5ay8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/面试/">面试</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-前端与产品约定" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/09/前端与产品约定/" class="article-date">
  <time datetime="2017-08-09T01:08:43.000Z" itemprop="datePublished">2017-08-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/规范/">规范</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/09/前端与产品约定/">前端与产品约定</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h1 id="原型-amp-文档标准"><a href="#原型-amp-文档标准" class="headerlink" title="原型&amp;文档标准"></a>原型&amp;文档标准</h1><blockquote>
<p>良好的原型&amp;文档能有效的减小开发人员理解歧义，降低开发人员与产品之间的沟通。</p>
</blockquote>
<p>是否考虑只出原型，将文档相关内容对应的标注在原型上？</p>
<h2 id="原型标准"><a href="#原型标准" class="headerlink" title="原型标准"></a>原型标准</h2><blockquote>
<p>原型要满足一定的标准，方便其他人员查看；</p>
</blockquote>
<ul>
<li>原型的布局要尽量与产品一致；</li>
<li>左侧导航最好为系统菜单，如果不作为系统菜单，原型上要提供系统菜单；</li>
<li>页面与菜单对应，详情、修改等页面没有菜单，要标明页面的菜单状态；</li>
<li>原型上菜单可点击跳转到具体的页面；</li>
<li>当前页面的弹窗在当前页面画出，用连线指明是哪个按钮对应的弹窗；</li>
<li>页面元素对应使用相应组件，不要使用input做label展示，不要把radio做为checkbox使用；</li>
<li>能使用页面元素体现的状态，尽量不要使用文字说明，比如input为disabled，可以通过灰底input框表示；</li>
<li>无用的页面，元素要删除；</li>
<li>不同版本最好独立整理出一个原型，只包含此版本的功能，方便查阅；</li>
</ul>
<h2 id="文档标准"><a href="#文档标准" class="headerlink" title="文档标准"></a>文档标准</h2><ul>
<li>良好统一的排版布局；</li>
<li>与原型对应；</li>
<li>表单字段表明校验规则；</li>
<li>变更部分使用不同颜色字体，并标记是哪个版本变更；</li>
</ul>
<h2 id="需求评审"><a href="#需求评审" class="headerlink" title="需求评审"></a>需求评审</h2><blockquote>
<p>产品整理完需求后，一般会进行需求评审，开发及领导会评审需求的可行性；</p>
</blockquote>
<p>前端需求评审需要确认的内容如下：</p>
<ul>
<li>菜单与页面的对应关系；</li>
<li>各个页面的交互是否合理；</li>
<li>页面布局、交互技术实现是否可行；</li>
<li>表单元素校验规则是否明确；</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/08/09/前端与产品约定/" data-id="ck71asp640065sr9f6ptly7j9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/最佳实践/">最佳实践</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-nginx操作" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/28/nginx操作/" class="article-date">
  <time datetime="2017-07-28T02:39:42.000Z" itemprop="datePublished">2017-07-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/后端/">后端</a>►<a class="article-category-link" href="/categories/后端/nginx/">nginx</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/28/nginx操作/">nginx操作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h1 id="nginx-操作"><a href="#nginx-操作" class="headerlink" title="nginx 操作"></a>nginx 操作</h1><blockquote>
<p>反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。</p>
</blockquote>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>
<h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">进入服务器nginx目录：cd /etc/nginx/</span><br><span class="line">执行：sudo nginx</span><br></pre></td></tr></table></figure>
<h2 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep nginx</span><br></pre></td></tr></table></figure>
<h2 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h2><p>waiting for the worker processes to finish serving current requests<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s quit 或 sudo kill -s QUIT 1628（进程编号）</span><br></pre></td></tr></table></figure></p>
<p>without waiting for the worker processes to finish serving current requests<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s stop</span><br></pre></td></tr></table></figure></p>
<h2 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h2><p>更改配置文件之后需要重启<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure></p>
<p>Once the master process receives the signal to reload configuration, it checks the syntax validity of the new configuration file and tries to apply the configuration provided in it. If this is a success, the master process starts new worker processes and sends messages to old worker processes, requesting them to shut down. Otherwise, the master process rolls back the changes and continues to work with the old configuration. Old worker processes, receiving a command to shut down, stop accepting new connections and continue to service current requests until all such requests are serviced. After that, the old worker processes exit.</p>
<p>一旦主线程得到重启命令，它会先校验配置是否正确，如果正确，主线程会启动新的worker线程，关闭旧的worker线程。否则，主线程会回滚到原先的配置，旧的worker线程会得到一个shut down命令，停止接受新连接，但是会继续服务当前请求，当所有的请求处理完之后，会退出。</p>
<p>官网这段话什么意思？如果配置错误，master会roll back，但是worker还是会exit？</p>
<h2 id="pid文件丢失问题解决方法"><a href="#pid文件丢失问题解决方法" class="headerlink" title="pid文件丢失问题解决方法"></a>pid文件丢失问题解决方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wangshubin@pc:/etc/nginx$ sudo nginx -c /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>
<h2 id="nginx-config配置"><a href="#nginx-config配置" class="headerlink" title="nginx.config配置"></a>nginx.config配置</h2><p>这个文件中的配置基本上是没动,只是添加两个include</p>
<p>具体的配置在sites-enabled和sites-available中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">user wangshubin;</span><br><span class="line"></span><br><span class="line">worker_processes 4;</span><br><span class="line"></span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line"></span><br><span class="line">     worker_connections 768;</span><br><span class="line"></span><br><span class="line">     # multi_accept on;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     # Basic Settings</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     sendfile on;</span><br><span class="line"></span><br><span class="line">     tcp_nopush on;</span><br><span class="line"></span><br><span class="line">     tcp_nodelay on;</span><br><span class="line"></span><br><span class="line">     keepalive_timeout 65;</span><br><span class="line"></span><br><span class="line">     types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">        client_max_body_size 10m;</span><br><span class="line"></span><br><span class="line">     # server_tokens off;</span><br><span class="line"></span><br><span class="line">     # server_names_hash_bucket_size 64;</span><br><span class="line"></span><br><span class="line">     # server_name_in_redirect off;</span><br><span class="line"></span><br><span class="line">     include /etc/nginx/mime.types;</span><br><span class="line"></span><br><span class="line">     default_type application/octet-stream;</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     # Logging Settings</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     access_log /var/log/nginx/access.log;</span><br><span class="line"></span><br><span class="line">     error_log /var/log/nginx/error.log;</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     # Gzip Settings</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     gzip on;</span><br><span class="line"></span><br><span class="line">     gzip_disable &quot;msie6&quot;;</span><br><span class="line"></span><br><span class="line">     # gzip_vary on;</span><br><span class="line"></span><br><span class="line">     # gzip_proxied any;</span><br><span class="line"></span><br><span class="line">     # gzip_comp_level 6;</span><br><span class="line"></span><br><span class="line">     # gzip_buffers 16 8k;</span><br><span class="line"></span><br><span class="line">     # gzip_http_version 1.1;</span><br><span class="line"></span><br><span class="line">     # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     # nginx-naxsi config</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     # Uncomment it if you installed nginx-naxsi</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     #include /etc/nginx/naxsi_core.rules;</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     # nginx-passenger config</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     # Uncomment it if you installed nginx-passenger</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     #passenger_root /usr;</span><br><span class="line"></span><br><span class="line">     #passenger_ruby /usr/bin/ruby;</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     # Virtual Host Configs</span><br><span class="line"></span><br><span class="line">     ##</span><br><span class="line"></span><br><span class="line">     include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">     include /etc/nginx/sites-enabled/*;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#mail &#123;</span><br><span class="line"></span><br><span class="line">#     # See sample authentication script at:</span><br><span class="line"></span><br><span class="line">#     # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#     # auth_http localhost/auth.php;</span><br><span class="line"></span><br><span class="line">#     # pop3_capabilities &quot;TOP&quot; &quot;USER&quot;;</span><br><span class="line"></span><br><span class="line">#     # imap_capabilities &quot;IMAP4rev1&quot; &quot;UIDPLUS&quot;;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#     server &#123;</span><br><span class="line"></span><br><span class="line">#          listen     localhost:110;</span><br><span class="line"></span><br><span class="line">#          protocol   pop3;</span><br><span class="line"></span><br><span class="line">#          proxy      on;</span><br><span class="line"></span><br><span class="line">#     &#125;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#     server &#123;</span><br><span class="line"></span><br><span class="line">#          listen     localhost:143;</span><br><span class="line"></span><br><span class="line">#          protocol   imap;</span><br><span class="line"></span><br><span class="line">#          proxy      on;</span><br><span class="line"></span><br><span class="line">#     &#125;</span><br><span class="line"></span><br><span class="line">#&#125;</span><br></pre></td></tr></table></figure></p>
<p>sites-available文件夹中，inc.eking99.com文件中的内容<br>sites-enabled文件夹中保存的文件就是sites-available其中的文件<br>sites-enabled表明sites-available中哪个”网站”是激活状态<br>sites-enabled中的文件会删除,或者从sites-available中拷贝过来,是一个软链接<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Enumerate all the Tornado servers here</span><br><span class="line"></span><br><span class="line">upstream inc_eking_tornadoes &#123;</span><br><span class="line"></span><br><span class="line">    server 127.0.0.1:8081;</span><br><span class="line"></span><br><span class="line">    server 127.0.0.1:8082;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">proxy_next_upstream error;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">    listen 80;</span><br><span class="line"></span><br><span class="line">    server_name inc.eking99.com;</span><br><span class="line"></span><br><span class="line">    # Allow file uploads</span><br><span class="line"></span><br><span class="line">    client_max_body_size 100M;</span><br><span class="line"></span><br><span class="line">    location ^~ /s/ &#123;</span><br><span class="line"></span><br><span class="line">        alias /home/admin/deploy/inc-eking-web/public/;</span><br><span class="line"></span><br><span class="line">        if ($query_string) &#123;</span><br><span class="line"></span><br><span class="line">            expires max;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #location = /favicon.ico &#123;</span><br><span class="line"></span><br><span class="line">    #    rewrite (.*) /s/favicon.ico;</span><br><span class="line"></span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    #location = /robots.txt &#123;</span><br><span class="line"></span><br><span class="line">    #    rewrite (.*) /s/robots.txt;</span><br><span class="line"></span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line"></span><br><span class="line">        proxy_read_timeout 1800;</span><br><span class="line"></span><br><span class="line">        proxy_pass_header Server;</span><br><span class="line"></span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line"></span><br><span class="line">        proxy_redirect false;</span><br><span class="line"></span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line"></span><br><span class="line">        proxy_set_header X-Scheme $scheme;</span><br><span class="line"></span><br><span class="line">        proxy_pass http://inc_eking_tornadoes;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="nginxWebSocket配置"><a href="#nginxWebSocket配置" class="headerlink" title="nginxWebSocket配置"></a>nginxWebSocket配置</h2><p>两种方式</p>
<ol>
<li><p>修改nginx.config:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">map $http_upgrade $connection_upgrade&#123;</span><br><span class="line">     default upgrade;</span><br><span class="line">     &quot;&quot; close;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  具体网站配置文件：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proxy_http_version 1.1;</span><br><span class="line">proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">proxy_set_header Connection &quot;upgrade&quot;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将这两个配置都写到具体网站配置文件中。（将map…放到server配置上面）</p>
</li>
</ol>
<h2 id="平时处理nginx用到的一些东西："><a href="#平时处理nginx用到的一些东西：" class="headerlink" title="平时处理nginx用到的一些东西："></a>平时处理nginx用到的一些东西：</h2><p>一、具体用法</p>
<pre><code>ln -s 源文件 目标文件

当我们需要在不同的目录，用到相同的文件时，我们不需要在每一个需要的目录下都放一个必须相同的文件，我们只要在某个固定的目录，放上该文件，然后在其它的目录下用ln命令链接（link）它就可以，不必重复的占用磁盘空间，只生成目标文件的一个镜像。

例如：ln -s /tmp/less /usr/local/bin/less
</code></pre><p>二、注意：</p>
<pre><code>（1）ln命令会保持你每一处连接文件的同步性，不论更改源文件还是目标文件，另一处文件也会有相 同的改动。

（2）ln命令分为软连接和硬链接（无参数-s）。与软连接不同的是，硬链接会在你选定的位置上生成一个与原来文件大小相同的文件。无论是软连接还是硬链接都具有文件的同步性。

（3）当一个存储空间，具有几个硬链接时，删除其中的一个，并不会对存储空间进行操作，所以其它的硬链接不会受到影响。

（4）ln默认时间里硬链接（无参数-s）。
</code></pre><h2 id="原先-www-eking99-com-nginx配置："><a href="#原先-www-eking99-com-nginx配置：" class="headerlink" title="原先 www.eking99.com nginx配置："></a>原先 <a href="http://www.eking99.com" target="_blank" rel="noopener">www.eking99.com</a> nginx配置：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80 default_server;</span><br><span class="line">    listen [::]:80 default_server ipv6only=on;</span><br><span class="line"></span><br><span class="line">    root /home/admin/deploy/www-eking99-web;</span><br><span class="line">    index index.html index.htm;</span><br><span class="line"></span><br><span class="line">    server_name www.eking99.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name eking.mobi www.eking.mobi eking.umail.cn;</span><br><span class="line">    rewrite ^/(.*) http://www.eking99.com/$1 permanent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="原www-eking-com-nginx配置："><a href="#原www-eking-com-nginx配置：" class="headerlink" title="原www.eking.com nginx配置："></a>原<a href="http://www.eking.com" target="_blank" rel="noopener">www.eking.com</a> nginx配置：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#all the Tornado servers here</span><br><span class="line">upstream www_eking99_tornadoes &#123;</span><br><span class="line">    server 127.0.0.1:9090;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">proxy_next_upstream error;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name www.eking99.com eking99.com</span><br><span class="line">    # Allow file uploads</span><br><span class="line">    client_max_body_size 15M;</span><br><span class="line"></span><br><span class="line">    location ^~ /s/ &#123;</span><br><span class="line">        alias /home/admin/deploy/www-eking-web/public/;</span><br><span class="line">        if ($query_string) &#123;</span><br><span class="line">            expires max;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location = /favicon.ico &#123;</span><br><span class="line">        rewrite (.*) /s/favicon.ico;</span><br><span class="line">    &#125;</span><br><span class="line">    location = /robots.txt &#123;</span><br><span class="line">        rewrite (.*) /s/robots.txt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass_header Server;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_redirect off; #老版本是false</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Scheme $scheme;</span><br><span class="line">        proxy_pass http://www_eking99_tornadoes;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="一般服务器nginx位置："><a href="#一般服务器nginx位置：" class="headerlink" title="一般服务器nginx位置："></a>一般服务器nginx位置：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/nginx</span><br><span class="line">sites-available为可用配置，但是不是实际跑的配置</span><br><span class="line">sites-enable 为当前启用的配置，是sites-available的软连接</span><br></pre></td></tr></table></figure>
<h3 id="nginx目录中文件及其作用："><a href="#nginx目录中文件及其作用：" class="headerlink" title="nginx目录中文件及其作用："></a>nginx目录中文件及其作用：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">conf.d</span><br><span class="line"></span><br><span class="line">mime.types</span><br><span class="line"></span><br><span class="line">nginx.conf</span><br><span class="line"></span><br><span class="line">sites-enabled</span><br><span class="line"></span><br><span class="line">fastcgi_params</span><br><span class="line"></span><br><span class="line">naxsi_core.rules</span><br><span class="line"></span><br><span class="line">proxy_params</span><br><span class="line"></span><br><span class="line">uwsgi_params</span><br><span class="line"></span><br><span class="line">koi-utf</span><br><span class="line"></span><br><span class="line">naxsi.rules</span><br><span class="line"></span><br><span class="line">scgi_params</span><br><span class="line"></span><br><span class="line">win-utf</span><br><span class="line"></span><br><span class="line">koi-win</span><br><span class="line"></span><br><span class="line">naxsi-ui.conf.1.4.1</span><br><span class="line"></span><br><span class="line">sites-available</span><br></pre></td></tr></table></figure>
<h2 id="前后端分离-ngnix配置："><a href="#前后端分离-ngnix配置：" class="headerlink" title="前后端分离 ngnix配置："></a>前后端分离 ngnix配置：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 服务地址</span><br><span class="line">upstream api_service &#123;</span><br><span class="line">  server localhost:8080;</span><br><span class="line">  keepalive 2000;</span><br><span class="line">&#125;</span><br><span class="line">#</span><br><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        location / &#123;</span><br><span class="line">          root /home/app/nginx/html;</span><br><span class="line">          index index.html;</span><br><span class="line">          try_files $uri $uri/ /index.html; #react-router 防止页面刷新出现404</span><br><span class="line">        &#125;</span><br><span class="line">        location ^~/api &#123; // 代理ajax请求，前端的ajax请求配置了统一的baseUrl = ‘/api’</span><br><span class="line">           proxy_pass http://api_service/;</span><br><span class="line">           proxy_set_header Host  $http_host;</span><br><span class="line">           proxy_set_header Connection close;</span><br><span class="line">           proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">           proxy_set_header X-Forwarded-Server $host;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/07/28/nginx操作/" data-id="ck71asp7t00b4sr9fgacairo9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-web打印" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/12/web打印/" class="article-date">
  <time datetime="2017-07-12T01:14:25.000Z" itemprop="datePublished">2017-07-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/12/web打印/">web打印</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h1 id="web打印"><a href="#web打印" class="headerlink" title="web打印"></a>web打印</h1><p><code>window.print()</code>直接打印</p>
<h2 id="打印分页"><a href="#打印分页" class="headerlink" title="打印分页"></a>打印分页</h2><p>如果table 使用规范的结构,打印自动分页时,每一行都会有表头、表尾；</p>
<p>如果需要强制分页，通过添加空div.pageBreak，样式如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">　　.pageBreak&#123; page-break-after:always;&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="区分打印内容，不打印内容"><a href="#区分打印内容，不打印内容" class="headerlink" title="区分打印内容，不打印内容"></a>区分打印内容，不打印内容</h2><p>不需要打印的内容，但是页面需要显示，添加<code>no-print</code>class类；<br>需要打印的内容，但是页面不需要显示，添加<code>just-print</code>class类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.just-print &#123;</span><br><span class="line">  display: none !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media print &#123;</span><br><span class="line">  .no-print &#123;</span><br><span class="line">    display: none !important;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .just-print &#123;</span><br><span class="line">    display: block !important;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/07/12/web打印/" data-id="ck71asp5l0052sr9flsefuwns" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/打印/">打印</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-关于组件化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/02/关于组件化/" class="article-date">
  <time datetime="2017-06-02T01:07:51.000Z" itemprop="datePublished">2017-06-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/规范/">规范</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/02/关于组件化/">关于组件化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h1 id="组件开发原则"><a href="#组件开发原则" class="headerlink" title="组件开发原则"></a>组件开发原则</h1><blockquote>
<p>遵循一定的原则，可以设计出简单易用、易于扩展的组件；</p>
</blockquote>
<h2 id="文件组织"><a href="#文件组织" class="headerlink" title="文件组织"></a>文件组织</h2><p>每个（业务）组件使用的资源：（css）less、js、jsx、图片、字体等都放入一个文件夹下。</p>
<h2 id="单一权责-组件的功能界限"><a href="#单一权责-组件的功能界限" class="headerlink" title="单一权责 组件的功能界限"></a>单一权责 组件的功能界限</h2><blockquote>
<p>掌握好组件拆分粒度，每一个组件要处理一个核心问题。提高重用性、灵活度，不要为了拆分而拆分，重点是满足业务需求，而不是炫技。</p>
</blockquote>
<ol>
<li>组件只关心自己的业务逻辑，一些交互，通过触发回调（<code>props.onClick</code>、<code>props.onChange</code>等）的方式，交给调用者来处理；</li>
</ol>
<h2 id="弹框操作封装"><a href="#弹框操作封装" class="headerlink" title="弹框操作封装"></a>弹框操作封装</h2><blockquote>
<p>较少字段的表单，最好可以封装到modal中，让用户在一个页面中完成添加、修改操作</p>
</blockquote>
<ul>
<li>如果弹框中的内容通用性不大，直接封装到modal中，如果后期有通用性需求，再拆分，一般情况下，modal中的内容不会有通用性，基本上都是以modal形式存在；</li>
<li>如果弹框中内容有公用情况，可以分别定义两个组件，一个是基础组件，一个是基础组件+弹框，分多个个文件定义；</li>
<li>antd 中的modal有正常的声明周期，也就是willMount,didMount会在页面加载时触发一次，以后每次modal被重新打开都不触发，多个操作公用一个modal就会出现数据互相干扰；<code>import {Modal} from &#39;zk-tookit/antd&#39;</code>，zk-tookit中的modal，对antd 的 modal进行了扩展，添加了 <code>beforeOpen</code>方法，每次打开都会触发，可以做modal的初始化工作；也避免了modal没有被打开，modal的willMout,didMount也触发，造成的一些操作浪费；</li>
</ul>
<h2 id="组件常用数据命名"><a href="#组件常用数据命名" class="headerlink" title="组件常用数据命名"></a>组件常用数据命名</h2><blockquote>
<p>组件只负责显示数据，至于数据由哪儿来的，外部通过props传入，一般情况下，很少在组件内发请求获取数据，但是也要视情况而定.数据名称有统一约定，可以降低沟通成本。</p>
</blockquote>
<ol>
<li>核心数据：<ol>
<li>列表：dataSource；</li>
<li>对象：data；</li>
<li>基础数据：value；</li>
</ol>
</li>
<li>加载：loading；</li>
<li>是否可见：visible；</li>
<li>是否禁用：disabled；</li>
<li>提交回调：onSubmit；</li>
<li>确定回调：onOk；</li>
<li>取消回调：onCancel；</li>
<li>事件回调：onXxx（onChage，onClick等等）；</li>
</ol>
<h2 id="props类型和默认值"><a href="#props类型和默认值" class="headerlink" title="props类型和默认值"></a>props类型和默认值</h2><blockquote>
<p>要申明props类型并注释属性的作用，通过props类型声明，即可知晓组件有哪些props；合理设置（不是全部设置）组件的默认props，可以有效的简化外部传入props的判断工作、以简化组件的调用传参；</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from &apos;react&apos;;</span><br><span class="line">import PropTypes from &apos;prop-types&apos;;</span><br><span class="line"></span><br><span class="line">class A extends Component&#123;</span><br><span class="line">    static propTypes&#123;</span><br><span class="line">        loading: PropTypes.bool,  // 页面加载状态</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    static defaultProps&#123;</span><br><span class="line">        loading: false,</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    state = &#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    render()&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="基础业务数据组件"><a href="#基础业务数据组件" class="headerlink" title="基础业务数据组件"></a>基础业务数据组件</h2><blockquote>
<p>基础业务数据，经常以<code>radio</code>、<code>select</code>、<code>checkbox</code>等形式被其他业务组件调用，提供一些组件：XxxSelect、XxxCheckbox、XxxRadio、XxxTransfer等，方便其他组件调用；</p>
</blockquote>
<p>设计原则：</p>
<ol>
<li>组件内部发送ajax请求，获取数据，其他组件只管调用即可，不必关心数据；</li>
<li>外部提供数据，通过dataSource属性传入，一般不会用到，如果有的组件用到再扩展即可；</li>
<li><code>onLoad(dataSource, res)</code>回调，将ajax请求返回的数据、res暴露给其他组件，其他组件有可能会使用到数据；</li>
<li><code>dataFilter(dataSource, res) =&gt; dataSource</code>回调，其他组件用来对ajax返回的数据进行过滤；</li>
<li><code>showDisabled</code>属性，默认<code>false</code>：是否显示禁用项，有些基础业务数据，有禁用启用操作，通过此字段表明是否显示禁用项；禁用项不可选择，label上显示禁用图标；</li>
<li>修改数据时，禁用项回显问题，如果修改的数据就是禁用的，不处理会显示value，而不是label；</li>
<li><code>showAll</code>属性，默认<code>false</code>：显示所有数据，不分禁用与启用，都是正常显示；</li>
</ol>
<h2 id="第三方组件再次封装"><a href="#第三方组件再次封装" class="headerlink" title="第三方组件再次封装"></a>第三方组件再次封装</h2><blockquote>
<p>有时候，第三方组件不能满足业务需求，需要进行一次包装，包装后只是功能的增强，不要修改第三方组件原有的功能；</p>
</blockquote>
<ol>
<li>单独包装一个第三方组件，要将props也传递给第三方组件，比如zk-tookit/antd中的Modal组件，只是添加了beforeOpen回调，并将所有的props也传递给antd的modal，保持antd的modal原有功能；</li>
<li>组合封装多个第三方组件，所有第三方组件相应的声明对应的props属性，比如ListPage封装，用到了Table，listPage组件提供tableProps属性，所有表格相关的属性，都通过tableProps传递；form的getFieldDecorator所需参数，都通过decorator传递等等；</li>
</ol>
<h2 id="基础数据组件"><a href="#基础数据组件" class="headerlink" title="基础数据组件"></a>基础数据组件</h2><blockquote>
<p>比如：星期、男女、是否等硬编码数据</p>
</blockquote>
<p>可以定义一个文件夹，分别定义数据以及各个组件，比如：weeks.js、WeekCheckbox.jsx、WeekRadio.jsx、WeekSelect.jsx;具体有什么组件基于需求而定，可以用到一个扩展一个。</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol>
<li>一些key-value相关的数据，一般定义为：<code>[{value: &#39;1&#39;, label: &#39;星期一&#39;}, ...]</code>，以<code>value</code>、<code>label</code>为关键字。</li>
<li>组件扩展，小版本内要注意向前兼容，参数要保证只增不减，同时用<code>FIXME</code>标记好哪些是不好的设计，等到大版本更新时，进行重构；</li>
<li>合理区分展示组件、容器组件；</li>
</ol>
<h2 id="props处理"><a href="#props处理" class="headerlink" title="props处理"></a>props处理</h2><p>抽取部分封装时用到的props属性，其他的原封不动赋值给html标签</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">render()&#123;</span><br><span class="line">    const &#123;</span><br><span class="line">        type, shape, size, className, htmlType, ...others,</span><br><span class="line">    &#125; = this.props;</span><br><span class="line">    // 使用type 等一些属性，干些事情</span><br><span class="line">    ...</span><br><span class="line">    return (</span><br><span class="line">        &lt;button</span><br><span class="line">            &#123;...others&#125;</span><br><span class="line">            type=&#123;htmlType || &apos;button&apos;&#125;</span><br><span class="line">            ...</span><br><span class="line">        &gt;</span><br><span class="line">            ...</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="componentWillReceiveProps周期函数"><a href="#componentWillReceiveProps周期函数" class="headerlink" title="componentWillReceiveProps周期函数"></a>componentWillReceiveProps周期函数</h2><p>获取新旧props进行对比，将props转化成内部state等操作；</p>
<h2 id="判断chilren是什么组件"><a href="#判断chilren是什么组件" class="headerlink" title="判断chilren是什么组件"></a>判断chilren是什么组件</h2><p>A.jsx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export default class A extends React.Component&#123;</span><br><span class="line">    static __IS_A = true; // 添加一个静态变量，作为标记</span><br><span class="line">    ...</span><br><span class="line">    render()&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>B.jsx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export default class B extends React.Component&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        const &#123;children&#125; = this.props;</span><br><span class="line">        let hasA = false;</span><br><span class="line">        React.Children.map(children, item =&gt; &#123;</span><br><span class="line">            // 从type中获取静态变量，作为判断依据</span><br><span class="line">            if(item &amp;&amp; item.type &amp;&amp; item.type.__IS_A) hasA = true;</span><br><span class="line">        &#125;);</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;&#123;children&#125;&lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>C.jsx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import A from &apos;path/to/A&apos;;</span><br><span class="line">import B from &apos;path/to/B&apos;;</span><br><span class="line">export default class C extends React.Component&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;B&gt;</span><br><span class="line">                &lt;A/&gt;</span><br><span class="line">                &lt;span&gt;...&lt;/span&gt;</span><br><span class="line">                ...</span><br><span class="line">            &lt;/B&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="一些实用小工具"><a href="#一些实用小工具" class="headerlink" title="一些实用小工具"></a>一些实用小工具</h2><ul>
<li>classNames className处理工具</li>
<li>omit 浅拷贝，删除指定属性</li>
</ul>
<h2 id="propTypes-的使用"><a href="#propTypes-的使用" class="headerlink" title="propTypes 的使用"></a>propTypes 的使用</h2><p>通用组件要声明propTypes，复杂结构（对象，数组内部包含对象）要通过PropTypes.shape明确声明内部结构</p>
<ul>
<li>通过propTypes可以清晰看出组件需要哪些属性，没个属性都是什么类型、结构；</li>
<li>有些IDE可以基于propTypes给出提示；</li>
<li>方便调用；</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/06/02/关于组件化/" data-id="ck71asp620062sr9fzxd9rpm6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/最佳实践/">最佳实践</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-前端leader工作任务" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/22/前端leader工作任务/" class="article-date">
  <time datetime="2017-05-22T01:07:14.000Z" itemprop="datePublished">2017-05-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/规范/">规范</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/22/前端leader工作任务/">前端leader工作任务</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h1 id="前端leader工作任务"><a href="#前端leader工作任务" class="headerlink" title="前端leader工作任务"></a>前端leader工作任务</h1><h2 id="项目搭建"><a href="#项目搭建" class="headerlink" title="项目搭建"></a>项目搭建</h2><ol>
<li>基于不同的项目进行技术选型；</li>
<li>基于以往总结、了解到的最佳实践进行架构设计；</li>
</ol>
<h2 id="团队培养"><a href="#团队培养" class="headerlink" title="团队培养"></a>团队培养</h2><ol>
<li>技术指导；</li>
<li>疑难问题解答；</li>
<li>分享最佳实践；</li>
<li>提升团队技术水平；</li>
</ol>
<h2 id="项目开发"><a href="#项目开发" class="headerlink" title="项目开发"></a>项目开发</h2><ol>
<li>理解需求，工作任务拆分，分配到组员；驳回其他部门不合理需求；</li>
<li>项目核心难点功能开发；</li>
<li>总结并记录最佳实践，新开项目时，重新完善架构；</li>
<li>保证项目进度，代码质量；</li>
<li>为其他成员兜底，完成其他成员无法完成的任务；</li>
<li>review 团队成员代码，给出指导建议；确保代码质量；</li>
<li>组件化、模块化规划，将复杂的需求，拆分成模块、组件；安排或亲自进行代码编写；<h2 id="工作总结"><a href="#工作总结" class="headerlink" title="工作总结"></a>工作总结</h2></li>
<li>按时总结工作完成情况，上报领导；</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/05/22/前端leader工作任务/" data-id="ck71asp67006dsr9fdm9w4px7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/最佳实践/">最佳实践</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-前后端分离开发约定" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/05/前后端分离开发约定/" class="article-date">
  <time datetime="2017-05-05T01:06:12.000Z" itemprop="datePublished">2017-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/规范/">规范</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/05/前后端分离开发约定/">前后端分离开发约定</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h1 id="前后端分离开发约定"><a href="#前后端分离开发约定" class="headerlink" title="前后端分离开发约定"></a>前后端分离开发约定</h1><blockquote>
<p>遵守约定，可以避免一些不必要的歧义，降低沟通成本。</p>
</blockquote>
<h2 id="前后端配合开发流程"><a href="#前后端配合开发流程" class="headerlink" title="前后端配合开发流程"></a>前后端配合开发流程</h2><blockquote>
<p>划分前后端工作界限，避免前后端工作节奏被相互影响；<strong>并行开发之前，一定要确定好接口！！！</strong></p>
</blockquote>
<ul>
<li>前后端理解需求，前端进行部分页面开发，技术难点攻克；后端进行需求分析、数据库设计，确定绝大部分字段名称、类型、各式、描述等；</li>
<li>基于原型/文档，后端设计接口，基于restfull形成swagger接口文档，前端确认后端接口是否符合前端需求。需要确认内容如下：<ul>
<li>每一个页面都需要哪些请求，哪些是以前提供过，哪些没有提供过；</li>
<li>请求方法类型，确认使用get还是post等；</li>
<li>请求的url；</li>
<li>请求参数结构、参数名、类型；</li>
<li>返回数据结构、变量名、类型；</li>
</ul>
</li>
<li>前端基于约定好的swagger文档进行页面开发；后端进行业务开发，提供真实数据接口。接口规范定义之后，后期如有变动及时沟通；</li>
<li>前后端进行联调：后端验证接口是否正确，前端提供技术支持；</li>
</ul>
<h2 id="前后端界限（任务分工）"><a href="#前后端界限（任务分工）" class="headerlink" title="前后端界限（任务分工）"></a>前后端界限（任务分工）</h2><blockquote>
<p>前端负责展示，后端负责数据处理；不要让前端进行数据的拼接，筛选等操作。</p>
</blockquote>
<ul>
<li>前端<ul>
<li>展示后端传递数据，一般不需进行处理就可以直接展示；</li>
<li>处理用户交互，收集数据发送ajax请求；</li>
</ul>
</li>
<li>后端工作<ul>
<li>code 转 name，同时保留原先的code，前端转换会发送过多的请求，影响展现性能；</li>
<li>页面中多个零散请求，如果可行，合并成一个请求，减少页面请求数量，提高页面展现性能；</li>
</ul>
</li>
</ul>
<h2 id="ajax约定"><a href="#ajax约定" class="headerlink" title="ajax约定"></a>ajax约定</h2><blockquote>
<p>数据交互统一使用JSON。</p>
</blockquote>
<h3 id="请求约定"><a href="#请求约定" class="headerlink" title="请求约定"></a>请求约定</h3><blockquote>
<p>基于restfull设计请求url。</p>
</blockquote>
<ul>
<li>正确区分get post put del 等请求含义：<ul>
<li>get: 获取服务端数据；</li>
<li>post: 保存数据到服务端；</li>
<li>put: 修改服务端数据；</li>
<li>del: 删除服务端数据；</li>
</ul>
</li>
<li>列表页分页参数：<ul>
<li>页容量：<code>pageSize</code>；</li>
<li>页码：<code>pageNum</code>;</li>
</ul>
</li>
<li>同一个数据出现在任何位置，要统一参数名；比如：房间号<code>roomNo</code>，不要出现<code>roomNum</code>、<code>roomCode</code>等其他参数名；</li>
<li>如无特殊需求，传递时间数据，要统一时间格式；</li>
<li>后端需要的参数，要声明字段名、类型、各式（时间）、描述（中文说明字段含义）；</li>
</ul>
<h3 id="成功时返回数据结构（版本一）"><a href="#成功时返回数据结构（版本一）" class="headerlink" title="成功时返回数据结构（版本一）"></a>成功时返回数据结构（版本一）</h3><blockquote>
<p>适用于接口需要支撑多端情况，通过message可以统一多端提示，如果提示信息需要更改，只改接口，各个端不需要修改，不需要发布。</p>
</blockquote>
<ul>
<li>code：业务逻辑结果编码，前端一般用不到，也可以通过code约定成功还是失败；</li>
<li>message：后端提供的信息，一般用于展现给用户，错误提示或者成功提示；成功提示如果后端统一给出，那么可以统一各个端（pc、android、ios）的提示信息，要区分开发、生产模式，开发过程中给出完整的错误提示，便于定位错误，生产环境给出用户友好提示并隐藏错误细节；</li>
<li>error：后端详细异常对象（或者字符串），用来体现具体的后端错误信息，方便定位问题，只非生产环境提供，生产环境不提供，以免暴露后端细节；</li>
<li>data：数据，单个数据为json对象，多条数据为json数组，数据变量命名规则如下：<ul>
<li>数据变量驼峰式命名；</li>
<li>数据不必加前缀，比如用户查询，直接返回<code>id</code>、<code>name</code>、<code>account</code>即可，直接数据对象的属性，不必添加user前缀，不要写成<code>userId</code>、<code>userName</code>、<code>userAccount</code>；</li>
<li>如果是其他对象属性，需要加前缀区分，比如user对象中有角色<code>id</code>，角色id要命名成<code>roleId</code>；</li>
<li>同一个数据，无论出现在哪个接口里面，要保证命名统一，减少歧义及沟通成本；比如：<code>roomNum</code>房号，不要出现<code>roomNo</code>、<code>roomCode</code>等多个命名；</li>
<li>码表型数据，对应<code>code</code>要转成对应的中文，命名以<code>Name</code>结尾，同时保留原有code(多数业务需要用到原code)，比如：<code>roomCode</code>，同时提供<code>roomCodeName</code>用于显示；</li>
<li>时间用于展示，直接格式化成要显示的格式，最好提供原时间的时间戳。如果不提供格式化后的数据，需要提供时间戳，前端可以自己格式化，不要提供其他格式日期，前端格式化时，容易出错；</li>
<li>列表数据，每条件记录以<code>id</code>为唯一标识；一定要存在<code>id</code>属性；</li>
<li>每一个字段要给出描述，不常见字段前端并不知道对应的是什么，沟通成本比较高；</li>
</ul>
</li>
<li>total：总条数，分页页面会用到；</li>
<li>其他约定字段等；</li>
</ul>
<h3 id="成功时返回数据结构（版本二）"><a href="#成功时返回数据结构（版本二）" class="headerlink" title="成功时返回数据结构（版本二）"></a>成功时返回数据结构（版本二）</h3><blockquote>
<p>适用于接口只对接一端，后端只需要给出错误信息，成功提示前端提供。</p>
</blockquote>
<ul>
<li>直接包含数据:<ul>
<li>单个数据为js对象；</li>
<li>多条数据为js数组；</li>
</ul>
</li>
<li>分页查询：<ul>
<li>list存放数据；</li>
<li>total存放总条数；</li>
</ul>
</li>
</ul>
<h3 id="失败时返回数据结构"><a href="#失败时返回数据结构" class="headerlink" title="失败时返回数据结构"></a>失败时返回数据结构</h3><blockquote>
<p>接口调用失败、后端逻辑验证失败等，后端要返回错误信息；</p>
</blockquote>
<ul>
<li><strong>所有非预期成功结果都视为失败，比如校验错误、越权操作等</strong>。</li>
<li>后端要基于不同的开发模式，返回不同的错误提示，生产环境返回友好的用户提示；其他环境返回用户提示+具体错误信息，方便调试。</li>
<li>合理使用http状态码，前端会根据不同的http状态码进行不同的操作，详见如下 http状态码约定；</li>
</ul>
<h3 id="http状态码约定："><a href="#http状态码约定：" class="headerlink" title="http状态码约定："></a>http状态码约定：</h3><blockquote>
<p>基于不同的状态码，前端会有相应的封装</p>
</blockquote>
<ul>
<li>200：正常业务逻辑，不包含校验错误等业务逻辑，200一定是预期的成功；</li>
<li>400：业务逻辑错误，校验错误，后端主动抛出的错误等，也可以约定为其他cod，视情况而定；</li>
<li>401：需要登录，前端发现ajax返回401，会跳转到登录页面；</li>
<li>403：无权操作，前端一般会给出类似“无权操作”的提示；</li>
<li>404：资源不存在，前端一般会给出类似“您访问的资源不存在”的提示；</li>
<li>500：服务端异常，前端一般会给出“未知系统错误，请联系管理员”；</li>
</ul>
<h3 id="后端解决跨域"><a href="#后端解决跨域" class="headerlink" title="后端解决跨域"></a>后端解决跨域</h3><blockquote>
<p>跨域问题由服务端配置或NG代理进行解决，更简单一些。只是开发过程中会遇到跨域问题，实际生产环境使用NG，解决了跨域问题；</p>
</blockquote>
<ul>
<li><p>header一些设置，以nodejs为例：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.all(&apos;*&apos;, function(req, res, next) &#123;</span><br><span class="line">  res.header(&quot;Access-Control-Allow-Origin&quot;, config().allow_origin);</span><br><span class="line">  res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;Origin, X-Requested-With, Content-Type, Accept&quot;);</span><br><span class="line">  res.header(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT,POST,GET,DELETE,OPTIONS&quot;);</span><br><span class="line">  res.header(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);</span><br><span class="line">  res.header(&quot;X-Powered-By&quot;, &apos; 3.2.1&apos;)</span><br><span class="line">  res.header(&quot;Content-Type&quot;, &quot;application/json;charset=utf-8&quot;);</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>cookie问题: <a href="http://www.jianshu.com/p/643427c17877" target="_blank" rel="noopener">ajax跨域请求中的cookie问题</a>；</p>
<ul>
<li>后端<code>Access-Control-Allow-Origin</code>不能设置成*，要指定具体的域名；</li>
<li>前端ajax请求，要设置<code>withCredentials</code>为<code>true</code>，允许跨域的cookie访问；</li>
</ul>
</li>
</ul>
<h3 id="通过配置proxy解决跨域"><a href="#通过配置proxy解决跨域" class="headerlink" title="通过配置proxy解决跨域"></a>通过配置proxy解决跨域</h3><p>前端开发会启动一个开发模式的服务，如果这个服务支持proxy配置，可以通过配置proxy解决跨域问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;proxy&quot;: &#123;</span><br><span class="line">    &quot;/api&quot;: &#123;</span><br><span class="line">      &quot;target&quot;: &quot;http://localhost:3000&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/05/05/前后端分离开发约定/" data-id="ck71asp610060sr9fpgqpl7vb" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/最佳实践/">最佳实践</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-前端最佳实践" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/12/前端最佳实践/" class="article-date">
  <time datetime="2017-04-12T07:04:58.000Z" itemprop="datePublished">2017-04-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/规范/">规范</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/12/前端最佳实践/">前端最佳实践</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h1 id="前端最佳实践"><a href="#前端最佳实践" class="headerlink" title="前端最佳实践"></a>前端最佳实践</h1><blockquote>
<p>项目怎么都能写，但是如何写的优雅？如何省时省力？如何构建大型项目，而不乱？需要总结一些最佳实践~</p>
</blockquote>
<h2 id="核心问题"><a href="#核心问题" class="headerlink" title="核心问题"></a>核心问题</h2><ul>
<li>如何进行组件的划分</li>
<li>组件如何方便的获取（后端）数据</li>
<li>组件如何方便的修改（后端）数据</li>
</ul>
<h2 id="封装的目的是什么？"><a href="#封装的目的是什么？" class="headerlink" title="封装的目的是什么？"></a>封装的目的是什么？</h2><ul>
<li>包装复杂逻辑</li>
<li>提供简单接口</li>
<li>方便调用</li>
<li>简化开发</li>
<li>少写代码</li>
<li>功能统一</li>
<li>样式统一</li>
<li>代码风格统一</li>
<li>代码生成</li>
<li>可维护性</li>
<li>扩展性</li>
<li>健壮性</li>
<li>可读性</li>
</ul>
<h2 id="前端目录结构组织"><a href="#前端目录结构组织" class="headerlink" title="前端目录结构组织"></a>前端目录结构组织</h2><blockquote>
<p>前提要划分好需求的各个模块，基于模块/功能点对应的建立models/services，否则大型项目，需求越来越多，最终会导致models/services混乱，models命名与其包含的内容不符等问题尽量避免；</p>
</blockquote>
<p>如下为src中的目录</p>
<h3 id="components"><a href="#components" class="headerlink" title="components"></a>components</h3><p>通用业务组件</p>
<h3 id="models"><a href="#models" class="headerlink" title="models"></a>models</h3><p>数据层，与后端交互，为组件提供数据；</p>
<h3 id="services"><a href="#services" class="headerlink" title="services"></a>services</h3><p>主要进行一些ajax请求，供models层调用，获取后端数据；<br>是否可以考虑与models层合并?</p>
<h3 id="pages"><a href="#pages" class="headerlink" title="pages"></a>pages</h3><p>页面，只有pages中的文件与redux连接？；<br>接受models层数据，组合components完成用户交互、数据展示等；</p>
<h3 id="layouts"><a href="#layouts" class="headerlink" title="layouts"></a>layouts</h3><p>布局，提供整体的结构，头部底部等通用布局组件；</p>
<h2 id="避免组件频繁渲染"><a href="#避免组件频繁渲染" class="headerlink" title="避免组件频繁渲染"></a>避免组件频繁渲染</h2><blockquote>
<p>如果一个复杂的页面，组件A嵌套的层次比较深，任何父级组件的重新渲染，都会导致A组件的重新渲染，通过<code>shouldComponentUpdate</code>周期函数，进行优化，避免没有必要的重复渲染；考虑是否使用<a href="https://facebook.github.io/immutable-js/" target="_blank" rel="noopener">immutable-js</a></p>
</blockquote>
<h2 id="基础数据放入redux"><a href="#基础数据放入redux" class="headerlink" title="基础数据放入redux"></a>基础数据放入redux</h2><blockquote>
<p>基础数据，其他业务页面会经常用到，简化获取基础数据方式，有利于各个业务页面获取/使用基础数据；特殊业务的请求是否可以考虑再业务组件中直接发起？不必经过redux？</p>
</blockquote>
<p>比如客户数据，提供<code>getCustomer</code> action，用来获取客户数据，如果某个业务组件用到客户数据，直接从redux中获取；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">export function mapStateToProps(state)&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        customers: state.customer.dataSource,</span><br><span class="line">        customersLoading:: state.customer.loading,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">componentWillMount()&#123;</span><br><span class="line">    const &#123;</span><br><span class="line">        $actions: &#123;customer&#125;,</span><br><span class="line">    &#125; = this.props;</span><br><span class="line">    </span><br><span class="line">    customer.getCustomer();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">    const &#123;</span><br><span class="line">        customers,</span><br><span class="line">        customersLoading,</span><br><span class="line">        otherLoading,</span><br><span class="line">    &#125; = this.props;</span><br><span class="line">    </span><br><span class="line">    if(customerLoading || otherLoading) &#123;</span><br><span class="line">        // show loading...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="提供filter工具"><a href="#提供filter工具" class="headerlink" title="提供filter工具"></a>提供filter工具</h2><p>提供filter工具，用来转换数据显示，比如id转换成对应的label，用于页面显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// filter.js</span><br><span class="line"></span><br><span class="line">export function filterGender(gender) &#123;</span><br><span class="line">    const genders = &#123;</span><br><span class="line">        male: &apos;男&apos;,</span><br><span class="line">        female: &apos;女&apos;,</span><br><span class="line">        m: &apos;男&apos;,</span><br><span class="line">        f: &apos;女&apos;,</span><br><span class="line">        M: &apos;男&apos;,</span><br><span class="line">        F: &apos;女&apos;,</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    return genders[gender] || &apos;未知&apos;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="复杂页面拆分"><a href="#复杂页面拆分" class="headerlink" title="复杂页面拆分"></a>复杂页面拆分</h2><blockquote>
<p>部分页面会很复杂，如果所有内容都写到一个文件，将增加修改/维护难度；</p>
</blockquote>
<p>可以基于页面结构/功能点，合理的将页面拆分成各个小组件，适当的使用redux进行数据管理；</p>
<h2 id="通用业务组件抽离"><a href="#通用业务组件抽离" class="headerlink" title="通用业务组件抽离"></a>通用业务组件抽离</h2><blockquote>
<p>通用的业务组件抽离到components目录中</p>
</blockquote>
<h2 id="构建自动化"><a href="#构建自动化" class="headerlink" title="构建自动化"></a>构建自动化</h2><p>前端构建过程要自动化，基本通过几个命令搞定，核心命令有如下几个：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 安装所有依赖</span><br><span class="line">$ yarn</span><br><span class="line"></span><br><span class="line">// 启动开发模式</span><br><span class="line">$ yarn start 或 yarn dev </span><br><span class="line"></span><br><span class="line">// 生产构建</span><br><span class="line">$ yarn build </span><br><span class="line"></span><br><span class="line">// 测试</span><br><span class="line">$ yarn test</span><br></pre></td></tr></table></figure></p>
<h2 id="ajax封装"><a href="#ajax封装" class="headerlink" title="ajax封装"></a>ajax封装</h2><p>只关心请求，成功提示、异常提示要自动化，简单配置就OK；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ajax.put(&apos;/user/123&apos;, params, &#123;successTip: &apos;保存成功！&apos;, errorTip: &apos;保存失败！&apos;&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="函数-组件编写原则"><a href="#函数-组件编写原则" class="headerlink" title="函数/组件编写原则"></a>函数/组件编写原则</h2><ul>
<li>可用<blockquote>
<p>编写一个函数/组件最核心也是最低的要求,要达到可用；</p>
</blockquote>
</li>
<li>健壮<blockquote>
<p>最基本的兼容性处理、边界处理、异常处理、用户输入校验；</p>
</blockquote>
</li>
<li>可靠<blockquote>
<p>尽可能在任何情况下，都返回一个可靠的结果，哪怕是异常情况下；</p>
</blockquote>
</li>
<li>宽容<blockquote>
<p>对需求宽容、对用户宽容、对调用者宽容、对维护者宽容；如果函数需要的是数字，调用者传入的是字符串数字是否允许等；</p>
</blockquote>
</li>
<li>精益求精<blockquote>
<p>可读性、扩展性是否良好？性能怎么样?</p>
</blockquote>
</li>
</ul>
<h2 id="大型项目"><a href="#大型项目" class="headerlink" title="大型项目"></a>大型项目</h2><p>做大型项目时，一定要组织好基础业务组件，很多模块都会用到的组件，维护好了，可以省很多事儿；</p>
<h2 id="认证"><a href="#认证" class="headerlink" title="认证"></a>认证</h2><p>单页面应用，一般会涉及跨域问题，cookie有时候不是很适合，最好使用tooken方式，适用面更广，但是浏览器与App不同，要做好安全性方面的工作。团队中有多个项目，最好统一认证方式，可以减少工作量，降低沟通成本；</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/04/12/前端最佳实践/" data-id="ck71asp6a006isr9fgbfp6ksi" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/最佳实践/">最佳实践</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-GraphQL" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/02/GraphQL/" class="article-date">
  <time datetime="2017-04-02T01:03:55.000Z" itemprop="datePublished">2017-04-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/02/GraphQL/">GraphQL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="GraphQL"><a href="#GraphQL" class="headerlink" title="GraphQL"></a>GraphQL</h2><p><a href="http://graphql.cn/" target="_blank" rel="noopener">中文官网</a></p>
<p><a href="http://graphql.org/" target="_blank" rel="noopener">英文官网</a></p>
<p><a href="https://github.com/apollographql/react-apollo" target="_blank" rel="noopener">React Apollo</a></p>
<ol>
<li>对API中的数据提供了一套易于理解的完整描述；</li>
<li>客户端可以准确的获取所需数据，所需结构，前端可定制性较强，所需数据基本可以自己组织；</li>
<li>获取的数据没有冗余，后端也会有相应得性能优化（不获取的字段，不会执行后端相应得解析函数）；</li>
<li>API容易演进，提供不同版本的数据；</li>
<li>一个请求获取多个资源，降低HTTP请求数量；</li>
<li>容易提供强大的开发工具；</li>
<li>以模块为单位进行数据组织；（如何划分是个难点）</li>
</ol>
<h2 id="restful-api"><a href="#restful-api" class="headerlink" title="restful api"></a>restful api</h2><p>目前我们项目存在的问题：</p>
<ol>
<li>字段没有中文描述，不常见字段不知道对应的是什么；</li>
<li>不同人开发的、不同接口中，同一内容，命名不同，比如 【房号】有的人（接口）中为roomNum,有的为roomNo；</li>
<li>有的接口返回的数据并不利于前端展示，前端需要做转换；</li>
<li>接口是哪位后端开发的并不知道、是否开发完成也不知道；</li>
<li>日期相关参数，格式不统一；</li>
<li>swagger 文档中接口越来越多，查找有些困难；</li>
<li>很多数据存在无意义前缀，比如roomType : {roomTypeId, roomTypeName, …}，这里直接写成：roomType:{id, name, …}，使用时，一般形式为：roomType.id, roomType.name，没个字段就不必添加前缀，显得冗余；</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/04/02/GraphQL/" data-id="ck71asp1j0004sr9fjfrso163" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GraphQL/">GraphQL</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-git-tag" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/29/git-tag/" class="article-date">
  <time datetime="2017-03-29T05:23:52.000Z" itemprop="datePublished">2017-03-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/29/git-tag/">git tag</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h1 id="主要操作："><a href="#主要操作：" class="headerlink" title="主要操作："></a>主要操作：</h1><h2 id="创建附注标签"><a href="#创建附注标签" class="headerlink" title="创建附注标签"></a>创建附注标签</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.1.2 -m “0.1.2版本”</span><br></pre></td></tr></table></figure>
<h2 id="删除标签"><a href="#删除标签" class="headerlink" title="删除标签"></a>删除标签</h2><p>误打或需要修改标签时，需要先将标签删除，再打新标签。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v0.1.2 # 删除标签</span><br></pre></td></tr></table></figure></p>
<h2 id="将v0-1-2标签提交到git服务器"><a href="#将v0-1-2标签提交到git服务器" class="headerlink" title="将v0.1.2标签提交到git服务器"></a>将v0.1.2标签提交到git服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin v0.1.2</span><br></pre></td></tr></table></figure>
<h2 id="将本地所有标签一次性提交到git服务器"><a href="#将本地所有标签一次性提交到git服务器" class="headerlink" title="将本地所有标签一次性提交到git服务器"></a>将本地所有标签一次性提交到git服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --tags</span><br></pre></td></tr></table></figure>
<h1 id="列出标签"><a href="#列出标签" class="headerlink" title="列出标签"></a>列出标签</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag # 在控制台打印出当前仓库的所有标签</span><br><span class="line">$ git tag -l ‘v0.1.*’ # 搜索符合模式的标签</span><br></pre></td></tr></table></figure>
<h1 id="打标签"><a href="#打标签" class="headerlink" title="打标签"></a>打标签</h1><p>git标签分为两种类型：轻量标签和附注标签。轻量标签是指向提交对象的引用，附注标签则是仓库中的一个独立对象。建议使用附注标签。</p>
<h2 id="创建轻量标签"><a href="#创建轻量标签" class="headerlink" title="创建轻量标签"></a>创建轻量标签</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v0.1.2-light</span><br></pre></td></tr></table></figure>
<h2 id="创建附注标签-1"><a href="#创建附注标签-1" class="headerlink" title="创建附注标签"></a>创建附注标签</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.1.2 -m “0.1.2版本”</span><br></pre></td></tr></table></figure>
<p>创建轻量标签不需要传递参数，直接指定标签名称即可。<br>创建附注标签时，参数a即annotated的缩写，指定标签类型，后附标签名。参数m指定标签说明，说明信息会保存在标签对象中。</p>
<h1 id="切换到标签"><a href="#切换到标签" class="headerlink" title="切换到标签"></a>切换到标签</h1><p>与切换分支命令相同<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout [tagname]</span><br></pre></td></tr></table></figure></p>
<h1 id="查看标签信息"><a href="#查看标签信息" class="headerlink" title="查看标签信息"></a>查看标签信息</h1><p>用git show命令可以查看标签的版本信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show v0.1.2</span><br></pre></td></tr></table></figure></p>
<h1 id="删除标签-1"><a href="#删除标签-1" class="headerlink" title="删除标签"></a>删除标签</h1><p>误打或需要修改标签时，需要先将标签删除，再打新标签。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v0.1.2 # 删除标签</span><br></pre></td></tr></table></figure></p>
<p>参数d即delete的缩写，意为删除其后指定的标签。</p>
<h1 id="给指定的commit打标签"><a href="#给指定的commit打标签" class="headerlink" title="给指定的commit打标签"></a>给指定的commit打标签</h1><p>打标签不必要在head之上，也可在之前的版本上打，这需要你知道某个提交对象的校验和（通过git log获取）。</p>
<h1 id="补打标签"><a href="#补打标签" class="headerlink" title="补打标签"></a>补打标签</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.1.1 9fbc3d0</span><br></pre></td></tr></table></figure>
<p>标签发布<br>通常的git push不会将标签对象提交到git服务器，我们需要进行显式的操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin v0.1.2 # 将v0.1.2标签提交到git服务器</span><br><span class="line">$ git push origin --tags # 将本地所有标签一次性提到git服务器</span><br></pre></td></tr></table></figure></p>
<p>注意：如果想看之前某个标签状态下的文件，可以这样操作</p>
<ol>
<li><p>git tag   查看当前分支下的标签</p>
</li>
<li><p>git  checkout v0.21   此时会指向打v0.21标签时的代码状态，（但现在处于一个空的分支上）</p>
</li>
<li><p>cat  test.txt   查看某个文件</p>
</li>
</ol>
<p>refer to：<a href="http://www.csser.com/dev/580.html" target="_blank" rel="noopener">http://www.csser.com/dev/580.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/03/29/git-tag/" data-id="ck71asp31002isr9fz7k31vbv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-数组选出几个数相加等于固定值" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/02/数组选出几个数相加等于固定值/" class="article-date">
  <time datetime="2017-03-02T07:27:44.000Z" itemprop="datePublished">2017-03-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/数组选出几个数相加等于固定值/">数组选出几个数相加等于固定值</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>转自：<a href="http://www.cnblogs.com/iyangyuan/p/3908498.html" target="_blank" rel="noopener">从数组中选出和等于固定值的n个数(JavaScript实现)</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">调用说明：</span></span><br><span class="line"><span class="comment">  array: 数据源数组。必选。</span></span><br><span class="line"><span class="comment">  sum: 相加的和。必选。</span></span><br><span class="line"><span class="comment">  tolerance: 容差。如果不指定此参数，则相加的和必须等于sum参数，指定此参数可以使结果在容差范围内浮动。可选。</span></span><br><span class="line"><span class="comment">  targetCount: 操作数数量。如果不指定此参数，则结果包含所有可能的情况，指定此参数可以筛选出固定数量的数相加，假如指定为3，那么结果只包含三个数相加的情况。可选。</span></span><br><span class="line"><span class="comment">  返回值：返回的是数组套数组结构，内层数组中的元素是操作数，外层数组中的元素是所有可能的结果。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCombBySum</span>(<span class="params">array,sum,tolerance,targetCount</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> util = &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      get combination from array</span></span><br><span class="line"><span class="comment">      arr: target array</span></span><br><span class="line"><span class="comment">      num: combination item length</span></span><br><span class="line"><span class="comment">      return: one array that contain combination arrays</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    getCombination: <span class="function"><span class="keyword">function</span>(<span class="params">arr, num</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> r=[];</span><br><span class="line">      (<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">t,a,n</span>)</span></span><br><span class="line"><span class="function">      </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (n==<span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">return</span> r.push(t);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>,l=a.length; i&lt;=l-n; i++)</span><br><span class="line">          &#123;</span><br><span class="line">              f(t.concat(a[i]), a.slice(i+<span class="number">1</span>), n<span class="number">-1</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;)([],arr,num);</span><br><span class="line">      <span class="keyword">return</span> r;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//take array index to a array</span></span><br><span class="line">    getArrayIndex: <span class="function"><span class="keyword">function</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> i = <span class="number">0</span>,</span><br><span class="line">        r = [];</span><br><span class="line">      <span class="keyword">for</span>(i = <span class="number">0</span>;i&lt;array.length;i++)&#123;</span><br><span class="line">        r.push(i);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,logic = &#123;</span><br><span class="line">    <span class="comment">//sort the array,then get what's we need</span></span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params">array,sum</span>) </span>&#123;</span><br><span class="line">      <span class="comment">//clone array</span></span><br><span class="line">      <span class="keyword">var</span> _array = array.concat(),</span><br><span class="line">      r = [],</span><br><span class="line">      i = <span class="number">0</span>;</span><br><span class="line">      <span class="comment">//sort by asc</span></span><br><span class="line">      _array.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//get all number when it's less than or equal sum</span></span><br><span class="line">      <span class="keyword">for</span>(i = <span class="number">0</span>;i&lt;_array.length;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(_array[i]&lt;=sum)&#123;</span><br><span class="line">          r.push(_array[i]);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> r;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//important function</span></span><br><span class="line">    core: <span class="function"><span class="keyword">function</span>(<span class="params">array,sum,arrayIndex,count,r</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> i = <span class="number">0</span>,</span><br><span class="line">        k = <span class="number">0</span>,</span><br><span class="line">        combArray = [],</span><br><span class="line">        _sum = <span class="number">0</span>,</span><br><span class="line">        _cca = [],</span><br><span class="line">        _cache = [];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(count == _returnMark)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//get current count combination</span></span><br><span class="line">      combArray = util.getCombination(arrayIndex,count);</span><br><span class="line">      <span class="keyword">for</span>(i = <span class="number">0</span>;i&lt;combArray.length;i++)&#123;</span><br><span class="line">        _cca = combArray[i];</span><br><span class="line">        _sum = <span class="number">0</span>;</span><br><span class="line">        _cache = [];</span><br><span class="line">        <span class="comment">//calculate the sum from combination</span></span><br><span class="line">        <span class="keyword">for</span>(k = <span class="number">0</span>;k&lt;_cca.length;k++)&#123;</span><br><span class="line">          _sum += array[_cca[k]];</span><br><span class="line">          _cache.push(array[_cca[k]]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">Math</span>.abs(_sum-sum) &lt;= _tolerance)&#123;</span><br><span class="line">          r.push(_cache);</span><br><span class="line">        &#125;      </span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      logic.core(array,sum,arrayIndex,count<span class="number">-1</span>,r);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">    r = [],</span><br><span class="line">    _array = [],</span><br><span class="line">    _targetCount = <span class="number">0</span>,</span><br><span class="line">    _tolerance = <span class="number">0</span>,</span><br><span class="line">    _returnMark = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//check data</span></span><br><span class="line">  _targetCount = targetCount || _targetCount;</span><br><span class="line">  _tolerance = tolerance || _tolerance;</span><br><span class="line"></span><br><span class="line">  _array = logic.init(array,sum);</span><br><span class="line">  <span class="keyword">if</span>(_targetCount)&#123;</span><br><span class="line">    _returnMark = _targetCount<span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  logic.core(_array,sum,util.getArrayIndex(_array),(_targetCount || _array.length),r);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>两个数相加等于固定的值，参考<a href="http://taop.marchtea.com/02.02.html" target="_blank" rel="noopener">http://taop.marchtea.com/02.02.html</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明两个变量做为数组的指针，一个从0开始，一个从length-1开始。。。。</span></span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> t = <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">twoSun</span>(<span class="params">data, sum</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> length = data.length;</span><br><span class="line">  <span class="keyword">var</span> begin = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> end = length - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span>(begin &lt; end) &#123;</span><br><span class="line">    <span class="keyword">var</span> currSum = data[begin] + data[end];</span><br><span class="line">    <span class="keyword">if</span>(currSum === sum) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data[begin], data[end]);</span><br><span class="line"></span><br><span class="line">      begin++;</span><br><span class="line">      end--;</span><br><span class="line"><span class="comment">//       break;</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(currSum &lt; sum)&#123;</span><br><span class="line">        begin++;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        end--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">twoSun(arr, t);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/03/02/数组选出几个数相加等于固定值/" data-id="ck71asp6i0070sr9fnzduxwyd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法/">算法</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-bind-polyfill" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/02/bind-polyfill/" class="article-date">
  <time datetime="2017-03-02T07:25:16.000Z" itemprop="datePublished">2017-03-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/bind-polyfill/">bind polyfill</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>老版本浏览器可能不支持bind函数，这里做一个polyfill。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="built_in">Function</span>.prototype.bind)&#123;</span><br><span class="line">    <span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> slice = [].slice,</span><br><span class="line">            <span class="comment">//bind 函数是可以传参数的。比如：this.click.bind(this,1,2,3)</span></span><br><span class="line">            args = slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>),</span><br><span class="line">            self = <span class="keyword">this</span>,</span><br><span class="line">            nop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">            bound = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> self.apply(<span class="keyword">this</span> <span class="keyword">instanceof</span> nop ? <span class="keyword">this</span>:(obj||&#123;&#125;),</span><br><span class="line">                    args.concat(slice.call(<span class="built_in">arguments</span>)));</span><br><span class="line">            &#125;;</span><br><span class="line">        nop.prototype = self.prototype;</span><br><span class="line">        bound.prototype = <span class="keyword">new</span> nop();</span><br><span class="line">        <span class="keyword">return</span> bound;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/03/02/bind-polyfill/" data-id="ck71asp2u0024sr9fgowxrz46" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/polyfill/">polyfill</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-通过时间戳获取索引的一个有趣的算法题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/27/通过时间戳获取索引的一个有趣的算法题/" class="article-date">
  <time datetime="2017-02-27T02:29:03.000Z" itemprop="datePublished">2017-02-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实现方案/">实现方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/27/通过时间戳获取索引的一个有趣的算法题/">通过时间戳获取索引的一个有趣的算法题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>一个数组，是个数字：var arr = [0, 1, 2,…8, 9]，设计一个函数，要求三秒内调用次函数，返回的数字都是一个，如果两次调用间隔超过三秒，则返回不同的数字，不允许使用全局计数变量。</p>
<p>实现思路，通过时间戳分段来实现，3000毫秒一个段，arr.length为一个区间，比如：[0, 3000] (3000, 6000] (6000, 9000]…，获取当前时间戳，计算当前时间戳属于哪个区段，即可得出索引值，具体算法如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getId</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">  <span class="keyword">var</span> index = <span class="built_in">parseInt</span>(t/<span class="number">3000</span>) % arr.length;</span><br><span class="line">  <span class="keyword">return</span> arr[index];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 合并成一行代码为：</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getId</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr[<span class="built_in">parseInt</span>(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()/<span class="number">3000</span>)%arr.length];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/27/通过时间戳获取索引的一个有趣的算法题/" data-id="ck71asp7w00bbsr9fnw6c4dq1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法/">算法</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-Vue2-0-跨组件事件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/17/Vue2-0-跨组件事件/" class="article-date">
  <time datetime="2017-02-17T15:34:52.000Z" itemprop="datePublished">2017-02-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/17/Vue2-0-跨组件事件/">Vue2.0 跨组件事件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>组件化经常会涉及到跨组件通信，可以通过发布订阅实现，Vue中可以使用一个空的vue实例座位数据总线，实现组件间通信，不需要使用第三方的发布订阅库。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bus = <span class="keyword">new</span> Vue()</span><br><span class="line"><span class="comment">// 触发组件 A 中的事件</span></span><br><span class="line">bus.$emit(<span class="string">'id-selected'</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment">// 在组件 B 创建的钩子中监听事件</span></span><br><span class="line">bus.$on(<span class="string">'id-selected'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>实际项目中可以这样封装一下，搞个mixins：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> eventBus = <span class="keyword">new</span> Vue();</span><br><span class="line"><span class="keyword">const</span> mixins = &#123;</span><br><span class="line">    data ()&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            eventBus,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">Vue.mixin(mixins);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 各个组件中就可以通过如下方式来使用</span></span><br><span class="line"><span class="keyword">this</span>.eventBus.$emit(...);</span><br><span class="line"><span class="keyword">this</span>.eventBus.$on(...);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/17/Vue2-0-跨组件事件/" data-id="ck71asp2n001usr9fp0gonhp8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-JS获取窗滚动条位置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/15/JS获取窗滚动条位置/" class="article-date">
  <time datetime="2017-02-15T03:25:15.000Z" itemprop="datePublished">2017-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/15/JS获取窗滚动条位置/">JS获取窗滚动条位置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>如果项目中使用jQuery，请使用jQuery相关方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取指定window中滚动条的偏移量，如未指定则获取当前window</span></span><br><span class="line"><span class="comment"> * 滚动条偏移量</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param &#123;window&#125; w 需要获取滚动条偏移量的窗口</span></span><br><span class="line"><span class="comment"> * @return &#123;Object&#125; obj.x为水平滚动条偏移量,obj.y为竖直滚动条偏移量</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScrollOffset</span>(<span class="params">w</span>) </span>&#123;</span><br><span class="line">    w =  w || <span class="built_in">window</span>;</span><br><span class="line">    <span class="comment">// 如果是标准浏览器</span></span><br><span class="line">    <span class="keyword">if</span> (w.pageXOffset != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            x: w.pageXOffset,</span><br><span class="line">            y: w.pageYOffset</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 老版本IE，根据兼容性不同访问不同元素</span></span><br><span class="line">    <span class="keyword">var</span> d = w.document;</span><br><span class="line">    <span class="keyword">if</span> (d.compatMode === <span class="string">'CSS1Compat'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            x: d.documentElement.scrollLeft,</span><br><span class="line">            y: d.documentElement.scrollTop</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        x: d.body.scrollLeft,</span><br><span class="line">        y: d.body.scrollTop</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getScrollOffset());</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/15/JS获取窗滚动条位置/" data-id="ck71asp22000qsr9fgu6iieo1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-JS获取窗口尺寸" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/15/JS获取窗口尺寸/" class="article-date">
  <time datetime="2017-02-15T03:18:17.000Z" itemprop="datePublished">2017-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/15/JS获取窗口尺寸/">JS获取窗口尺寸</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>项目中如果使用了jQuery，可以使用jQuery相关方法。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 查询指定窗口的视口尺寸，如果不指定窗口，查询当前窗口尺寸</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getViewportSize</span>(<span class="params">w</span>) </span>&#123;</span><br><span class="line">    w = w || <span class="built_in">window</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// IE9及标准浏览器中可使用此标准方法</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">'innerHeight'</span> <span class="keyword">in</span> w) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            width: w.innerWidth,</span><br><span class="line">            height: w.innerHeight</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> d = w.document;</span><br><span class="line">    <span class="comment">// IE 8及以下浏览器在标准模式下</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.compatMode === <span class="string">'CSS1Compat'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            width: d.documentElement.clientWidth,</span><br><span class="line">            height: d.documentElement.clientHeight</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// IE8及以下浏览器在怪癖模式下</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        width: d.body.clientWidth,</span><br><span class="line">        height: d.body.clientHeight</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getViewportSize());</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/15/JS获取窗口尺寸/" data-id="ck71asp20000lsr9f2nvqf4df" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-JS解析query-string" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/15/JS解析query-string/" class="article-date">
  <time datetime="2017-02-15T03:12:44.000Z" itemprop="datePublished">2017-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/15/JS解析query-string/">JS解析query-string</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>可以使用的一个第三方开源库<a href="https://www.npmjs.com/package/query-string" target="_blank" rel="noopener">query-string</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解析query string转换为对象，一个key有多个值时生成数组</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; query 需要解析的query字符串，开头可以是?，</span></span><br><span class="line"><span class="comment"> * 按照application/x-www-form-urlencoded编码</span></span><br><span class="line"><span class="comment"> * @return &#123;Object&#125; 参数解析后的对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseQuery</span>(<span class="params">query</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果不是字符串返回空对象</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> query !== <span class="string">'string'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 去掉字符串开头可能带的?</span></span><br><span class="line">    <span class="keyword">if</span> (query.charAt(<span class="number">0</span>) === <span class="string">'?'</span>) &#123;</span><br><span class="line">        query = query.substring(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> pairs = query.split(<span class="string">'&amp;'</span>);</span><br><span class="line">    <span class="keyword">var</span> pair;</span><br><span class="line">    <span class="keyword">var</span> key, value;</span><br><span class="line">    <span class="keyword">var</span> i, len;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = pairs.length; i &lt; len; ++i) &#123;</span><br><span class="line">        pair = pairs[i].split(<span class="string">'='</span>);</span><br><span class="line">        <span class="comment">// application/x-www-form-urlencoded编码会将' '转换为+</span></span><br><span class="line">        key = <span class="built_in">decodeURIComponent</span>(pair[<span class="number">0</span>]).replace(<span class="regexp">/\+/g</span>, <span class="string">' '</span>);</span><br><span class="line">        value = <span class="built_in">decodeURIComponent</span>(pair[<span class="number">1</span>]).replace(<span class="regexp">/\+/g</span>, <span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果是新key，直接添加</span></span><br><span class="line">        <span class="keyword">if</span> (!(key <span class="keyword">in</span> result)) &#123;</span><br><span class="line">            result[key] = value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如果key已经出现一次以上，直接向数组添加value</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (isArray(result[key])) &#123;</span><br><span class="line">            result[key].push(value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// key第二次出现，将结果改为数组</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> arr = [result[key]];</span><br><span class="line">            arr.push(value);</span><br><span class="line">            result[key] = arr;</span><br><span class="line">        &#125; <span class="comment">// end if-else</span></span><br><span class="line">    &#125; <span class="comment">// end for</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray)&#123;</span><br><span class="line">  	<span class="keyword">return</span> <span class="built_in">Array</span>.isArray(arg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> arg === <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(arg) === <span class="string">'[object Array]'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(parseQuery(<span class="string">'sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8'</span>));</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/15/JS解析query-string/" data-id="ck71asp23000ssr9f27ismpq4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-JS判断是否是函数" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/15/JS判断是否是函数/" class="article-date">
  <time datetime="2017-02-15T03:08:20.000Z" itemprop="datePublished">2017-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/15/JS判断是否是函数/">JS判断是否是函数</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>设计项目中可以使用如下封装或者使用第三方库的实现，比如<a href="https://lodash.com/docs/4.17.4#isFunction" target="_blank" rel="noopener">loadsh</a>,jQuery等isFunction方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFunction</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (arg) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> (<span class="regexp">/./</span>) !== <span class="string">'function'</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">typeof</span> arg === <span class="string">'function'</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(arg) === <span class="string">'[object Function]'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(isFunction(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;));</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/15/JS判断是否是函数/" data-id="ck71asp1u000fsr9fccc9dd0x" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-JS时间监听器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/15/JS时间监听器/" class="article-date">
  <time datetime="2017-02-15T03:05:51.000Z" itemprop="datePublished">2017-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/15/JS时间监听器/">JS时间监听器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>一般都使用jQuery 少数情况会 用到原生，可以考虑使用如下封装<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addListener</span>(<span class="params">el, type, listener, useCapture</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">    el.addEventListener(type, listener, useCapture);</span><br><span class="line">    <span class="keyword">return</span> listener;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent)&#123;</span><br><span class="line">    <span class="comment">// 标准化this，event，target</span></span><br><span class="line">    <span class="keyword">var</span> wrapper = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> event = <span class="built_in">window</span>.event;</span><br><span class="line">      event.target = event.srcElement;</span><br><span class="line">      listener.call(el, event);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    el.attachEvent(<span class="string">'on'</span> + type, wrapper);</span><br><span class="line">    <span class="keyword">return</span> wrapper;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addListener(<span class="built_in">document</span>.getElementById(<span class="string">'test'</span>), <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/15/JS时间监听器/" data-id="ck71asp1y000jsr9fgor302d9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-JS判断是否是数组" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/15/JS判断是否是数组/" class="article-date">
  <time datetime="2017-02-15T02:55:07.000Z" itemprop="datePublished">2017-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/15/JS判断是否是数组/">JS判断是否是数组</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>设计项目中可以使用如下封装或者使用第三方库的实现，比如<a href="https://lodash.com/docs/4.17.4#isArray" target="_blank" rel="noopener">loadsh</a>,jQuery等isArray方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray)&#123;</span><br><span class="line">  	<span class="keyword">return</span> <span class="built_in">Array</span>.isArray(arg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> arg === <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(arg) === <span class="string">'[object Array]'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/15/JS判断是否是数组/" data-id="ck71asp1v000gsr9fncehrkca" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-js-深克隆" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/15/js-深克隆/" class="article-date">
  <time datetime="2017-02-15T02:47:25.000Z" itemprop="datePublished">2017-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/15/js-深克隆/">js 深克隆</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>设计项目中可以使用如下封装或者使用第三方库的实现，比如<a href="https://lodash.com/docs/4.17.4#cloneDeep" target="_blank" rel="noopener">loadsh</a> </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* javascript 深度克隆函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// null, undefined, non-object, function</span></span><br><span class="line">    <span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// DOM Node</span></span><br><span class="line">    <span class="keyword">if</span> (obj.nodeType &amp;&amp; <span class="string">'cloneNode'</span> <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj.cloneNode(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Date</span></span><br><span class="line">    <span class="keyword">if</span> (_toString.call(obj) === <span class="string">'[object Date]'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(obj.getTime());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RegExp</span></span><br><span class="line">    <span class="keyword">if</span> (_toString.call(obj) === <span class="string">'[object RegExp]'</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> flags = [];</span><br><span class="line">        <span class="keyword">if</span> (obj.global) &#123; flags.push(<span class="string">'g'</span>); &#125;</span><br><span class="line">        <span class="keyword">if</span> (obj.multiline) &#123; flags.push(<span class="string">'m'</span>); &#125;</span><br><span class="line">        <span class="keyword">if</span> (obj.ignoreCase) &#123; flags.push(<span class="string">'i'</span>); &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">RegExp</span>(obj.source, flags.join(<span class="string">''</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result = <span class="built_in">Array</span>.isArray(obj) ? [] :</span><br><span class="line">        obj.constructor ? <span class="keyword">new</span> obj.constructor() : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj ) &#123;</span><br><span class="line">        result[key] = deepClone(obj[key]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">    name: <span class="string">'qiu'</span>,</span><br><span class="line">    birth: <span class="keyword">new</span> <span class="built_in">Date</span>(),</span><br><span class="line">    pattern: <span class="regexp">/qiu/gim</span>,</span><br><span class="line">    container: <span class="built_in">document</span>.body,</span><br><span class="line">    hobbys: [<span class="string">'book'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(), /aaa/gim, <span class="number">111</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> A();</span><br><span class="line"><span class="keyword">var</span> b = deepClone(c);</span><br><span class="line"><span class="built_in">console</span>.log(c.a === b.a);</span><br><span class="line"><span class="built_in">console</span>.log(c, b);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/15/js-深克隆/" data-id="ck71asp3n003dsr9fqc1jiqu2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-nodejs-生成md5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/09/nodejs-生成md5/" class="article-date">
  <time datetime="2017-02-09T10:51:52.000Z" itemprop="datePublished">2017-02-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/后端/">后端</a>►<a class="article-category-link" href="/categories/后端/node/">node</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/09/nodejs-生成md5/">nodejs 生成md5</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">'crypto'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md5</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> md5sum = crypto.createHash(<span class="string">'md5'</span>);</span><br><span class="line">    md5sum.update(str);</span><br><span class="line">    str = md5sum.digest(<span class="string">'hex'</span>);</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/02/09/nodejs-生成md5/" data-id="ck71asp4q003ysr9f5d1rg1vk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-前端监控" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/23/前端监控/" class="article-date">
  <time datetime="2017-01-23T02:17:26.000Z" itemprop="datePublished">2017-01-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/监控/">监控</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/23/前端监控/">前端监控</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>一个开源库：<a href="https://github.com/fex-team/alogs" target="_blank" rel="noopener">https://github.com/fex-team/alogs</a></p>
<p>使用图片发送get请求，上报信息，由于浏览器对图片有缓存，同样的请求，图片只会发送一次，避免重复上报。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> entry = &#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">report</span>(<span class="params">url, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!url || !data) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @see http://jsperf.com/new-image-vs-createelement-img</span></span><br><span class="line">    <span class="keyword">var</span> image = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> items = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (data[key]) &#123;</span><br><span class="line">            items.push(key + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[key]));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">'img_'</span> + (+<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">    entry[name] = image;</span><br><span class="line">    image.onload = image.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">        entry[name] =</span><br><span class="line">            image =</span><br><span class="line">            image.onload =</span><br><span class="line">            image.onerror = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">delete</span> entry[name];</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    image.src = url + (url.indexOf(<span class="string">'?'</span>) &lt; <span class="number">0</span> ? <span class="string">'?'</span> : <span class="string">'&amp;'</span>) + items.join(<span class="string">'&amp;'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/01/23/前端监控/" data-id="ck71asp6c006nsr9fcib5xfsr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端上报错误信息/">前端上报错误信息</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-web-安全" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/19/web-安全/" class="article-date">
  <time datetime="2017-01-19T09:43:54.000Z" itemprop="datePublished">2017-01-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实现方案/">实现方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/19/web-安全/">web 安全</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <ol>
<li>用户输入的数据，不要不经过转义直接展示到页面上，防止其中有些js被执行，一般的用户输入的数据，页面渲染的时候都是被转义过得，即，用户输入什么就展示什么，不会被执行，但是特殊情况除外，比如富文本编辑器，对于富文本的内容一定要做好过滤。</li>
<li>防止记录用户登录的cookie被劫持，这个cookie要设置<code>HttpOnly</code></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/01/19/web-安全/" data-id="ck71asp5f004qsr9fjqw86xqo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/安全/">安全</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-android颜色管理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/09/android颜色管理/" class="article-date">
  <time datetime="2017-01-09T06:05:41.000Z" itemprop="datePublished">2017-01-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/09/android颜色管理/">android颜色管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>优秀的app设计，一般只有几种颜色，各个组件的颜色都是统一的，比如统一的字体颜色，统一的背景颜色，统一的border等，如果设计良好，可以基于所有的设计图，整理出android项目所需要color。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主色调 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>#f65037<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主色调深色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>#d34202<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 输入框获得焦点、单复选框选中、按钮激活颜色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"colorAccent"</span>&gt;</span>#ff0000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"white"</span>&gt;</span>#ffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"textColorPrimary"</span>&gt;</span>#eeeeee<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"textColorPrimaryDark"</span>&gt;</span>#666666<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"windowBackground"</span>&gt;</span>#ffffff<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"navigationBarColor"</span>&gt;</span>#000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/01/09/android颜色管理/" data-id="ck71asp2q001xsr9fpsibahtx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/color/">color</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/06/hello-world/" class="article-date">
  <time datetime="2017-01-06T03:44:19.000Z" itemprop="datePublished">2017-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/06/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2017/01/06/hello-world/" data-id="ck71asp39002wsr9ftc19t0wx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



	



  
    <article id="post-nodejs-获取本机ip地址" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/22/nodejs-获取本机ip地址/" class="article-date">
  <time datetime="2016-12-22T06:45:05.000Z" itemprop="datePublished">2016-12-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/后端/">后端</a>►<a class="article-category-link" href="/categories/后端/node/">node</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/22/nodejs-获取本机ip地址/">nodejs 获取本机ip地址</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">exports = <span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> <span class="title">getIPAddress</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> interfaces = <span class="built_in">require</span>(<span class="string">'os'</span>).networkInterfaces();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> devName <span class="keyword">in</span> interfaces) &#123;</span><br><span class="line">        <span class="keyword">var</span> iface = interfaces[devName];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; iface.length; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> alias = iface[i];</span><br><span class="line">            <span class="keyword">if</span> (alias.family === <span class="string">'IPv4'</span> &amp;&amp; alias.address !== <span class="string">'127.0.0.1'</span> &amp;&amp; !alias.internal) &#123;</span><br><span class="line">                <span class="keyword">return</span> alias.address;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/12/22/nodejs-获取本机ip地址/" data-id="ck71asp4h003vsr9fl7vwli5z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-前端开发需要注意的一些问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/28/前端开发需要注意的一些问题/" class="article-date">
  <time datetime="2016-11-28T09:08:34.000Z" itemprop="datePublished">2016-11-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/28/前端开发需要注意的一些问题/">前端开发需要注意的一些问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="高保真还原设计图"><a href="#高保真还原设计图" class="headerlink" title="高保真还原设计图"></a>高保真还原设计图</h2><ol>
<li>开发之前要对设计图进行开发角度的分析，有疑问及时跟设计沟通解决；多注意一些空白页，异常数据情况，是否有相应的设计图。</li>
<li>开发过程中，要严格按照设计图进行编码，高保真还原设计图；</li>
<li>开发完成之后，让设计确认实现结果，发现问题，及时解决。</li>
<li>要根据自己的开发经验，确定设计是否合理，扁平化的图标，是否建议设计使用font-icon</li>
</ol>
<h2 id="高保真还原产品需求"><a href="#高保真还原产品需求" class="headerlink" title="高保真还原产品需求"></a>高保真还原产品需求</h2><ol>
<li>开发之前认真参加需求评审，站在前端的角度考虑需求的合理性，有问题及时提出；</li>
<li>开发过程中发现需求的细节问题，及时跟产品沟通解决；</li>
<li>开发完成之后，要对照产品原型，自测自己开发的功能是否百分百符合需求。</li>
</ol>
<h2 id="空白页"><a href="#空白页" class="headerlink" title="空白页"></a>空白页</h2><p>尤其是列表页，在没有内容时，要显示类似“暂无数据”这样的提示，开发过程中要注意这一细节，如果没有设计，要跟设计沟通，让设计提供相关页面；如果没有文案，要跟产品确认提示文案。</p>
<h2 id="按钮交互样式"><a href="#按钮交互样式" class="headerlink" title="按钮交互样式"></a>按钮交互样式</h2><p>这个属于用户体验方面的细节，用户进行了任何操作，界面上要给予及时的反馈，让用户知道，他进行了什么样的操作。发送请求时，按钮置为disabled（或者loading），防止重复发请求。</p>
<p>pc端：</p>
<ol>
<li>鼠标移入移出按钮，要有交互反馈，可以通过<code>:hover</code>实现。</li>
<li>鼠标点击返回，可以通过<code>:active</code>实现。</li>
</ol>
<p>移动端：</p>
<ol>
<li>点击按钮：可以通过<code>:active</code>实现。</li>
</ol>
<h2 id="文字过长如何显示"><a href="#文字过长如何显示" class="headerlink" title="文字过长如何显示"></a>文字过长如何显示</h2><p>设计有时会按照理想状况出设计图，但是如果文字过长如何显示，是直接截断？还是显示省略号？可以跟设计、产品沟通确认</p>
<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><ol>
<li>图片在保证清晰度的情况下，尽量压缩，移动端不同屏幕考虑提供2x 3x等规格的图片</li>
<li>图片裁剪，拼接@200_w（阿里的oss），要根据实际的场景，合理拼接参数</li>
<li>图片是否需要懒加载</li>
<li>图片加载loading站位图</li>
<li>图片加载失败站位图</li>
</ol>
<h2 id="title和页面icon"><a href="#title和页面icon" class="headerlink" title="title和页面icon"></a>title和页面icon</h2><p><code>&lt;title&gt;Title&lt;/title&gt;</code> <code>&lt;link rel=&quot;icon&quot;&gt;</code>之前都是写死的开发的时候需要注意下。跨平台的时候是统一还是显示平台或者商户的title和icon需要和产品沟通一下。</p>
<h2 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h2><ol>
<li>适当显示loading</li>
<li>发起请求时，对应按钮disabled（或者loading），防止重复请求  </li>
<li>请求失败，错误提示</li>
</ol>
<h2 id="项目发布之前"><a href="#项目发布之前" class="headerlink" title="项目发布之前"></a>项目发布之前</h2><ol>
<li>多余的调试（console.log、alert）代码是否已删除（尤其是alert）。检查方法：可以全局搜索一下，发现调试代码，及时删除</li>
<li>安装第三方包是否同时修改了package.json（—save，—save-dev参数未加引起的）。检查方法：将本地的node_moduls文件夹删除，重新npm install 启动项目，查看是否缺包。</li>
<li>生产环境的构建配置是否正确。检查方法：一般测试环境和线上环境使用的配置相同，测试环境没问题，一般问题不大；还可以本地模拟正式环境，进行一次构建。</li>
<li>微信调试是否关闭。检查方法：wx.config中的debug是否为false</li>
<li>第三方库的调试是否关闭。检查方法：以vue为例，在webpack配置中，设置new webpack.DefinePlugin({‘process.env’: ‘production’}),可以去掉调试信息，有的库是提供全局方法，具体情况具体分析。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/11/28/前端开发需要注意的一些问题/" data-id="ck71asp69006gsr9feknwcvje" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



	



  
    <article id="post-1px边框实现" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/22/1px边框实现/" class="article-date">
  <time datetime="2016-11-22T14:00:19.000Z" itemprop="datePublished">2016-11-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/CSS/">CSS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/22/1px边框实现/">1px边框实现</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>iphone手机，设置border:1px solid #000,实际显示要比一像素要宽，具体原因请自己Google，<br>通过transform: scale(0.5)可以实现1像素border，具体封装如下：<br>注意：</p>
<ul>
<li>要显示border的元素需要设置：position:relative或者position:absolute;</li>
<li>同时只能设置一个top或者bottom（一个left或者right）<br>因为top和left是使用：after，left和right使用的是before；</li>
<li>这种方式无法设置border-radius;<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@borderDefaultWidth:</span> <span class="number">1px</span>;</span><br><span class="line"><span class="variable">@borderDefaultColor:</span> <span class="number">#e8e8e8</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.border-top</span>(<span class="variable">@width</span>: <span class="variable">@borderDefaultWidth</span>, <span class="variable">@color</span>: <span class="variable">@borderDefaultColor</span>) &#123;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="selector-class">.border-top-bottom-style</span>(<span class="variable">@width</span>, <span class="variable">@color</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.media</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.border-bottom</span>(<span class="variable">@width</span>: <span class="variable">@borderDefaultWidth</span>, <span class="variable">@color</span>: <span class="variable">@borderDefaultColor</span>) &#123;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="selector-class">.border-top-bottom-style</span>(<span class="variable">@width</span>, <span class="variable">@color</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.media</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.border-right</span>(<span class="variable">@width</span>: <span class="variable">@borderDefaultWidth</span>, <span class="variable">@color</span>: <span class="variable">@borderDefaultColor</span>) &#123;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="selector-class">.border-left-right-style</span>(<span class="variable">@width</span>, <span class="variable">@color</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.media</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.border-left</span>(<span class="variable">@width</span>: <span class="variable">@borderDefaultWidth</span>, <span class="variable">@color</span>: <span class="variable">@borderDefaultColor</span>) &#123;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="selector-class">.border-left-right-style</span>(<span class="variable">@width</span>, <span class="variable">@color</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.media</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.border-top-bottom-style</span>(<span class="variable">@width</span>, <span class="variable">@color</span>) &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"\20"</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">-webkit-transform-origin</span>: <span class="number">50%</span> <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="variable">@width</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.border-left-right-style</span>(<span class="variable">@width</span>, <span class="variable">@color</span>) &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"\20"</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">-webkit-transform-origin</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@width</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.media</span>() &#123;</span><br><span class="line">  <span class="keyword">@media</span> only screen and (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">      <span class="attribute">-webkit-transform</span>: scaleY(<span class="number">0.5</span>);</span><br><span class="line">      <span class="attribute">transform</span>: scaleY(<span class="number">0.5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@media</span> only screen and (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">      <span class="attribute">-webkit-transform</span>: scaleY(<span class="number">0.33333</span>);</span><br><span class="line">      <span class="attribute">transform</span>: scaleY(<span class="number">0.33333</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@media</span> only screen and (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">      <span class="attribute">-webkit-transform</span>: scaleY(<span class="number">0.25</span>);</span><br><span class="line">      <span class="attribute">transform</span>: scaleY(<span class="number">0.25</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>使用方法：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">'../path-to/mixins.less'</span>;</span><br><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: relative;</span><br><span class="line">  <span class="selector-class">.border-top</span>();</span><br><span class="line">  <span class="selector-class">.border-left</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/11/22/1px边框实现/" data-id="ck71asp180000sr9f1dsgv2yx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-js滚动动画" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/17/js滚动动画/" class="article-date">
  <time datetime="2016-11-17T09:10:27.000Z" itemprop="datePublished">2016-11-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/17/js滚动动画/">js滚动动画</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>js原生函数，滚动动画<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 滚动动画函数</span></span><br><span class="line"><span class="comment"> * @param el 元素对象或者元素id</span></span><br><span class="line"><span class="comment"> * @param targetPosition 滚动条目标位置</span></span><br><span class="line"><span class="comment"> * @param duringTime 持续时间 默认300</span></span><br><span class="line"><span class="comment"> * @param onComplete 滚动完成触发</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">scrollAnimate</span>(<span class="params">&#123;el, targetPosition, duringTime = <span class="number">300</span>, onComplete&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> el === <span class="string">'string'</span>) &#123;</span><br><span class="line">        el = <span class="built_in">document</span>.getElementById(el);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!targetPosition) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> startTime = (<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> nowTime = (<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime();</span><br><span class="line">        <span class="keyword">const</span> elapsed = nowTime - startTime;</span><br><span class="line">        <span class="keyword">const</span> fraction = elapsed / duringTime;</span><br><span class="line">        <span class="keyword">const</span> position = targetPosition - el.scrollTop;</span><br><span class="line">        <span class="keyword">if</span> (fraction &lt; <span class="number">1</span>) &#123;</span><br><span class="line">            el.scrollTop += fraction * position * <span class="built_in">Math</span>.sin(<span class="built_in">Math</span>.PI / <span class="number">2</span>);</span><br><span class="line">            setTimeout(animate, <span class="built_in">Math</span>.min(<span class="number">25</span>, duringTime - elapsed));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            el.scrollTop = targetPosition;</span><br><span class="line">            <span class="keyword">if</span> (onComplete) &#123;</span><br><span class="line">                onComplete();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    animate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/11/17/js滚动动画/" data-id="ck71asp3t003osr9f49b0lv9t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-金钱格式化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/02/金钱格式化/" class="article-date">
  <time datetime="2016-11-02T14:20:56.000Z" itemprop="datePublished">2016-11-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/02/金钱格式化/">金钱格式化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>开发过程中经常能遇到对金钱格式化的需求，这里整理一个方法</p>
<p>es5 版本<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将数值四舍五入后格式化成金额形式</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param num 数值(Number或者String)</span></span><br><span class="line"><span class="comment"> * @param options.prefix 金钱前缀，默认为空，一般为 ￥ 或 $</span></span><br><span class="line"><span class="comment"> * @param options.decimalNum 保留小数点个数，默认为2 一般为 0 1 2</span></span><br><span class="line"><span class="comment"> * @param options.splitSymbol 格式化分割符，默认为英文逗号，分隔符必须是单字符</span></span><br><span class="line"><span class="comment"> * @return 金额格式的字符串,如'￥1,234,567.45'</span></span><br><span class="line"><span class="comment"> * @type String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatCurrency</span>(<span class="params">num, options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (options === <span class="literal">undefined</span>) options = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> prefix = options.prefix || <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">var</span> decimalNum = options.decimalNum;</span><br><span class="line">    <span class="keyword">var</span> splitSymbol = options.splitSymbol;</span><br><span class="line">    <span class="keyword">var</span> centsPercent = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span> (splitSymbol === <span class="literal">undefined</span>) splitSymbol = <span class="string">','</span>;</span><br><span class="line">    <span class="keyword">if</span> (decimalNum !== <span class="number">0</span> &amp;&amp; decimalNum !== <span class="number">1</span> &amp;&amp; decimalNum !== <span class="number">2</span>) decimalNum = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (decimalNum === <span class="number">0</span>) &#123;</span><br><span class="line">        centsPercent = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (decimalNum === <span class="number">1</span>) &#123;</span><br><span class="line">        centsPercent = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    num = num.toString().replace(<span class="regexp">/\$|\,/g</span>, <span class="string">''</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(num)) num = <span class="string">"0"</span>;</span><br><span class="line">    <span class="keyword">var</span> sign = (num == (num = <span class="built_in">Math</span>.abs(num))) ? <span class="string">''</span> : <span class="string">'-'</span>;</span><br><span class="line">    num = <span class="built_in">Math</span>.floor(num * centsPercent + <span class="number">0.50000000001</span>);</span><br><span class="line">    <span class="keyword">var</span> cents = num % centsPercent;</span><br><span class="line">    num = <span class="built_in">Math</span>.floor(num / centsPercent).toString();</span><br><span class="line">    <span class="keyword">if</span> (cents &lt; <span class="number">10</span> &amp;&amp; decimalNum === <span class="number">2</span>) &#123;</span><br><span class="line">        cents = <span class="string">"0"</span> + cents;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">Math</span>.floor((num.length - (<span class="number">1</span> + i)) / <span class="number">3</span>); i++) &#123;</span><br><span class="line">        num = num.substring(<span class="number">0</span>, num.length - (<span class="number">4</span> * i + <span class="number">3</span>)) + splitSymbol + num.substring(num.length - (<span class="number">4</span> * i + <span class="number">3</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (decimalNum === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> prefix + sign + num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> prefix + sign + num + <span class="string">'.'</span> + cents;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(formatCurrency(<span class="number">9090900.55533</span>));</span><br><span class="line"><span class="comment">// output: 9,090,900.56</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(formatCurrency(<span class="number">9090900.55533</span>, &#123;</span><br><span class="line">    prefix: <span class="string">'￥'</span>,</span><br><span class="line">    decimalNum: <span class="number">2</span>,</span><br><span class="line">    splitSymbol: <span class="string">','</span></span><br><span class="line">&#125;));</span><br><span class="line"><span class="comment">// output: ￥9,090,900.56</span></span><br></pre></td></tr></table></figure></p>
<p>es6 版本<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将数值四舍五入后格式化成金额形式</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param num 数值(Number或者String)</span></span><br><span class="line"><span class="comment"> * @param options 可选参数</span></span><br><span class="line"><span class="comment"> * @param options.prefix 金钱前缀，默认为空，一般为 ￥ 或 $</span></span><br><span class="line"><span class="comment"> * @param options.decimalNum 保留小数点个数，默认为2 一般为 0 1 2</span></span><br><span class="line"><span class="comment"> * @param options.splitSymbol 格式化分割符，默认为英文逗号，分隔符必须是单字符</span></span><br><span class="line"><span class="comment"> * @return 金额格式的字符串,如'￥1,234,567.45'</span></span><br><span class="line"><span class="comment"> * @type String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatCurrency</span>(<span class="params">num, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;decimalNum, splitSymbol&#125; = options;</span><br><span class="line">    <span class="keyword">const</span> &#123;prefix = <span class="string">''</span>&#125; = options;</span><br><span class="line">    <span class="keyword">let</span> centsPercent = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (splitSymbol === <span class="literal">undefined</span>) splitSymbol = <span class="string">','</span>;</span><br><span class="line">    <span class="keyword">if</span> (decimalNum !== <span class="number">0</span> &amp;&amp; decimalNum !== <span class="number">1</span> &amp;&amp; decimalNum !== <span class="number">2</span>) decimalNum = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (decimalNum === <span class="number">0</span>) centsPercent = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (decimalNum === <span class="number">1</span>) centsPercent = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    num = num.toString().replace(<span class="regexp">/\$|,/g</span>, <span class="string">''</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(num)) num = <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">const</span> sign = (num === <span class="built_in">Math</span>.abs(num).toString()) ? <span class="string">''</span> : <span class="string">'-'</span>;</span><br><span class="line">    num = <span class="built_in">Math</span>.abs(num);</span><br><span class="line">    num = <span class="built_in">Math</span>.floor((num * centsPercent) + <span class="number">0.50000000001</span>);</span><br><span class="line">    <span class="keyword">let</span> cents = num % centsPercent;</span><br><span class="line">    num = <span class="built_in">Math</span>.floor(num / centsPercent).toString();</span><br><span class="line">    <span class="keyword">if</span> (cents &lt; <span class="number">10</span> &amp;&amp; decimalNum === <span class="number">2</span>) &#123;</span><br><span class="line">        cents = <span class="string">`0<span class="subst">$&#123;cents&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">Math</span>.floor((num.length - (<span class="number">1</span> + i)) / <span class="number">3</span>); i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> endPosition = (<span class="number">4</span> * i) + <span class="number">3</span>;</span><br><span class="line">        num = num.substring(<span class="number">0</span>, num.length - endPosition)</span><br><span class="line">            + splitSymbol + num.substring(num.length - endPosition);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (decimalNum === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> prefix + sign + num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;prefix&#125;</span><span class="subst">$&#123;sign&#125;</span><span class="subst">$&#123;num&#125;</span>.<span class="subst">$&#123;cents&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/11/02/金钱格式化/" data-id="ck71asp7x00bcsr9fm2gpalng" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-js判断对象是否为空" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/09/js判断对象是否为空/" class="article-date">
  <time datetime="2016-10-09T03:37:10.000Z" itemprop="datePublished">2016-10-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/09/js判断对象是否为空/">js判断对象是否为空</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>一个工具方法，判断对象是否没有任何属性，即：{}，代码摘取自<a href="http://api.jquery.com/jQuery.isEmptyObject/" target="_blank" rel="noopener">jQuery.isEmptyObject()</a></p>
<pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">isEmptyObject</span>(<span class="params"> obj </span>) </span>{
    <span class="keyword">var</span> name;
    <span class="keyword">for</span> ( name <span class="keyword">in</span> obj ) {
        <span class="keyword">return</span> <span class="literal">false</span>;
    }
    <span class="keyword">return</span> <span class="literal">true</span>;
}
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/10/09/js判断对象是否为空/" data-id="ck71asp3p003gsr9fw2dgs55r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-Karma-使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/23/Karma-使用/" class="article-date">
  <time datetime="2016-09-23T09:06:25.000Z" itemprop="datePublished">2016-09-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/23/Karma-使用/">Karma 使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="为什么使用Karma"><a href="#为什么使用Karma" class="headerlink" title="为什么使用Karma"></a>为什么使用Karma</h2><ul>
<li>真实浏览器</li>
<li>多浏览器</li>
<li>开发过程中本地运行</li>
<li>持续集成服务器中运行</li>
<li>每次保存自动运行</li>
<li>终端运行</li>
<li>生成测试报告</li>
<li>模块化，es6支持</li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm install karma --save-dev</span><br><span class="line"></span><br><span class="line">// 可以全局使用karma命令</span><br><span class="line">$ sudo npm install -g karma-cli</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/09/23/Karma-使用/" data-id="ck71asp25000xsr9f7dftk7hk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/测试/">测试</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-JS-正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/20/JS-正则表达式/" class="article-date">
  <time datetime="2016-09-20T10:21:15.000Z" itemprop="datePublished">2016-09-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/20/JS-正则表达式/">JS 正则表达式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="JavaScript-权威指南第6版摘录一些表格"><a href="#JavaScript-权威指南第6版摘录一些表格" class="headerlink" title="JavaScript 权威指南第6版摘录一些表格"></a>JavaScript 权威指南第6版摘录一些表格</h2><p><img src="正则表达式中的直接量字符.png" alt="正则表达式中的直接量字符.png"><br><img src="正则表达式的字符类.png" alt="正则表达式的字符类.png"><br><img src="正则表达式的重复字符语法.png" alt="正则表达式的重复字符语法.png"><br><img src="正则表达式的选择、分组和引用字符.png" alt="正则表达式的选择、分组和引用字符.png"><br><img src="正则表达式中的锚字符.png" alt="正则表达式中的锚字符.png"><br><img src="正则表达式修饰符.png" alt="正则表达式修饰符.png"></p>
<h2 id="字符串可以使用正则的四个方法"><a href="#字符串可以使用正则的四个方法" class="headerlink" title="字符串可以使用正则的四个方法"></a>字符串可以使用正则的四个方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'abc'</span>.search(<span class="regexp">/abc/</span>);</span><br><span class="line"><span class="string">'abc'</span>.match(<span class="regexp">/abc/</span>);</span><br><span class="line"><span class="string">'abc'</span>.split(<span class="regexp">/b/</span>);</span><br><span class="line"><span class="string">'abc'</span>.replace(<span class="regexp">/abc/</span>, <span class="string">'def'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="正则对象RegExp属性和方法"><a href="#正则对象RegExp属性和方法" class="headerlink" title="正则对象RegExp属性和方法"></a>正则对象RegExp属性和方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 五个属性</span></span><br><span class="line"><span class="comment">// source global ignoreCase multiLine lastIndex</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个方法</span></span><br><span class="line"><span class="comment">// test</span></span><br><span class="line"><span class="comment">// exec</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/Java/g</span>;</span><br><span class="line"><span class="keyword">var</span> text = <span class="string">'JavaScript is more fun than Java!'</span>;</span><br><span class="line"><span class="keyword">var</span> result;</span><br><span class="line"><span class="keyword">while</span>((result = pattern.exec(text)) !== <span class="literal">null</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Matched '"</span> + result[<span class="number">0</span>] + <span class="string">"'"</span> + <span class="string">" at Position "</span> + result.index + <span class="string">"; next search begins at "</span> + pattern.lastIndex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/09/20/JS-正则表达式/" data-id="ck71asp1p000asr9fo56felx2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-React-PropTypes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/18/React-PropTypes/" class="article-date">
  <time datetime="2016-09-18T11:34:38.000Z" itemprop="datePublished">2016-09-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/18/React-PropTypes/">React PropTypes</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>良好的组件，要定义好propTypes</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> propTypes =  &#123;</span><br><span class="line">   <span class="comment">// 可以声明 prop 为指定的 JS 基本类型。默认</span></span><br><span class="line">   <span class="comment">// 情况下，这些 prop 都是可传可不传的。</span></span><br><span class="line">   optionalArray: React.PropTypes.array,</span><br><span class="line">   optionalBool: React.PropTypes.bool,</span><br><span class="line">   optionalFunc: React.PropTypes.func,</span><br><span class="line">   optionalNumber: React.PropTypes.number,</span><br><span class="line">   optionalObject: React.PropTypes.object,</span><br><span class="line">   optionalString: React.PropTypes.string,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 所有可以被渲染的对象：数字，</span></span><br><span class="line">   <span class="comment">// 字符串，DOM 元素或包含这些类型的数组。</span></span><br><span class="line">   optionalNode: React.PropTypes.node,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// React 元素</span></span><br><span class="line">   optionalElement: React.PropTypes.element,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 用 JS 的 instanceof 操作符声明 prop 为类的实例。</span></span><br><span class="line">   optionalMessage: React.PropTypes.instanceOf(Message),</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 用 enum 来限制 prop 只接受指定的值。</span></span><br><span class="line">   optionalEnum: React.PropTypes.oneOf([<span class="string">'News'</span>, <span class="string">'Photos'</span>]),</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 指定的多个对象类型中的一个</span></span><br><span class="line">   optionalUnion: React.PropTypes.oneOfType([</span><br><span class="line">     React.PropTypes.string,</span><br><span class="line">     React.PropTypes.number,</span><br><span class="line">     React.PropTypes.instanceOf(Message)</span><br><span class="line">   ]),</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 指定类型组成的数组</span></span><br><span class="line">   optionalArrayOf: React.PropTypes.arrayOf(React.PropTypes.number),</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 指定类型的属性构成的对象</span></span><br><span class="line">   optionalObjectOf: React.PropTypes.objectOf(React.PropTypes.number),</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 特定形状参数的对象</span></span><br><span class="line">   optionalObjectWithShape: React.PropTypes.shape(&#123;</span><br><span class="line">     color: React.PropTypes.string,</span><br><span class="line">     fontSize: React.PropTypes.number</span><br><span class="line">   &#125;),</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 以后任意类型加上 `isRequired` 来使 prop 不可空。</span></span><br><span class="line">   requiredFunc: React.PropTypes.func.isRequired,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 不可空的任意类型</span></span><br><span class="line">   requiredAny: React.PropTypes.any.isRequired,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 自定义验证器。如果验证失败需要返回一个 Error 对象。不要直接</span></span><br><span class="line">   <span class="comment">// 使用 `console.warn` 或抛异常，因为这样 `oneOfType` 会失效。</span></span><br><span class="line">   customProp: <span class="function"><span class="keyword">function</span>(<span class="params">props, propName, componentName</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (!<span class="regexp">/matchme/</span>.test(props[propName])) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Validation failed!'</span>);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/09/18/React-PropTypes/" data-id="ck71asp2f001gsr9f34jwh802" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-基于rem的html-font-size-写法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/05/基于rem的html-font-size-写法/" class="article-date">
  <time datetime="2016-09-05T03:30:01.000Z" itemprop="datePublished">2016-09-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/CSS/">CSS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/05/基于rem的html-font-size-写法/">基于rem的html font-size 写法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>rem是相对于html的font-size的大小单位，在做移动端，不同屏幕下自适应很好用，下面是基于不同分辨率，生成html font-size大小的代码</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 375屏幕为 20px，以此为基础计算出每一种宽度的字体大小</span></span><br><span class="line"><span class="comment"> * 375以下不变，375以上等比放大</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="variable">@baseWidth:</span> <span class="number">375px</span>;</span><br><span class="line"><span class="variable">@baseFont:</span> <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="variable">@baseFont</span>;  <span class="comment">//默认当做320px宽度的屏幕来处理</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">@bps:</span> <span class="number">400px</span>, <span class="number">414px</span>, <span class="number">480px</span>; <span class="comment">// 支持其他分辨率，在这里追加即可</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loop</span>(<span class="variable">@i</span>: <span class="number">1</span>) <span class="keyword">when</span> (<span class="variable">@i</span> &lt;= length(<span class="variable">@bps</span>)) &#123;  <span class="comment">//注意less数组是从1开始的</span></span><br><span class="line">  <span class="variable">@bp:</span> extract(<span class="variable">@bps</span>, <span class="variable">@i</span>);</span><br><span class="line">  <span class="variable">@font:</span> <span class="variable">@bp</span>/<span class="variable">@baseWidth</span>*<span class="variable">@baseFont</span>;  </span><br><span class="line">  <span class="keyword">@media</span> only screen and (<span class="attribute">min-width</span>: <span class="variable">@bp</span>)&#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="variable">@font</span> <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.loop</span>((<span class="variable">@i</span> + <span class="number">1</span>));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="selector-class">.loop</span>;</span><br></pre></td></tr></table></figure>
<p>转换成css为：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> only screen and (min-width: <span class="number">400px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">21.33333333px</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> only screen and (min-width: <span class="number">414px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">22.08px</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> only screen and (min-width: <span class="number">480px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">25.6px</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注：less 转换方法 <code>sudo npm install less -g</code> <code>lessc styles.less</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/09/05/基于rem的html-font-size-写法/" data-id="ck71asp6e006qsr9fb1egg9oj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-js一些工具方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/05/js一些工具方法/" class="article-date">
  <time datetime="2016-09-05T02:03:44.000Z" itemprop="datePublished">2016-09-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/05/js一些工具方法/">js一些工具方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>平时用到的一些小方法，整理起来备用</p>
<h2 id="数组乱序"><a href="#数组乱序" class="headerlink" title="数组乱序"></a>数组乱序</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.5</span> - <span class="built_in">Math</span>.random();</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure>
<h2 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取 min～max之间的一个随机整数</span></span><br><span class="line"><span class="comment"> * @param min</span></span><br><span class="line"><span class="comment"> * @param max</span></span><br><span class="line"><span class="comment"> * @returns &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandomNum</span>(<span class="params">min, max</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> range = max - min;</span><br><span class="line">    <span class="keyword">var</span> rand = <span class="built_in">Math</span>.random();</span><br><span class="line">    <span class="keyword">return</span> (min + <span class="built_in">Math</span>.round(rand * range));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="日期格式化扩展"><a href="#日期格式化扩展" class="headerlink" title="日期格式化扩展"></a>日期格式化扩展</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es6版本</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 日期格式化函数</span></span><br><span class="line"><span class="comment"> * 年：y，1-4个占位符</span></span><br><span class="line"><span class="comment"> * 月：M，日：d，时：h，分：m，秒：s，季度：q， 1-2 个占位符</span></span><br><span class="line"><span class="comment"> * 毫秒：S，1个占位符</span></span><br><span class="line"><span class="comment"> * 例：</span></span><br><span class="line"><span class="comment"> * (new Date()).format('yyyy-MM-dd hh:mm:ss.S') ---&gt; 2016-09-05 10:18:32.976</span></span><br><span class="line"><span class="comment"> * (new Date()).format('yyyy-M-d h:m:s.S')      ---&gt; 2016-9-5 10:18:32.976</span></span><br><span class="line"><span class="comment"> * @param date</span></span><br><span class="line"><span class="comment"> * @param format</span></span><br><span class="line"><span class="comment"> * @returns &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatDate</span>(<span class="params">date, format = <span class="string">'yyyy-MM-dd'</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> symbolMap = &#123;</span><br><span class="line">        <span class="string">'M+'</span>: date.getMonth() + <span class="number">1</span>, <span class="comment">// 月</span></span><br><span class="line">        <span class="string">'d+'</span>: date.getDate(), <span class="comment">// 日</span></span><br><span class="line">        <span class="string">'h+'</span>: date.getHours(), <span class="comment">// 时</span></span><br><span class="line">        <span class="string">'m+'</span>: date.getMinutes(), <span class="comment">// 分</span></span><br><span class="line">        <span class="string">'s+'</span>: date.getSeconds(), <span class="comment">// 秒</span></span><br><span class="line">        <span class="string">'q+'</span>: <span class="built_in">Math</span>.floor((date.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">// 季度</span></span><br><span class="line">        S: date.getMilliseconds(), <span class="comment">// 毫秒</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(format)) &#123;</span><br><span class="line">        format = format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, <span class="built_in">String</span>(date.getFullYear()).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> k <span class="keyword">of</span> <span class="built_in">Object</span>.keys(symbolMap)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">`(<span class="subst">$&#123;k&#125;</span>)`</span>).test(format)) &#123;</span><br><span class="line">            format = format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length === <span class="number">1</span>) ? (symbolMap[k]) : (<span class="string">`00<span class="subst">$&#123;symbolMap[k]&#125;</span>`</span>.substr(<span class="built_in">String</span>(symbolMap[k]).length)));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> format;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es5版本</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 日期格式化函数</span></span><br><span class="line"><span class="comment"> * 年：y，1-4个占位符</span></span><br><span class="line"><span class="comment"> * 月：M，日：d，时：h，分：m，秒：s，季度：q， 1-2 个占位符</span></span><br><span class="line"><span class="comment"> * 毫秒：S，1个占位符</span></span><br><span class="line"><span class="comment"> * 例：</span></span><br><span class="line"><span class="comment"> * (new Date()).format('yyyy-MM-dd hh:mm:ss.S') ---&gt; 2016-09-05 10:18:32.976</span></span><br><span class="line"><span class="comment"> * (new Date()).format('yyyy-M-d h:m:s.S')      ---&gt; 2016-9-5 10:18:32.976</span></span><br><span class="line"><span class="comment"> * @param date</span></span><br><span class="line"><span class="comment"> * @param format</span></span><br><span class="line"><span class="comment"> * @returns &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dateFormat</span>(<span class="params">date, format</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> symbolMap = &#123;</span><br><span class="line">        <span class="string">"M+"</span>: date.getMonth() + <span class="number">1</span>, <span class="comment">//月</span></span><br><span class="line">        <span class="string">"d+"</span>: date.getDate(), <span class="comment">//日</span></span><br><span class="line">        <span class="string">"h+"</span>: date.getHours(), <span class="comment">//时</span></span><br><span class="line">        <span class="string">"m+"</span>: date.getMinutes(), <span class="comment">//分</span></span><br><span class="line">        <span class="string">"s+"</span>: date.getSeconds(), <span class="comment">//秒</span></span><br><span class="line">        <span class="string">"q+"</span>: <span class="built_in">Math</span>.floor((date.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//季度</span></span><br><span class="line">        <span class="string">"S"</span>: date.getMilliseconds() <span class="comment">//毫秒</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(format)) &#123;</span><br><span class="line">        format = format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (date.getFullYear() + <span class="string">""</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> symbolMap) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"("</span> + k + <span class="string">")"</span>).test(format)) &#123;</span><br><span class="line">            format = format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length == <span class="number">1</span>) ? (symbolMap[k]) : ((<span class="string">"00"</span> + symbolMap[k]).substr((<span class="string">""</span> + symbolMap[k]).length)));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> format;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 扩展Date，添加格式化功能</span></span><br><span class="line"><span class="comment"> * 年：y，1-4个占位符</span></span><br><span class="line"><span class="comment"> * 月：M，日：d，时：h，分：m，秒：s，季度：q， 1-2 个占位符</span></span><br><span class="line"><span class="comment"> * 毫秒：S，1个占位符</span></span><br><span class="line"><span class="comment"> * 例：</span></span><br><span class="line"><span class="comment"> * (new Date()).format('yyyy-MM-dd hh:mm:ss.S') ---&gt; 2016-09-05 10:18:32.976</span></span><br><span class="line"><span class="comment"> * (new Date()).format('yyyy-M-d h:m:s.S')      ---&gt; 2016-9-5 10:18:32.976</span></span><br><span class="line"><span class="comment"> * @param format</span></span><br><span class="line"><span class="comment"> * @returns &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span> (<span class="params">format</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> symbolMap = &#123;</span><br><span class="line">        <span class="string">"M+"</span>: <span class="keyword">this</span>.getMonth() + <span class="number">1</span>, <span class="comment">//月</span></span><br><span class="line">        <span class="string">"d+"</span>: <span class="keyword">this</span>.getDate(), <span class="comment">//日</span></span><br><span class="line">        <span class="string">"h+"</span>: <span class="keyword">this</span>.getHours(), <span class="comment">//时</span></span><br><span class="line">        <span class="string">"m+"</span>: <span class="keyword">this</span>.getMinutes(), <span class="comment">//分</span></span><br><span class="line">        <span class="string">"s+"</span>: <span class="keyword">this</span>.getSeconds(), <span class="comment">//秒</span></span><br><span class="line">        <span class="string">"q+"</span>: <span class="built_in">Math</span>.floor((<span class="keyword">this</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//季度</span></span><br><span class="line">        <span class="string">"S"</span>: <span class="keyword">this</span>.getMilliseconds() <span class="comment">//毫秒</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(format)) &#123;</span><br><span class="line">        format = format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="keyword">this</span>.getFullYear() + <span class="string">""</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> symbolMap) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"("</span> + k + <span class="string">")"</span>).test(format)) &#123;</span><br><span class="line">            format = format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length == <span class="number">1</span>) ? (symbolMap[k]) : ((<span class="string">"00"</span> + symbolMap[k]).substr((<span class="string">""</span> + symbolMap[k]).length)));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> format;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="根据给定时间，获取给定时间当前周，前一周，后一周的所有日期"><a href="#根据给定时间，获取给定时间当前周，前一周，后一周的所有日期" class="headerlink" title="根据给定时间，获取给定时间当前周，前一周，后一周的所有日期"></a>根据给定时间，获取给定时间当前周，前一周，后一周的所有日期</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据给定时间，获取给定时间当前周，前一周，后一周的所有日期</span></span><br><span class="line"><span class="comment"> * @param date</span></span><br><span class="line"><span class="comment"> * @returns &#123;&#123;activeDates: Array, prevDates: Array, nextDates: Array&#125;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWeekDateRange</span>(<span class="params">date</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> activeDates = [];</span><br><span class="line">    <span class="keyword">var</span> prevDates = [];</span><br><span class="line">    <span class="keyword">var</span> nextDates = [];</span><br><span class="line">    <span class="keyword">var</span> nowTime = date.getTime();</span><br><span class="line">    <span class="keyword">var</span> day = date.getDay();</span><br><span class="line">    <span class="keyword">var</span> oneDayLong = <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">-7</span>; i &lt; <span class="number">14</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> dateTiem = nowTime + (i - day) * oneDayLong;</span><br><span class="line">        <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(dateTiem);</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            prevDates.push(d);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i &lt; <span class="number">7</span>) &#123;</span><br><span class="line">            activeDates.push(d);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nextDates.push(d);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        activeDates: activeDates,</span><br><span class="line">        prevDates: prevDates,</span><br><span class="line">        nextDates: nextDates,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="去除字符串前后，左侧，右侧空格"><a href="#去除字符串前后，左侧，右侧空格" class="headerlink" title="去除字符串前后，左侧，右侧空格"></a>去除字符串前后，左侧，右侧空格</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> testStr = <span class="string">'   aaa bbb   '</span>;</span><br><span class="line"><span class="comment">// 去掉前后空格</span></span><br><span class="line"><span class="keyword">var</span> str = testStr.replace(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去掉左侧空格</span></span><br><span class="line"><span class="keyword">var</span> str = testStr.replace(<span class="regexp">/(^\s*)/g</span>, <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去掉右侧空格</span></span><br><span class="line"><span class="keyword">var</span> str = testStr.replace(<span class="regexp">/(\s*$)/g</span>, <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 扩展string对象</span></span><br><span class="line"><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">""</span>);  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span>.prototype.leftTrim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/(^\s*)/g</span>, <span class="string">""</span>);  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span>.prototype.rightTrim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/(\s*$)/g</span>, <span class="string">""</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="格式化电话号码"><a href="#格式化电话号码" class="headerlink" title="格式化电话号码"></a>格式化电话号码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatPhoneNumber</span> (<span class="params">phoneNum</span>) </span>&#123;</span><br><span class="line">  phoneNum = phoneNum.toString();</span><br><span class="line">  <span class="keyword">var</span> regFormatted = <span class="regexp">/^(\d&#123;3&#125;)(\d&#123;1,4&#125;)(\d&#123;1,4&#125;$)?/g</span>;</span><br><span class="line">  <span class="keyword">var</span> pattern = <span class="string">'$1-$2-$3'</span>;</span><br><span class="line">  <span class="comment">// 第二个replace解决 186-88-，多一个‘-’的问题</span></span><br><span class="line">  <span class="keyword">return</span> phoneNum.replace(regFormatted, pattern).replace(<span class="regexp">/^(\d&#123;3&#125;-\d&#123;1,4&#125;)(-)$/</span>, <span class="string">'$1'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">18688888888</span>); <span class="comment">// 186-8888-8888</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'18688888888'</span>); <span class="comment">// 186-8888-8888</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">18688</span>);<span class="comment">// 186-88</span></span><br></pre></td></tr></table></figure>
<h2 id="获取当前日期的前后几天的日期"><a href="#获取当前日期的前后几天的日期" class="headerlink" title="获取当前日期的前后几天的日期"></a>获取当前日期的前后几天的日期</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOffsetDate</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> year = d.getFullYear();</span><br><span class="line">    <span class="keyword">var</span> mon = d.getMonth() + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> day = d.getDate();</span><br><span class="line">    <span class="keyword">if</span> (day &gt;= n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (mon &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            mon = mon - <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            year = year - <span class="number">1</span>;</span><br><span class="line">            mon = <span class="number">12</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    d.setDate(d.getDate() + n);</span><br><span class="line">    year = d.getFullYear();</span><br><span class="line">    mon = d.getMonth() + <span class="number">1</span>;</span><br><span class="line">    day = d.getDate();</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        year + <span class="string">""</span> + (mon &lt; <span class="number">10</span> ? (<span class="string">'0'</span> + mon) : mon) + <span class="string">""</span> + (day &lt; <span class="number">10</span> ? (<span class="string">'0'</span> + day) : day),</span><br><span class="line">        (mon &lt; <span class="number">10</span> ? (<span class="string">'0'</span> + mon) : mon) + <span class="string">"-"</span> + (day &lt; <span class="number">10</span> ? (<span class="string">'0'</span> + day) : day)</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果当前日期是 2016-12-28</span></span><br><span class="line"><span class="built_in">console</span>.log(getOffsetDate(<span class="number">1</span>)); <span class="comment">// ["20161229", "12-29"] 当前日期的后一天</span></span><br><span class="line"><span class="built_in">console</span>.log(getOffsetDate(<span class="number">-3</span>)); <span class="comment">// ["20161225", "12-25"]  当前日期的前三天</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/09/05/js一些工具方法/" data-id="ck71asp3g0039sr9frx5sy2s4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-自定义webpack-loader简化react-router按需加载写法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/01/自定义webpack-loader简化react-router按需加载写法/" class="article-date">
  <time datetime="2016-09-01T09:22:01.000Z" itemprop="datePublished">2016-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/构建/">构建</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/01/自定义webpack-loader简化react-router按需加载写法/">自定义webpack loader简化react-router按需加载写法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>使用react-router时，需要在开始异步获取组件/获取完成/组件是否需要渲染等时刻加入hock（使用发布订阅发送消息），按需加载写法本来就比较繁琐，加上这些hock，更加繁琐了：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: <span class="string">'/dev/components'</span>,</span><br><span class="line">    getComponent: <span class="function">(<span class="params">nextState, cb</span>) =&gt;</span> &#123;</span><br><span class="line">        startFetchingComponent();</span><br><span class="line">        <span class="built_in">require</span>.ensure([], (<span class="built_in">require</span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (!shouldComponentMount(nextState)) <span class="keyword">return</span>;</span><br><span class="line">            endFetchingComponent();</span><br><span class="line">            cb(<span class="literal">null</span>, connectComponent(<span class="built_in">require</span>(<span class="string">'./sys-component/SysComponent'</span>)));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>其中除了<code>path: &#39;/dev/components&#39;,</code>和 <code>&#39;./sys-component/SysComponent&#39;</code> 其他信息，各个route写法都一样，就算复制粘贴，相同代码也占了绝大部分。</p>
<p>注：其中<code>startFetchingComponent</code> <code>shouldComponentMount</code> <code>endFetchingComponent</code> 方法会使用发布订阅发送消息，<code>connectComponent</code>用来链接redux，这些hock是贴近我的具体业务加的，具体情况，随机应变。</p>
<h2 id="想要的结果"><a href="#想要的结果" class="headerlink" title="想要的结果"></a>想要的结果</h2><p>简化写法如下就能实现如上功能：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: <span class="string">'/dev/components'</span>,</span><br><span class="line">    asyncComponent: <span class="string">'./sys-component/SysComponent'</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<h2 id="自定义routes-loader实现"><a href="#自定义routes-loader实现" class="headerlink" title="自定义routes-loader实现"></a>自定义routes-loader实现</h2><p>webpack 自定义loader请参考：<a href="http://www.alloyteam.com/2016/01/webpack-loader-1/" target="_blank" rel="noopener">如何开发一个 Webpack Loader</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getComponentString</span>(<span class="params">componentPath</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"getComponent: (nextState, cb) =&gt; &#123;"</span></span><br><span class="line">        + <span class="string">"startFetchingComponent();"</span></span><br><span class="line">        + <span class="string">"require.ensure([], (require) =&gt; &#123;"</span></span><br><span class="line">        + <span class="string">"if (!shouldComponentMount(nextState)) return;"</span></span><br><span class="line">        + <span class="string">"endFetchingComponent();"</span></span><br><span class="line">        + <span class="string">"cb(null, connectComponent(require('"</span> + componentPath + <span class="string">"')));"</span></span><br><span class="line">        + <span class="string">"&#125;);"</span></span><br><span class="line">        + <span class="string">"&#125;,"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">source, other</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.cacheable();</span><br><span class="line">    <span class="keyword">var</span> routesStrTemp = source;</span><br><span class="line">    <span class="keyword">var</span> patt = <span class="regexp">/asyncComponent:[ ]*['"]([^'"]+)['"][,]/gm</span>;</span><br><span class="line">    <span class="keyword">var</span> isRoutes = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> block = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> ((block = patt.exec(source)) !== <span class="literal">null</span>) &#123;</span><br><span class="line">        isRoutes = block[<span class="number">0</span>] &amp;&amp; block[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (isRoutes) &#123;</span><br><span class="line">            routesStrTemp = routesStrTemp.replace(block[<span class="number">0</span>], getComponentString(block[<span class="number">1</span>]));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isRoutes) &#123;</span><br><span class="line">        routesStrTemp = <span class="string">"import connectComponent from 'src/utils/connectComponent.js';\n"</span></span><br><span class="line">            + <span class="string">"import &#123;startFetchingComponent, endFetchingComponent, shouldComponentMount&#125; from 'src/utils/route-utils';"</span></span><br><span class="line">            + routesStrTemp;</span><br><span class="line">        <span class="keyword">this</span>.callback(<span class="literal">null</span>, routesStrTemp, other);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.callback(<span class="literal">null</span>, source, other);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="webpack-配置"><a href="#webpack-配置" class="headerlink" title="webpack 配置"></a>webpack 配置</h2><p>由于这是对原routes.js文件的修改，故routes-loader加在preLoaders中,在loaders执行之前，做好这些转换工作。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">preLoaders: [</span><br><span class="line">    ...</span><br><span class="line">    &#123;</span><br><span class="line">        test: <span class="regexp">/routes\.js$/</span>,</span><br><span class="line">        loader: path.join(__dirname, <span class="string">'./routes-loader'</span>), <span class="comment">// 这里要使用绝对路径</span></span><br><span class="line">        include: projectRoot,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">],</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/09/01/自定义webpack-loader简化react-router按需加载写法/" data-id="ck71asp6p007hsr9fx5f1qs5q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-es6-Mixin模式的实现" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/24/es6-Mixin模式的实现/" class="article-date">
  <time datetime="2016-08-24T08:27:42.000Z" itemprop="datePublished">2016-08-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/24/es6-Mixin模式的实现/">es6 Mixin模式的实现</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>可以用来实现多继承，具体实现如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mix</span>(<span class="params">...mixins</span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Mix</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> mixin <span class="keyword">of</span> mixins) &#123;</span><br><span class="line">    copyProperties(Mix, mixin);</span><br><span class="line">    copyProperties(Mix.prototype, mixin.prototype);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Mix;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copyProperties</span>(<span class="params">target, source</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Reflect</span>.ownKeys(source)) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( key !== <span class="string">"constructor"</span></span><br><span class="line">      &amp;&amp; key !== <span class="string">"prototype"</span></span><br><span class="line">      &amp;&amp; key !== <span class="string">"name"</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="keyword">let</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(source, key);</span><br><span class="line">      <span class="built_in">Object</span>.defineProperty(target, key, desc);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面代码的mix函数，可以将多个对象合成为一个类。使用的时候，只要继承这个类即可。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DistributedEdit</span> <span class="keyword">extends</span> <span class="title">mix</span>(<span class="title">Loggable</span>, <span class="title">Serializable</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>参考链接：<br><a href="http://es6.ruanyifeng.com/#docs/class#Mixin模式的实现" target="_blank" rel="noopener">http://es6.ruanyifeng.com/#docs/class#Mixin模式的实现</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/08/24/es6-Mixin模式的实现/" data-id="ck71asp2z002fsr9fyg1zggkn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-ubuntu开发环境搭建" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/24/ubuntu开发环境搭建/" class="article-date">
  <time datetime="2016-08-24T07:27:10.000Z" itemprop="datePublished">2016-08-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/24/ubuntu开发环境搭建/">ubuntu开发环境搭建</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>开发环境搭建：</p>
<h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure>
<h2 id="生成ssh-key"><a href="#生成ssh-key" class="headerlink" title="生成ssh key"></a>生成ssh key</h2><ul>
<li><p>生成key，执行如下命令，然后一路回车即可</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C “xxx@163.com”</span><br></pre></td></tr></table></figure>
</li>
<li><p>复制id_rsa.pub中内容到远程服务器</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line">cat id_rsa.pub</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入远程服务器，编辑authorized_keys文件，加入生成的id_rsa.pub</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /home/git/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装nodejs</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y build-essential</span><br><span class="line">curl -sL https://deb.nodesource.com/setup_4.x | sudo -E bash -</span><br><span class="line">sudo apt-get install -y nodejs</span><br><span class="line">sudo ln -s /usr/bin/nodejs /usr/bin/node</span><br></pre></td></tr></table></figure>
<h2 id="升级npm"><a href="#升级npm" class="headerlink" title="升级npm"></a>升级npm</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm update npm -g</span><br></pre></td></tr></table></figure>
<h2 id="安装java8"><a href="#安装java8" class="headerlink" title="安装java8"></a>安装java8</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:webupd8team/java</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install oracle-java8-installer -y</span><br><span class="line">java -version</span><br></pre></td></tr></table></figure>
<h2 id="安装maven3"><a href="#安装maven3" class="headerlink" title="安装maven3"></a>安装maven3</h2><p><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">官方</a>下载最新的apache-maven-3.x.y-bin.tar.gz<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">解压</span><br><span class="line">sudo tar zxvf apache-maven-3.3.9-bin.tar.gz -C /usr/<span class="built_in">local</span>/</span><br><span class="line"></span><br><span class="line">sudo vi /etc/profile</span><br><span class="line">加入：<span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/apache-maven-3.3.9/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line">注销后：</span><br><span class="line">mvn -v</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/08/24/ubuntu开发环境搭建/" data-id="ck71asp5b004ksr9fplyz3hou" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/环境搭建/">环境搭建</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-微信夸号支付问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/16/微信夸号支付问题/" class="article-date">
  <time datetime="2016-08-16T10:06:29.000Z" itemprop="datePublished">2016-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实现方案/">实现方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/16/微信夸号支付问题/">微信夸号支付问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>场景是这样的，我在A公众号开发了一个web支付页面，订阅号B中访问时，支付就会出现夸号支付错误</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ol>
<li>捕获支付错误，弹出支付二维码，二维码是后端生成的一个微信支付二维码，内容类似：weixin://wxpay/xxx?xxx=xx</li>
<li>引导用户长按二维码，识别并支付，</li>
<li>用户支付成功之后，由于前端无法捕获回调，弹出框提供一个‘已完成支付’之类的按钮，让用户点击，完成支付。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wx.chooseWXPay(&#123;</span><br><span class="line">    ... // 一大堆配置</span><br><span class="line">    success: function (res) &#123;</span><br><span class="line">        ... // 支付成功，跳转之类的逻辑</span><br><span class="line">    &#125;,</span><br><span class="line">    fail: function (res) &#123;</span><br><span class="line">        // res.errMsg 为 chooseWXPay: fail 并没有什么卵用</span><br><span class="line">        ... // 支付失败，弹出支付二维码，引导用户长按二维码支付。</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>参考链接：<br><a href="http://blog.sina.com.cn/s/blog_13f5b445f0102vsev.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_13f5b445f0102vsev.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/08/16/微信夸号支付问题/" data-id="ck71asp6h006wsr9fmngyg1b5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/微信/">微信</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-关于React-ref的使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/05/关于React-ref的使用/" class="article-date">
  <time datetime="2016-08-05T06:00:06.000Z" itemprop="datePublished">2016-08-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/05/关于React-ref的使用/">关于React ref的使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>React应用中，有时需要操作真实得dom节点，比如使用一些第三方，非React插件的时候，需要直接操作dom，React中，可以使用ref获取;<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount()&#123;</span><br><span class="line">  <span class="keyword">const</span> myInput = <span class="keyword">this</span>.refs.myInput;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input ref=<span class="string">"myInput"</span>/&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>还可以这样写：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount()&#123;</span><br><span class="line">  <span class="keyword">const</span> myInput = <span class="keyword">this</span>.myInput;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input ref=&#123;(view) =&gt; <span class="keyword">this</span>.myInput = view&#125;/&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>组件嵌套得时候有个坑：父组件只能获取直接子节点的ref<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount()&#123;</span><br><span class="line">  <span class="comment">// 这里是无法获取到的，由于input得直接父组件是SomeComponent,这时input的ref并未执行</span></span><br><span class="line">  <span class="comment">// 可以在SomeComponent 的 componentDidMount中获取到myInput</span></span><br><span class="line">  <span class="keyword">const</span> myInput = <span class="keyword">this</span>.myInput;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;SomeComponent&gt;</span><br><span class="line">      &lt;input ref=&#123;(view) =&gt; <span class="keyword">this</span>.myInput = view&#125;/&gt;</span><br><span class="line">    &lt;<span class="regexp">/SomeComponent&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>这个怎么破？组件化，将dom操作封装成一个独立的组件，比如图表（chart），可以把图表单独封装成组件，其他组件调用即可，即可避免组件嵌套ref无法获取的问题，又符合组件化规范，提高复用。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/08/05/关于React-ref的使用/" data-id="ck71asp5v005nsr9f3j06ahkd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-android-APP常用图标尺寸规范" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/27/android-APP常用图标尺寸规范/" class="article-date">
  <time datetime="2016-07-27T05:41:24.000Z" itemprop="datePublished">2016-07-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/27/android-APP常用图标尺寸规范/">android APP常用图标尺寸规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="程序启动图标"><a href="#程序启动图标" class="headerlink" title="程序启动图标"></a>程序启动图标</h2><ol>
<li>LDPI (Low Density Screen，120 DPI)，其图标大小为 36 x 36 px。</li>
<li>MDPI (Medium Density Screen, 160 DPI)，其图标大小为 48 x 48 px。</li>
<li>HDPI (High Density Screen, 240 DPI)，其图标大小为 72 x 72 px。</li>
<li>xhdpi (Extra-high density screen, 320 DPI)，其图标大小为 96 x 96 px。</li>
<li>xxhdpi（xx-high density screen, 480 DPI）,其图标大小为144 x 144 px。</li>
</ol>
<h2 id="底部菜单图标"><a href="#底部菜单图标" class="headerlink" title="底部菜单图标"></a>底部菜单图标</h2><h3 id="大屏-hdpi"><a href="#大屏-hdpi" class="headerlink" title="大屏 (hdpi)"></a>大屏 (hdpi)</h3><ol>
<li>完整图片（红色）: 72 x 72 px</li>
<li>图标（蓝色）: 48 x 48 px</li>
<li>图标外边框（粉色）: 44 x 44 px</li>
</ol>
<h3 id="中屏-mdpi"><a href="#中屏-mdpi" class="headerlink" title="中屏 (mdpi)"></a>中屏 (mdpi)</h3><ol>
<li>完整图片: 48 x 48 px</li>
<li>图标: 32 x 32 px</li>
<li>图标外边框: 30 x 30 px</li>
</ol>
<h3 id="小屏-ldpi"><a href="#小屏-ldpi" class="headerlink" title="小屏(ldpi)"></a>小屏(ldpi)</h3><ol>
<li>完整图片: 36 x 36 px</li>
<li>图标: 24 x 24 px</li>
<li>图标外边框: 22 x 22 px</li>
</ol>
<h2 id="弹出对话框顶部图标"><a href="#弹出对话框顶部图标" class="headerlink" title="弹出对话框顶部图标"></a>弹出对话框顶部图标</h2><ol>
<li>小屏 24 x 24 px Low density screen (ldpi)</li>
<li>中屏 32 x 32 px Medium density screen (mdpi)</li>
<li>大屏 48 x 48 px High density screen (hdpi)</li>
</ol>
<h2 id="长列表内部列表项图标"><a href="#长列表内部列表项图标" class="headerlink" title="长列表内部列表项图标"></a>长列表内部列表项图标</h2><ol>
<li>小屏 24 x 24 px Low density screen (ldpi)</li>
<li>中屏 32 x 32 px Medium density screen (mdpi)</li>
<li>大屏 48 x 48 px High density screen (hdpi)</li>
</ol>
<h2 id="底部或顶部tab标签图标"><a href="#底部或顶部tab标签图标" class="headerlink" title="底部或顶部tab标签图标"></a>底部或顶部tab标签图标</h2><h3 id="大屏-hdpi-1"><a href="#大屏-hdpi-1" class="headerlink" title="大屏 (hdpi)"></a>大屏 (hdpi)</h3><ol>
<li>完整图片（红色）: 48 x 48 px</li>
<li>图标（蓝色）: 42 x 42 px</li>
</ol>
<h3 id="中屏-mdpi-1"><a href="#中屏-mdpi-1" class="headerlink" title="中屏 (mdpi)"></a>中屏 (mdpi)</h3><ol>
<li>完整图片: 32 x 32 px</li>
<li>图标: 28 x 28 px</li>
</ol>
<h3 id="小屏-ldpi-1"><a href="#小屏-ldpi-1" class="headerlink" title="小屏(ldpi)"></a>小屏(ldpi)</h3><ol>
<li>完整图片: 24 x 24 px</li>
<li>图标: 22 x 22 px</li>
</ol>
<h2 id="底部状态栏图标"><a href="#底部状态栏图标" class="headerlink" title="底部状态栏图标"></a>底部状态栏图标</h2><ol>
<li>ldpi (120 dpi) 18 x 18 px 小屏</li>
<li>mdpi (160 dpi) 24 x 24 px 中屏</li>
<li>hdpi (240 dpi) 36 x 36 px 大屏</li>
<li>xhdpi (320 dpi) 48 x 48 px 特大屏</li>
</ol>
<p>参考链接<br><a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0120/2331.html" target="_blank" rel="noopener">http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0120/2331.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/07/27/android-APP常用图标尺寸规范/" data-id="ck71asp2l001rsr9fy0ourdpd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/规范/">规范</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-关于vue中自定义事件的理解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/25/关于vue中自定义事件的理解/" class="article-date">
  <time datetime="2016-07-25T04:57:37.000Z" itemprop="datePublished">2016-07-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/25/关于vue中自定义事件的理解/">关于vue中自定义事件的理解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>事件不外乎两部分内容，监听/触发，下面根据这两部分，简单介绍一下vue中的自定义事件。</p>
<h2 id="监听"><a href="#监听" class="headerlink" title="监听"></a>监听</h2><h3 id="on"><a href="#on" class="headerlink" title="$on()"></a>$on()</h3><ul>
<li>示例提供得方法，可以通过this.$on(event, callback)直接调用</li>
<li>事件可以通过 this.$emit, this.$dispatch 或this.$broadcast触发。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">ready() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$on(<span class="string">'customer-event'</span>, () =&gt; &#123;</span><br><span class="line">      ...</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="once"><a href="#once" class="headerlink" title="$once()"></a>$once()</h3><ul>
<li>示例提供得方法，可以通过this.$once(event, callback)直接调用</li>
<li>监听一个自定义事件，但是只触发一次，在第一次触发之后删除监听器。</li>
</ul>
<h3 id="v-on-event"><a href="#v-on-event" class="headerlink" title="v-on:event"></a>v-on:event</h3><p>当子组件触发了 “customer-event” 事件，父组件的 handleIt 方法将被调用。所有影响父组件状态的代码放到父组件的 handleIt 方法中；子组件只关注触发事件。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">v-on:customer-event</span>=<span class="string">"handleIt"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="events"><a href="#events" class="headerlink" title="events"></a>events</h3><p>示例提供的方法，在创建实例时 <code>events</code> 选项简单地调用 <code>$on</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">events: &#123;</span><br><span class="line">  <span class="string">'customer-event'</span>(msg) &#123;</span><br><span class="line">    <span class="comment">// 事件回调内的 `this` 自动绑定到注册它的实例上</span></span><br><span class="line">    <span class="keyword">this</span>.messages.push(msg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="触发"><a href="#触发" class="headerlink" title="触发"></a>触发</h2><h3 id="emit"><a href="#emit" class="headerlink" title="$emit"></a>$emit</h3><p>当前组件内部触发事件，事件不会冒泡到父级，只有当前组件内部才可以捕获到</p>
<h3 id="dispatch"><a href="#dispatch" class="headerlink" title="$dispatch"></a>$dispatch</h3><p>派发事件，事件沿着父链冒泡；</p>
<h3 id="broadcast"><a href="#broadcast" class="headerlink" title="$broadcast"></a>$broadcast</h3><p>广播事件，事件向下传导给所有的后代。</p>
<p>参考链接：<br><a href="http://cn.vuejs.org/api/#实例方法-事件" target="_blank" rel="noopener">http://cn.vuejs.org/api/#实例方法-事件</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/07/25/关于vue中自定义事件的理解/" data-id="ck71asp5t005jsr9fmwfhy4py" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/">vue</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-React-Native-StyleSheet-封装" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/13/React-Native-StyleSheet-封装/" class="article-date">
  <time datetime="2016-07-13T08:13:51.000Z" itemprop="datePublished">2016-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/13/React-Native-StyleSheet-封装/">React Native StyleSheet 封装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>React Native 的 app 应该对各个平台做适配，但各个平台的UI风格不同，很多情况下需要通过样式进行区分，不同平台应用不同的样式，下面的函数摘自FaceBook的<a href="https://github.com/fbsamples/f8app" target="_blank" rel="noopener">f8app</a> ，对react-native的StyleSheet做了封装，可以根据不同平台，应用不同的样式</p>
<p>js/common/F8StyleSheet.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Copyright 2016 Facebook, Inc.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * You are hereby granted a non-exclusive, worldwide, royalty-free license to</span></span><br><span class="line"><span class="comment"> * use, copy, modify, and distribute this software in source code or binary</span></span><br><span class="line"><span class="comment"> * form for use in connection with the web services and APIs provided by</span></span><br><span class="line"><span class="comment"> * Facebook.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * As with any software that integrates with the Facebook platform, your use</span></span><br><span class="line"><span class="comment"> * of this software is subject to the Facebook Developer Principles and</span></span><br><span class="line"><span class="comment"> * Policies [http://developers.facebook.com/policy/]. This copyright notice</span></span><br><span class="line"><span class="comment"> * shall be included in all copies or substantial portions of the software.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></span><br><span class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></span><br><span class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></span><br><span class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></span><br><span class="line"><span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></span><br><span class="line"><span class="comment"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></span><br><span class="line"><span class="comment"> * DEALINGS IN THE SOFTWARE</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @providesModule F8StyleSheet</span></span><br><span class="line"><span class="comment"> * @flow</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;StyleSheet, Platform&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">styles: Object</span>): </span>&#123;[name: string]: number&#125; &#123;</span><br><span class="line">  <span class="keyword">const</span> platformStyles = &#123;&#125;;</span><br><span class="line">  <span class="built_in">Object</span>.keys(styles).forEach(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;ios, android, ...style&#125; = &#123;...styles[name]&#125;;</span><br><span class="line">    <span class="keyword">if</span> (ios &amp;&amp; Platform.OS === <span class="string">'ios'</span>) &#123;</span><br><span class="line">      style = &#123;...style, ...ios&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (android &amp;&amp; Platform.OS === <span class="string">'android'</span>) &#123;</span><br><span class="line">      style = &#123;...style, ...android&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    platformStyles[name] = style;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> StyleSheet.create(platformStyles);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用方法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> StyleSheet = <span class="built_in">require</span>(<span class="string">'F8StyleSheet'</span>);</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> styles = StyleSheet.create(&#123;</span><br><span class="line">  container: &#123;</span><br><span class="line">    flexDirection: <span class="string">'row'</span>,</span><br><span class="line">    backgroundColor: <span class="string">'transparent'</span>,</span><br><span class="line">    ios: &#123;</span><br><span class="line">      paddingBottom: <span class="number">6</span>,</span><br><span class="line">      justifyContent: <span class="string">'center'</span>,</span><br><span class="line">      alignItems: <span class="string">'center'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    android: &#123;</span><br><span class="line">      paddingLeft: <span class="number">60</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  button: &#123;</span><br><span class="line">    borderColor: <span class="string">'transparent'</span>,</span><br><span class="line">    alignItems: <span class="string">'center'</span>,</span><br><span class="line">    justifyContent: <span class="string">'center'</span>,</span><br><span class="line">    backgroundColor: <span class="string">'transparent'</span>,</span><br><span class="line">    ios: &#123;</span><br><span class="line">      height: HEIGHT,</span><br><span class="line">      paddingHorizontal: <span class="number">20</span>,</span><br><span class="line">      borderRadius: HEIGHT / <span class="number">2</span>,</span><br><span class="line">      borderWidth: <span class="number">1</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    android: &#123;</span><br><span class="line">      paddingBottom: <span class="number">6</span>,</span><br><span class="line">      paddingHorizontal: <span class="number">10</span>,</span><br><span class="line">      borderBottomWidth: <span class="number">3</span>,</span><br><span class="line">      marginRight: <span class="number">10</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  label: &#123;</span><br><span class="line">    letterSpacing: <span class="number">1</span>,</span><br><span class="line">    fontSize: <span class="number">12</span>,</span><br><span class="line">    color: <span class="string">'white'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  deselectedLabel: &#123;</span><br><span class="line">    color: <span class="string">'rgba(255, 255, 255, 0.7)'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/07/13/React-Native-StyleSheet-封装/" data-id="ck71asp2a0015sr9fhvy7ennt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



	



  
    <article id="post-git-提交信息规范" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/30/git-提交信息规范/" class="article-date">
  <time datetime="2016-06-30T02:32:03.000Z" itemprop="datePublished">2016-06-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/30/git-提交信息规范/">git 提交信息规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>好的git提交信息，可以降低团队的沟通成本，便于后期做一些自动化处理，比如自动提取更新日志，自动关闭issues，使程序的版本更可控，如下是几篇比较好的文章，可以根据这里面的建议，整理出一套适用于团队得规范。</p>
<p><a href="https://segmentfault.com/a/1190000002583308" target="_blank" rel="noopener">https://segmentfault.com/a/1190000002583308</a></p>
<p><a href="http://blog.jobbole.com/92713/" target="_blank" rel="noopener">http://blog.jobbole.com/92713/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/06/30/git-提交信息规范/" data-id="ck71asp33002nsr9f42yugz1o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-js构造树状数据结构" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/29/js构造树状数据结构/" class="article-date">
  <time datetime="2016-06-29T12:49:58.000Z" itemprop="datePublished">2016-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/29/js构造树状数据结构/">js构造树状数据结构</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>菜单，组织结构等场景经常会用到树状结构的数据，树状结构数据可以后端构造，也可以前端构造，如下是js方式构造数据，需要扁平数据结构为<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="number">1</span>, <span class="attr">parentKey</span>: <span class="number">0</span>, <span class="attr">text</span>: <span class="string">'一级'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="number">2</span>, <span class="attr">parentKey</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'二级2'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="number">3</span>, <span class="attr">parentKey</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'二级3'</span>&#125;,</span><br><span class="line">  ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>key， parentKey， text 函数中会用到，如果后端给出的不是这三个字段，可以适当改造如下方法，或者做映射。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 检测某个节点是否有parent节点</span></span><br><span class="line"><span class="comment"> * @param rows 所有节点</span></span><br><span class="line"><span class="comment"> * @param row 需要判断得节点</span></span><br><span class="line"><span class="comment"> * @returns &#123;boolean&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">hasParent</span>(<span class="params">rows, row</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> parentKey = row.parentKey;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; rows.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (rows[i].key === parentKey) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * js构造树方法。</span></span><br><span class="line"><span class="comment"> * @param rows 具有key，parentKey关系的扁平数据结构，标题字段为text</span></span><br><span class="line"><span class="comment"> * @param parentNode 开始节点</span></span><br><span class="line"><span class="comment"> * @returns &#123;array&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">convertToTree</span>(<span class="params">rows, parentNode</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 这个函数会被多次调用，对rows做深拷贝，否则会产生副作用。</span></span><br><span class="line">    rows = rows.map(<span class="function">(<span class="params">row</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> assign(&#123;&#125;, row);</span><br><span class="line">    &#125;);</span><br><span class="line">    parentNode = assign(&#123;&#125;, parentNode);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> nodes = [];</span><br><span class="line">    <span class="keyword">if</span> (parentNode) &#123;</span><br><span class="line">        nodes.push(parentNode);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 获取所有的顶级节点</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; rows.length; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> row = rows[i];</span><br><span class="line">            <span class="keyword">if</span> (!hasParent(rows, row.parentKey)) &#123;</span><br><span class="line">                nodes.push(row);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 存放要处理的节点</span></span><br><span class="line">    <span class="keyword">let</span> toDo = nodes.map(<span class="function">(<span class="params">v</span>) =&gt;</span> v);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (toDo.length) &#123;</span><br><span class="line">        <span class="comment">// 处理一个，头部弹出一个。</span></span><br><span class="line">        <span class="keyword">let</span> node = toDo.shift();</span><br><span class="line">        <span class="comment">// 获取子节点。</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; rows.length; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> row = rows[i];</span><br><span class="line">            <span class="keyword">if</span> (row.parentKey === node.key) &#123;</span><br><span class="line">                <span class="keyword">let</span> child = row;</span><br><span class="line">                <span class="keyword">let</span> parentKeys = [node.key];</span><br><span class="line">                <span class="keyword">if</span> (node.parentKeys) &#123;</span><br><span class="line">                    parentKeys = node.parentKeys.concat(node.key);</span><br><span class="line">                &#125;</span><br><span class="line">                child.parentKeys = parentKeys;</span><br><span class="line">                <span class="keyword">let</span> parentText = [node.text];</span><br><span class="line">                <span class="keyword">if</span> (node.parentText) &#123;</span><br><span class="line">                    parentText = node.parentText.concat(node.text);</span><br><span class="line">                &#125;</span><br><span class="line">                child.parentText = parentText;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (node.children) &#123;</span><br><span class="line">                    node.children.push(child);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    node.children = [child];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// child加入toDo，继续处理</span></span><br><span class="line">                toDo.push(child);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (parentNode) &#123;</span><br><span class="line">        <span class="keyword">return</span> nodes[<span class="number">0</span>].children;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nodes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/06/29/js构造树状数据结构/" data-id="ck71asp3r003ksr9fcm92wn8x" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-获取滚动条宽度" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/29/获取滚动条宽度/" class="article-date">
  <time datetime="2016-06-29T11:03:45.000Z" itemprop="datePublished">2016-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/29/获取滚动条宽度/">获取滚动条宽度</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollBarWidth</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> scrollDiv = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    scrollDiv.style.position = <span class="string">'absolute'</span>;</span><br><span class="line">    scrollDiv.style.top = <span class="string">'-9999px'</span>;</span><br><span class="line">    scrollDiv.style.width = <span class="string">'50px'</span>;</span><br><span class="line">    scrollDiv.style.height = <span class="string">'50px'</span>;</span><br><span class="line">    scrollDiv.style.overflow = <span class="string">'scroll'</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(scrollDiv)</span><br><span class="line">    <span class="keyword">var</span> scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(scrollDiv)</span><br><span class="line">    <span class="keyword">return</span> scrollbarWidth</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/06/29/获取滚动条宽度/" data-id="ck71asp6r007lsr9fgaf0a98m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-HTML5本地存储" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/29/HTML5本地存储/" class="article-date">
  <time datetime="2016-06-29T10:42:19.000Z" itemprop="datePublished">2016-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/29/HTML5本地存储/">HTML5本地存储</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>分为localStorage和sessionStorage，一个永久有效，一个session级别的，用法完全相同；每个网站5M，用于存储字符串（只能存字符串）。</p>
<h2 id="支持情况"><a href="#支持情况" class="headerlink" title="支持情况"></a>支持情况</h2><p><img src="support.png" alt="支持情况"></p>
<h2 id="检测"><a href="#检测" class="headerlink" title="检测"></a>检测</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.localStorage)&#123;</span><br><span class="line">     <span class="comment">//code here</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">     <span class="comment">//code here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>推荐统一使用setItem getItem  removeItem</p>
<h3 id="赋值方法"><a href="#赋值方法" class="headerlink" title="赋值方法"></a>赋值方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">localStorage.a = <span class="number">3</span>;<span class="comment">//设置a为"3"</span></span><br><span class="line">localStorage[<span class="string">"a"</span>] = <span class="string">"sfsf"</span>;<span class="comment">//设置a为"sfsf"，覆盖上面的值</span></span><br><span class="line">localStorage.setItem(<span class="string">"b"</span>,<span class="string">"isaac"</span>);<span class="comment">//设置b为"isaac"</span></span><br></pre></td></tr></table></figure>
<h3 id="取值方法"><a href="#取值方法" class="headerlink" title="取值方法"></a>取值方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 = localStorage[<span class="string">"a"</span>];<span class="comment">//获取a的值</span></span><br><span class="line"><span class="keyword">var</span> a2 = localStorage.a;<span class="comment">//获取a的值</span></span><br><span class="line"><span class="keyword">var</span> b = localStorage.getItem(<span class="string">"b"</span>);<span class="comment">//获取b的值</span></span><br><span class="line"><span class="string">``</span><span class="string">`       </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 清除方法</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line">localStorage.removeItem(<span class="string">"c"</span>);<span class="comment">//清除c的值</span></span><br><span class="line">localStorage.clear();<span class="comment">//全部清除</span></span><br><span class="line"><span class="string">``</span><span class="string">`       </span></span><br><span class="line"><span class="string">### 遍历本地存储</span></span><br><span class="line"><span class="string">这里会把所有的存储都遍历出来，无论是你用的，还是其他程序用的。key最好有个前缀，不容易重复的前缀，这样能区分开数据到底是什么类型</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">var</span> storage = <span class="built_in">window</span>.localStorage; <span class="comment">//类数组对象</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; storage.length; i++)&#123;</span><br><span class="line">     <span class="comment">//key(i)获得相应的键，再用getItem()方法获得对应的值</span></span><br><span class="line">     <span class="keyword">var</span> key = storage.key(i);</span><br><span class="line">     <span class="keyword">var</span> value = storage.getItem(key);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>异常处理很重要，否则会出现莫名其妙得卡死，还不知道问题出在哪里）<br>主要是存储已满异常，可以考虑使用LRU（Least Recently Used最近最少使用）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">     localStorage.setItem(key, value);</span><br><span class="line">&#125;<span class="keyword">catch</span>(oException)&#123;</span><br><span class="line">     <span class="keyword">if</span>(oException.name == <span class="string">'QuotaExceededError'</span>)&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'超出本地存储限额！'</span>);</span><br><span class="line">          <span class="comment">//如果历史信息不重要了，可清空后再设置</span></span><br><span class="line">          localStorage.clear();</span><br><span class="line">          localStorage.setItem(key,value);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><p>如下是项目中使用的一个简单封装，storage.js，es6语法。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  本地存储封装，项目中其他地方不要直接使用localStorage和sessionStorage，统一使用封装。</span></span><br><span class="line"><span class="comment"> *  简化接口，字符串json转换。</span></span><br><span class="line"><span class="comment"> *  如果本地存储使用比较多，可以考虑封装LRU（Least Recently Used最近最少使用）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    global: &#123;</span><br><span class="line">        get(key) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">window</span>.globalStorage ? <span class="built_in">window</span>.globalStorage[key] : <span class="literal">null</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        set(key, jsonValue) &#123;</span><br><span class="line">            <span class="built_in">window</span>.globalStorage = <span class="built_in">window</span>.globalStorage ? <span class="built_in">window</span>.globalStorage : &#123;&#125;;</span><br><span class="line">            <span class="built_in">window</span>.globalStorage[key] = jsonValue;</span><br><span class="line">        &#125;,</span><br><span class="line">        remove(key) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">window</span>.globalStorage) &#123;</span><br><span class="line">                <span class="keyword">delete</span> <span class="built_in">window</span>.globalStorage[key];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        removeAll() &#123;</span><br><span class="line">            <span class="built_in">window</span>.globalStorage = &#123;&#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    local: &#123;</span><br><span class="line">        get(key) &#123;</span><br><span class="line">            <span class="keyword">const</span> strValue = localStorage.getItem(key);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(strValue);</span><br><span class="line">        &#125;,</span><br><span class="line">        set(key, jsonValue) &#123;</span><br><span class="line">            <span class="keyword">const</span> strValue = <span class="built_in">JSON</span>.stringify(jsonValue);</span><br><span class="line">            localStorage.setItem(key, strValue);</span><br><span class="line">        &#125;,</span><br><span class="line">        remove(key) &#123;</span><br><span class="line">            localStorage.removeItem(key);</span><br><span class="line">        &#125;,</span><br><span class="line">        removeAll() &#123;</span><br><span class="line">            localStorage.clear();</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    session: &#123;</span><br><span class="line">        get(key) &#123;</span><br><span class="line">            <span class="keyword">const</span> strValue = sessionStorage.getItem(key);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(strValue);</span><br><span class="line">        &#125;,</span><br><span class="line">        set(key, jsonValue) &#123;</span><br><span class="line">            <span class="keyword">const</span> strValue = <span class="built_in">JSON</span>.stringify(jsonValue);</span><br><span class="line">            sessionStorage.setItem(key, strValue);</span><br><span class="line">        &#125;,</span><br><span class="line">        remove(key) &#123;</span><br><span class="line">            sessionStorage.removeItem(key);</span><br><span class="line">        &#125;,</span><br><span class="line">        removeAll() &#123;</span><br><span class="line">            sessionStorage.clear();</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">import</span> Storage <span class="keyword">from</span> <span class="string">'./storage.js'</span>;</span><br><span class="line">Storage.session.get(key);</span><br><span class="line">Storage.session.set(key, jsonValue);</span><br></pre></td></tr></table></figure></p>
<p>参考链接：<br><a href="http://www.cnblogs.com/xiaowei0705/archive/2011/04/19/2021372.html" target="_blank" rel="noopener">http://www.cnblogs.com/xiaowei0705/archive/2011/04/19/2021372.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/06/29/HTML5本地存储/" data-id="ck71asp1l0005sr9ffjh1xbqg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-关于但页面应用的url处理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/29/关于但页面应用的url处理/" class="article-date">
  <time datetime="2016-06-29T10:16:45.000Z" itemprop="datePublished">2016-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实现方案/">实现方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/29/关于但页面应用的url处理/">关于单页面应用的url处理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>单页面应用越来越流行，单页面应用的开发页面跳转都需要前端来处理，配合H5的history API，可以不使用hash方式拼接url，但是带来一个问题，如果用户刷新当前页面，通过history修改过的url会正常的发送请求到后端，如果后端不做处理，就会返回404，用户体验不是很好。</p>
<h2 id="单页面应用url处理方式"><a href="#单页面应用url处理方式" class="headerlink" title="单页面应用url处理方式"></a>单页面应用url处理方式</h2><p>一般的单页面应用，都会使用一个前端router统一控制跳转，很少会自己通过history实现逻辑，一般成熟router都会提供hash，和history两种方式修改url。</p>
<ul>
<li>hash方式，地址栏会拼接#xxx，后端不需要特殊配置，刷新前进后退等history相关操作都OK，但是地址栏也比较丑陋，无法使用锚点</li>
<li>history方式，通过pushState，replaceState改变地址栏，看起来就跟真实的地址一样，对于有url洁癖的同学来说，perfect！但是刷新需要后端做特殊支持</li>
</ul>
<h2 id="history方式，后端支持"><a href="#history方式，后端支持" class="headerlink" title="history方式，后端支持"></a>history方式，后端支持</h2><p>后端如果发现是get请求，并且没有被处理，都跳转到index。</p>
<ul>
<li>通过服务器实现</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Apache</span><br><span class="line">In your vhost :</span><br><span class="line"></span><br><span class="line">&lt;IfModule mod_rewrite.c&gt;</span><br><span class="line">    RewriteEngine On</span><br><span class="line">    RewriteBase /</span><br><span class="line">    RewriteRule ^index\.html$ - [L]</span><br><span class="line">    RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">    RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">    RewriteRule . /index.html [L]</span><br><span class="line"> &lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Nginx</span><br><span class="line">rewrite ^(.+)$ /index.html last;</span><br></pre></td></tr></table></figure>
<ul>
<li>通过代码实现可以在后端路由处做处理，所有未截获的get请求（非ajax请求），都跳转到index</li>
</ul>
<p>个人比较喜欢代码方式，灵活性比较高，而且不用修改服务器配置</p>
<p>这样处理过，后端就不会存在404，将控制权交给了前端，当通过一个url进入页面时，后端统一跳转到index，前端通过路由匹配是否有对应页面，如果没有，前端跳转404</p>
<p>参考链接：<br><a href="http://readystate4.com/2012/05/17/nginx-and-apache-rewrite-to-support-html5-pushstate/" target="_blank" rel="noopener">http://readystate4.com/2012/05/17/nginx-and-apache-rewrite-to-support-html5-pushstate/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/06/29/关于但页面应用的url处理/" data-id="ck71asp5w005psr9fo7xucb6o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/单页面/">单页面</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-shell命令符号-；-作用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/21/shell命令符号-；-作用/" class="article-date">
  <time datetime="2016-06-21T10:01:20.000Z" itemprop="datePublished">2016-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/后端/">后端</a>►<a class="article-category-link" href="/categories/后端/shell/">shell</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/21/shell命令符号-；-作用/">shell命令符号&amp; &amp;&amp; ； ||作用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="符号-amp"><a href="#符号-amp" class="headerlink" title="符号&amp;"></a>符号<code>&amp;</code></h2><p>多个命令同时执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1&amp;command2&amp;command3</span><br></pre></td></tr></table></figure></p>
<h2 id="符号-amp-amp"><a href="#符号-amp-amp" class="headerlink" title="符号&amp;&amp;"></a>符号<code>&amp;&amp;</code></h2><p>顺序执行，只有前面的命令执行成功，后面的命令才会执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1&amp;&amp;command2&amp;&amp;command3</span><br></pre></td></tr></table></figure></p>
<h2 id="符号；"><a href="#符号；" class="headerlink" title="符号；"></a>符号<code>；</code></h2><p>书序执行，不管前面得命令是否成功，后面的命令继续执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1;command2;command3</span><br></pre></td></tr></table></figure></p>
<h2 id="符号"><a href="#符号" class="headerlink" title="符号||"></a>符号<code>||</code></h2><p>前面命令如果执行成功，不执行后面的命令，失败则执行后面的命令。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1||command2||command3</span><br></pre></td></tr></table></figure></p>
<p>注：&amp;&amp; 和 || 与程序的逻辑运算含义一致。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/06/21/shell命令符号-；-作用/" data-id="ck71asp57004bsr9f8nqwe12r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mongodb/">mongodb</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-常用css代码片段" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/14/常用css代码片段/" class="article-date">
  <time datetime="2016-06-14T05:45:36.000Z" itemprop="datePublished">2016-06-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/CSS/">CSS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/14/常用css代码片段/">常用css代码片段</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 块状元素水平居中 */</span></span><br><span class="line"><span class="selector-class">.auto</span>&#123;<span class="attribute">margin-left</span>:auto; <span class="attribute">margin-right</span>:auto;&#125;</span><br><span class="line"><span class="comment">/* 清除浮动*/</span></span><br><span class="line">.fix&#123;*zoom:1;&#125;</span><br><span class="line"><span class="selector-class">.fix</span><span class="selector-pseudo">:after</span>&#123;<span class="attribute">display</span>:table; <span class="attribute">content</span>:<span class="string">''</span>; <span class="attribute">clear</span>:both;&#125;</span><br><span class="line"><span class="comment">/* 基于display:table-cell的自适应布局 */</span></span><br><span class="line">.cell&#123;display:table-cell; *display:inline-block; width:2000px; *width:auto;&#125;</span><br><span class="line"><span class="comment">/* 双栏自适应cell部分连续英文字符换行 */</span></span><br><span class="line"><span class="selector-class">.cell2</span>&#123;<span class="attribute">overflow</span>:hidden; <span class="attribute">_display</span>:inline-block;&#125;</span><br><span class="line"><span class="comment">/* 单行文字溢出虚点显 示*/</span></span><br><span class="line"><span class="selector-class">.ell</span>&#123;<span class="attribute">text-overflow</span>:ellipsis; <span class="attribute">white-space</span>:nowrap; <span class="attribute">overflow</span>:hidden;&#125;</span><br><span class="line"><span class="comment">/* css3过渡动画效果 */</span></span><br><span class="line"><span class="selector-class">.trans</span>&#123;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>:all .<span class="number">15s</span>;    </span><br><span class="line">            <span class="attribute">transition</span>:all .<span class="number">15s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 大小不定元素垂直居中 */</span></span><br><span class="line"><span class="selector-class">.dib_vm</span>&#123;<span class="attribute">display</span>:inline-block; <span class="attribute">width</span>:<span class="number">0</span>; <span class="attribute">height</span>:<span class="number">100%</span>; <span class="attribute">vertical-align</span>:middle;&#125;</span><br><span class="line"><span class="comment">/* 加载中背景图片 - 如果您使用该CSS小库，务必修改此图片地址 */</span></span><br><span class="line"><span class="selector-class">.loading</span>&#123;<span class="attribute">background</span>:<span class="built_in">url</span>(about:blank) no-repeat center;&#125;</span><br><span class="line"><span class="comment">/* 无框文本框文本域 */</span></span><br><span class="line"><span class="selector-class">.bd_none</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>; <span class="attribute">outline</span>:none;&#125;</span><br><span class="line"><span class="comment">/* 绝对定位隐藏 */</span></span><br><span class="line"><span class="selector-class">.abs_out</span>&#123;<span class="attribute">position</span>:absolute; <span class="attribute">left</span>:-<span class="number">999em</span>; <span class="attribute">top</span>:-<span class="number">999em</span>;&#125;</span><br><span class="line"><span class="selector-class">.abs_clip</span>&#123;<span class="attribute">position</span>:absolute; <span class="attribute">clip</span>:<span class="built_in">rect</span>(0 0 0 0);&#125;</span><br><span class="line"><span class="comment">/* 按钮禁用 */</span></span><br><span class="line"><span class="selector-class">.disabled</span>&#123;<span class="attribute">outline</span>:<span class="number">0</span> none; <span class="attribute">cursor</span>:default<span class="meta">!important</span>; <span class="attribute">opacity</span>:.<span class="number">4</span>; <span class="attribute">filer</span>:<span class="built_in">alpha</span>(opacity=40); <span class="attribute">-ms-pointer-events</span>:none; <span class="attribute">pointer-events</span>:none;&#125;</span><br><span class="line"><span class="comment">/*inline-block与float等宽列表*/</span></span><br><span class="line"><span class="selector-class">.inline_box</span>&#123;<span class="attribute">font-size</span>:<span class="number">1em</span>; <span class="attribute">letter-spacing</span>:-.<span class="number">25em</span>; <span class="attribute">font-family</span>:Arial;&#125;</span><br><span class="line">.inline_two, .inline_three, .inline_four, .inline_five, .inline_six, .inline_any&#123;display:inline-block; *display:inline; letter-spacing:0; vertical-align:top; *zoom:1;&#125;</span><br><span class="line"><span class="selector-class">.float_two</span>, <span class="selector-class">.float_three</span>, <span class="selector-class">.float_four</span>, <span class="selector-class">.float_five</span>, <span class="selector-class">.float_six</span>&#123;<span class="attribute">float</span>:left;&#125;</span><br><span class="line">.inline_two, .float_two&#123;width:50%; *width:49.9%;&#125;</span><br><span class="line">.inline_three, .float_three&#123;width:33.33333%; *width:33.3%;&#125;</span><br><span class="line">.inline_four, .float_four&#123;width:25%; *width:24.9%;&#125;</span><br><span class="line">.inline_five, .float_five&#123;width:20%; *width:19.9%;&#125;</span><br><span class="line">.inline_six, .float_six&#123;width:16.66666%; *width:16.6%;&#125;</span><br><span class="line"><span class="selector-class">.inline_fix</span>&#123;<span class="attribute">display</span>:inline-block; <span class="attribute">width</span>:<span class="number">100%</span>; <span class="attribute">height</span>:<span class="number">0</span>; <span class="attribute">overflow</span>:hidden;&#125;</span><br></pre></td></tr></table></figure>
<p>参考链接：<br><a href="http://www.cnblogs.com/lyzg/p/5561001.html" target="_blank" rel="noopener">http://www.cnblogs.com/lyzg/p/5561001.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/06/14/常用css代码片段/" data-id="ck71asp6f006tsr9fm5xw2usv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-简单按钮实现" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/12/简单按钮实现/" class="article-date">
  <time datetime="2016-06-12T08:08:27.000Z" itemprop="datePublished">2016-06-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实现方案/">实现方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/12/简单按钮实现/">简单按钮实现</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>按钮一般分为三种状态，普通 鼠标移入 点击，一般状态切换，只是改变背景颜色，字体颜色，鼠标移入通过<code>:hover</code>伪类实现，点击使用<code>:active</code>伪类实现，简单的代码如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* hover 要在active 前面*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: yellow;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* loading状态禁用点击等事件，表单按钮直接加loading状态，不用判断是否loading状态，来确定是否发请求，本身loading状态的按钮就变成不可点击了 */</span></span><br><span class="line"><span class="selector-class">.btn</span><span class="selector-class">.loading</span> &#123;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>效果如下：</p>
<style>
    .btn {
        display: inline-block;
        padding: 8px 10px;
        background: blue;
        border-radius: 5px;
        color: #fff;
        border: 0;
        box-sizing: border-box;
        outline: 0;
        cursor: pointer;
        text-decoration: none;
        transition: .3s;
    }
    /* hover 要在active 前面*/

    .btn:hover {
        background: red;
    }
    .btn:active {
        background: yellow;
        color: #000;
    }
</style>

<p><a class="btn" href="javascript:;" target="_blank" rel="noopener">a按钮</a></p>
<button class="btn">button按钮</button>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/06/12/简单按钮实现/" data-id="ck71asp6m007asr9feexiu58l" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/按钮/">按钮</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-Git使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/31/Git使用/" class="article-date">
  <time datetime="2016-05-31T11:30:04.000Z" itemprop="datePublished">2016-05-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/31/Git使用/">Git使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p><a href="http://git-scm.com/" target="_blank" rel="noopener">官网地址</a><br><em>git的使用还是挺复杂的，由于精力有限，这里只是总结了一些简单的使用，满足日常工作即可，如果不能满足日常工作，查阅相关资料，再做完善</em></p>
<h2 id="git安装"><a href="#git安装" class="headerlink" title="git安装"></a>git安装</h2><h3 id="linux（ubuntu14）下安装"><a href="#linux（ubuntu14）下安装" class="headerlink" title="linux（ubuntu14）下安装"></a>linux（ubuntu14）下安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br><span class="line">查看git版本 git --version</span><br></pre></td></tr></table></figure>
<h3 id="windows下安装"><a href="#windows下安装" class="headerlink" title="windows下安装"></a>windows下安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">网上下载一个[git工具](http://rj.baidu.com/soft/detail/30195.html?ald)工具，安装完成即可在windows下使用git</span><br><span class="line">常用的工具为：msysgit</span><br></pre></td></tr></table></figure>
<h3 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h3><p>克隆下来的git仓库中有个.git的隐藏文件夹，其中的config文件为git的配置文件，编辑这个config文件可以修改配置。<br>也可以使用命令进行修改配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name ...</span><br><span class="line">git config --global user.email ...</span><br><span class="line">git config --global color.ui true :颜色，不设置，默认都是黑色</span><br></pre></td></tr></table></figure></p>
<h3 id="可视化工具"><a href="#可视化工具" class="headerlink" title="可视化工具"></a>可视化工具</h3><p><a href="http://www.syntevo.com/smartgit/" target="_blank" rel="noopener">官网</a><br>smartgithg分为三个版本：</p>
<ol>
<li>试用版30天</li>
<li>商业版，需要证书，有技术支持</li>
<li>个人版，不需要证书，没有技术支持</li>
</ol>
<p>使用时候选择3 个人版。如果选择的是使用版，30天过期后，把home下的隐藏文件夹.smartgit删掉，重新启动smartgit可以重新选择版本</p>
<h4 id="PyCharm连接Git"><a href="#PyCharm连接Git" class="headerlink" title="PyCharm连接Git"></a>PyCharm连接Git</h4><ol>
<li>File -&gt; Close Project 进入“Welcome to PyCharm ”</li>
<li>点击VCS Check out from Version Control 选择Git</li>
</ol>
<h5 id="选项说明"><a href="#选项说明" class="headerlink" title="选项说明"></a>选项说明</h5><ol>
<li>Vcs Repository URL:(远程Git地址)如ssh:<a href="mailto://git@192.168.1.136" target="_blank" rel="noopener">//git@192.168.1.136</a>/srv/inc-eking-web.git</li>
<li>Parent Directory:拷贝到本地的位置。</li>
<li>DirectoryName:文件名称</li>
</ol>
<p>pycharm本身自带了一些git的使用工具,不太好用,推荐使用smartgit</p>
<p>注：配置3之前生成证书（后续不需要输入密码）</p>
<h4 id="git-忽略文件方法"><a href="#git-忽略文件方法" class="headerlink" title="git 忽略文件方法"></a>git 忽略文件方法</h4><p>在git文件夹（仓库）下，简历一个.gitignore（隐藏文件）即可。还有其他方法，这个方法，可以吧.gitignore文件提交到服务器上，其他用户可以pull，共享<br>.gitignore 的语法规范如下：</p>
<ol>
<li>所有空行或者以注释符号 ＃ 开头的行都会被 Git 忽略；</li>
<li>可以使用标准的 glob 模式匹配。 <em> 匹配模式最后跟反斜杠（/）说明要忽略的是目录。 </em> 要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。</li>
</ol>
<p>glob 模式匹配：</p>
<ol>
<li>星号匹配零个或多个任意字符；</li>
<li>[abc] 匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；</li>
<li>问号（?）只匹配一个任意字符；</li>
<li>[0-9a-zA-Z] 在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如 [0-9a-zA-Z] 表示匹配所有 0 到 9 的数字和所有字母）；</li>
<li>转义字符。</li>
</ol>
<p>注：理论上来说，在要忽略的格式文件后面添加注释是允许的，但经过我的验证，结果发现这样子操作并不能达到预期的效果。</p>
<p>一个 .gitignore 例子。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 此为注释 – 将被 Git 忽略</span><br><span class="line"># 忽略所有 .a 结尾的文件</span><br><span class="line">*.a</span><br><span class="line"># 但 lib.a 除外</span><br><span class="line">!lib.a</span><br><span class="line"># 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO</span><br><span class="line">/TODO</span><br><span class="line"># 忽略 build/ 目录下的所有文件</span><br><span class="line">build/</span><br><span class="line"># 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span><br><span class="line">doc/*.txt</span><br></pre></td></tr></table></figure></p>
<h3 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h3><p><em>分支可以协助不同的开发功能进行，比如发布会单拉出一个分支，bug修改会拉出一个分支，特性开发会拉出一个分支，不同的版本也会拉出一个分支，关于分支怎么管理，根据项目需求适当的拉分支。在分支上进行不同的开发，最总合并到一个分支上（一般是master分支），具体怎么管理分支跟<strong>Git工作流</strong>有关</em></p>
<h3 id="Git工作流"><a href="#Git工作流" class="headerlink" title="Git工作流"></a>Git工作流</h3><p><em>一个好的工作流方式能很好地管理日常工作，工作流可以理解为分支的checkout与合并？有关工作流相关的资料，网上查阅吧，比较经典的是GitHub工作流？</em></p>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><p><em>具体的命令使用请参考<a href="http://www.bootcss.com/p/git-guide/" target="_blank" rel="noopener">其他网站</a></em></p>
<h4 id="创建git仓库"><a href="#创建git仓库" class="headerlink" title="创建git仓库"></a>创建git仓库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo git init --bare repertoryname.git</span><br></pre></td></tr></table></figure>
<p>Git就会创建一个裸仓库(repertoryname)，裸仓库没有工作区，因为服务器上的Git仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区，并且服务器上的Git仓库通常都以.git结尾。</p>
<h4 id="克隆远程仓库"><a href="#克隆远程仓库" class="headerlink" title="克隆远程仓库"></a>克隆远程仓库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone ssh://username@serveraddress:port/repertoryname.git</span><br></pre></td></tr></table></figure>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone  ssh://git@192.168.0.201/srv/inc-eking-web.git    缺省端口号，默认58001</span><br><span class="line">git clone  ssh://git@xxx.xxx.xxx.xxx:58011/srv/inc-eking-web.git</span><br><span class="line">git clone  ssh://git@www.example.com/srv/inc-eking-web.git</span><br></pre></td></tr></table></figure></p>
<h4 id="下拉数据"><a href="#下拉数据" class="headerlink" title="下拉数据"></a>下拉数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin 分支名</span><br></pre></td></tr></table></figure>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master</span><br></pre></td></tr></table></figure></p>
<h4 id="提交数据"><a href="#提交数据" class="headerlink" title="提交数据"></a>提交数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add --all</span><br><span class="line">git commit -m &quot;My commit&quot;</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<h4 id="开分支"><a href="#开分支" class="headerlink" title="开分支"></a>开分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch 新分支名</span><br></pre></td></tr></table></figure>
<p>例如，在master分支下，新开一个开发分支：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch dev</span><br></pre></td></tr></table></figure></p>
<h4 id="切换到新的分支"><a href="#切换到新的分支" class="headerlink" title="切换到新的分支"></a>切换到新的分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout 分支名</span><br></pre></td></tr></table></figure>
<p>例如，在master分支下，切换到新开的dev：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout dev</span><br></pre></td></tr></table></figure></p>
<h4 id="开分支和切换分支合并到一个命令"><a href="#开分支和切换分支合并到一个命令" class="headerlink" title="开分支和切换分支合并到一个命令"></a>开分支和切换分支合并到一个命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b 新分支名</span><br></pre></td></tr></table></figure>
<p>例如，新开一个开发分支，并立即切换到该分支：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b dev</span><br></pre></td></tr></table></figure></p>
<h4 id="切换到原分支"><a href="#切换到原分支" class="headerlink" title="切换到原分支"></a>切换到原分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout 原分支名</span><br></pre></td></tr></table></figure>
<p>例如，切换回master：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br></pre></td></tr></table></figure></p>
<p><em>注意：当前分支有修改，还未commit的时候，会切换失败，应当先commit，但可以不用push</em></p>
<h4 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge 需要合并的分支名</span><br></pre></td></tr></table></figure>
<p>例如，刚刚已经切换回master，现在需要合并dev的内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge dev</span><br></pre></td></tr></table></figure></p>
<p><em>建议在GitLab(或者其他git系统)上面创建merge request的形式来进行分支的合并和代码审核。</em></p>
<h4 id="查看本地分支列表"><a href="#查看本地分支列表" class="headerlink" title="查看本地分支列表"></a>查看本地分支列表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure>
<p><em>前面带remotes/origin 的，是远程分支</em></p>
<h4 id="查看远程分支列表"><a href="#查看远程分支列表" class="headerlink" title="查看远程分支列表"></a>查看远程分支列表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r</span><br></pre></td></tr></table></figure>
<h4 id="向远程提交本地新开的分支"><a href="#向远程提交本地新开的分支" class="headerlink" title="向远程提交本地新开的分支"></a>向远程提交本地新开的分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin 新分支名</span><br></pre></td></tr></table></figure>
<p>例如，刚刚在master下新开的dev分支：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin dev</span><br></pre></td></tr></table></figure></p>
<h4 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a>删除远程分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin :远程分支名</span><br></pre></td></tr></table></figure>
<p>例如，删除刚刚提交到远程的dev分支：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin :dev</span><br></pre></td></tr></table></figure></p>
<h4 id="删除本地分支"><a href="#删除本地分支" class="headerlink" title="删除本地分支"></a>删除本地分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch 分支名称 -d</span><br></pre></td></tr></table></figure>
<p>例如，在master分支下，删除新开的dev分支：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch dev -d</span><br></pre></td></tr></table></figure></p>
<p><em>注意：如果dev的更改，push到远程，在GitLab(或者其他git系统)上面进行了merge操作，但是本地master没有pull最新的代码，会删除不成功，可以先<code>git pull origin master</code>，或者强制删除：<code>git branch dev -D</code></em></p>
<h4 id="更新分支列表信息"><a href="#更新分支列表信息" class="headerlink" title="更新分支列表信息"></a>更新分支列表信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch -p</span><br></pre></td></tr></table></figure>
<h3 id="git远程仓库搭建"><a href="#git远程仓库搭建" class="headerlink" title="git远程仓库搭建"></a>git远程仓库搭建</h3><p><em>可以使用git代码托管服务器，git的代码托管服务很多，名气最大的莫过于Github，其他还有GitLab、Bitbucket、CSDN-CODE、Git@OSC等等，如果代码比较重要，可以自己搭建git服务器,假设你已经有sudo权限的用户账号，下面，正式开始安装。</em></p>
<h4 id="第一步，安装git："><a href="#第一步，安装git：" class="headerlink" title="第一步，安装git："></a>第一步，安装git：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure>
<h4 id="第二步，创建一个git用户，用来运行git服务："><a href="#第二步，创建一个git用户，用来运行git服务：" class="headerlink" title="第二步，创建一个git用户，用来运行git服务："></a>第二步，创建一个git用户，用来运行git服务：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser git</span><br></pre></td></tr></table></figure>
<h4 id="第三步，创建证书："><a href="#第三步，创建证书：" class="headerlink" title="第三步，创建证书："></a>第三步，创建证书：</h4><p>证书的作用：一些软件(比如git)要请求远程机器上的数据,可以使用证书,就不用每次请求数据时都输入远程机器的用户名和密码了.</p>
<ol>
<li>终端根目录中输入：ssh-keygen -t rsa -C “<a href="mailto:wangshubin@eking.mobi" target="_blank" rel="noopener">wangshubin@eking.mobi</a>“ 然后一路回车</li>
<li>进入.ssh目录 cd ~/.ssh   (~是根目录)</li>
<li>cat id_rsa.pub</li>
<li>远程连接其他机器：ssh <a href="mailto:eking@xxx.xxx.xxx.xxx" target="_blank" rel="noopener">eking@xxx.xxx.xxx.xxx</a> 或者  sshpass -p ‘xxxxx’ ssh <a href="mailto:admin@xxx.xxx.xxx.xxx" target="_blank" rel="noopener">admin@xxx.xxx.xxx.xxx</a> （可以将此条命令建成sh文件，如果有很多远程机器需要维护，这样可以方便链接）</li>
<li>进入远程机器的.ssh目录   cd /home/git/.ssh</li>
<li>vi编辑authorized_keys文件(一般.ssh目录下就这一个文件) 将3步中生成的key添加到authorized_keys文件中，一行一个</li>
</ol>
<p><em>注:cd /home/git/.ssh(git指的是用户名,每个用户下会有一个.ssh文件夹,这个文件夹只有经过相应的ssh操作才会存在,不存在可以手动添加一个,authorized_keys文件如果不存在可以添加一个.)</em></p>
<h4 id="第四步，初始化Git仓库："><a href="#第四步，初始化Git仓库：" class="headerlink" title="第四步，初始化Git仓库："></a>第四步，初始化Git仓库：</h4><p>先选定一个目录作为Git仓库，假定是/srv/sample.git，在/srv目录下输入命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo git init --bare sample.git</span><br></pre></td></tr></table></figure></p>
<p><em>Git就会创建一个裸仓库，裸仓库没有工作区，因为服务器上的Git仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区，并且服务器上的Git仓库通常都以.git结尾。</em></p>
<p>然后，把owner改为git，让这个目录可以通过git用户访问：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R git:git sample.git</span><br></pre></td></tr></table></figure></p>
<h4 id="第五步，禁用shell登录："><a href="#第五步，禁用shell登录：" class="headerlink" title="第五步，禁用shell登录："></a>第五步，禁用shell登录：</h4><p>出于安全考虑，第二步创建的git用户不允许登录shell，这可以通过编辑/etc/passwd文件完成。找到类似下面的一行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git:x:1001:1001:,,,:/home/git:/bin/bash</span><br></pre></td></tr></table></figure></p>
<p>改为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell</span><br></pre></td></tr></table></figure></p>
<p>这样，git用户可以正常通过ssh使用git，但无法登录shell，因为我们为git用户指定的git-shell每次一登录就自动退出。</p>
<h4 id="第六步，克隆远程仓库："><a href="#第六步，克隆远程仓库：" class="headerlink" title="第六步，克隆远程仓库："></a>第六步，克隆远程仓库：</h4><p>现在，可以通过git clone命令克隆远程仓库了，在各自的电脑上运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@server:/srv/sample.git</span><br></pre></td></tr></table></figure>
<p>显示如下信息表明成功（前提这个库是空的）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Cloning into &apos;sample&apos;...</span><br><span class="line">warning: You appear to have cloned an empty repository.</span><br></pre></td></tr></table></figure></p>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ol>
<li>要方便管理公钥，用Gitosis；</li>
<li>要像SVN那样变态地控制权限，用Gitolite。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/05/31/Git使用/" data-id="ck71asp7q00b3sr9fsa8oe3j6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-web弹框插件设计" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/31/web弹框插件设计/" class="article-date">
  <time datetime="2016-05-31T11:26:47.000Z" itemprop="datePublished">2016-05-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实现方案/">实现方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/31/web弹框插件设计/">web弹框插件设计</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p><em>弹框一般项目都会用到，项目中的所有弹框要做到统一，需要对弹框组件做单独的整理维护</em></p>
<p>一般弹框分为：alert、confirm、promp、toast这么几种</p>
<p>设计一个通用的modal，其他（任何弹框、滑出形式组件）的组件基于modal实现，统一底层的实现，便于后期统一维护和修改，统一控制，这一点很重要。其实是使用了<strong>外观模式</strong>。根据参数个数判断参数的作用，实现类似重载功能，下面是简单的实现原理：<br><em>具体参考framework7源码modals.js</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">app.modal = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>)</span>&#123;</span><br><span class="line">    ……</span><br><span class="line">&#125;</span><br><span class="line">alert = <span class="function"><span class="keyword">function</span> (<span class="params">text, title, callbackOk</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> title === <span class="string">'function'</span>) &#123;</span><br><span class="line">        callbackOk = <span class="built_in">arguments</span>[<span class="number">1</span>];</span><br><span class="line">        title = <span class="literal">undefined</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> app.modal(options);</span><br><span class="line">&#125;;</span><br><span class="line">confirm = <span class="function"><span class="keyword">function</span> (<span class="params">text, title, callbackOk, callbackCancel</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> title === <span class="string">'function'</span>) &#123;</span><br><span class="line">        callbackCancel = <span class="built_in">arguments</span>[<span class="number">2</span>];</span><br><span class="line">        callbackOk = <span class="built_in">arguments</span>[<span class="number">1</span>];</span><br><span class="line">        title = <span class="literal">undefined</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> app.modal(options);</span><br><span class="line">&#125;;</span><br><span class="line">prompt = <span class="function"><span class="keyword">function</span> (<span class="params">text, title, callbackOk, callbackCancel,callbackOpened</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> title === <span class="string">'function'</span>) &#123;</span><br><span class="line">        callbackCancel = <span class="built_in">arguments</span>[<span class="number">2</span>];</span><br><span class="line">        callbackOk = <span class="built_in">arguments</span>[<span class="number">1</span>];</span><br><span class="line">        callbackOpened = <span class="built_in">arguments</span>[<span class="number">3</span>];</span><br><span class="line">        title = <span class="literal">undefined</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>  app.modal(options);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>如下是基于F7改造的一个jQuery插件（样式使用的还是F7的样式）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*========================================================</span></span><br><span class="line"><span class="comment"> * 弹出框</span></span><br><span class="line"><span class="comment"> * =======================================================*/</span></span><br><span class="line"><span class="comment">// TODO F7有些方法没实现,暂时不需要</span></span><br><span class="line">;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">$, window, document, undefined</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> modalStack = [];</span><br><span class="line">    <span class="keyword">var</span> _modalTemplateTempDiv = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">modal</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">        params = params || &#123;&#125;;</span><br><span class="line">        <span class="keyword">var</span> modalHTML = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">var</span> buttonsHTML = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">if</span> (params.buttons &amp;&amp; params.buttons.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; params.buttons.length; i++) &#123;</span><br><span class="line">                buttonsHTML += <span class="string">'&lt;span class="modal-button'</span> + (params.buttons[i].bold ? <span class="string">' modal-button-bold'</span> : <span class="string">''</span>) + <span class="string">'"&gt;'</span> + params.buttons[i].text + <span class="string">'&lt;/span&gt;'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> titleHTML = params.title ? <span class="string">'&lt;div class="modal-title"&gt;'</span> + params.title + <span class="string">'&lt;/div&gt;'</span> : <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">var</span> textHTML = params.text ? <span class="string">'&lt;div class="modal-text"&gt;'</span> + params.text + <span class="string">'&lt;/div&gt;'</span> : <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">var</span> afterTextHTML = params.afterText ? params.afterText : <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">var</span> noButtons = !params.buttons || params.buttons.length === <span class="number">0</span> ? <span class="string">'modal-no-buttons'</span> : <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">var</span> verticalButtons = params.verticalButtons ? <span class="string">'modal-buttons-vertical'</span> : <span class="string">''</span>;</span><br><span class="line">        modalHTML = <span class="string">'&lt;div class="modal '</span> + noButtons + <span class="string">' '</span> + (params.cssClass || <span class="string">''</span>) + <span class="string">'"&gt;&lt;div class="modal-inner"&gt;'</span> + (titleHTML + textHTML + afterTextHTML) + <span class="string">'&lt;/div&gt;&lt;div class="modal-buttons '</span> + verticalButtons + <span class="string">'"&gt;'</span> + buttonsHTML + <span class="string">'&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        _modalTemplateTempDiv.innerHTML = modalHTML;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> modal = $(_modalTemplateTempDiv).children();</span><br><span class="line"></span><br><span class="line">        $(<span class="string">'body'</span>).append(modal[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add events on buttons</span></span><br><span class="line">        modal.find(<span class="string">'.modal-button'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, el</span>) </span>&#123;</span><br><span class="line">            $(el).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (params.buttons[index].close !== <span class="literal">false</span>) closeModal(modal);</span><br><span class="line">                <span class="keyword">if</span> (params.buttons[index].onClick) params.buttons[index].onClick(modal, e);</span><br><span class="line">                <span class="keyword">if</span> (params.onClick) params.onClick(modal, index);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        openModal(modal);</span><br><span class="line">        <span class="keyword">return</span> modal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">openModal</span>(<span class="params">modal</span>) </span>&#123;</span><br><span class="line">        modal = $(modal);</span><br><span class="line">        <span class="keyword">var</span> isModal = modal.hasClass(<span class="string">'modal'</span>);</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="string">'.modal.modal-in:not(.modal-out)'</span>).length &amp;&amp; isModal) &#123;</span><br><span class="line">            modalStack.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                openModal(modal);</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// do nothing if this modal already shown</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">true</span> === modal.data(<span class="string">'f7-modal-shown'</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        modal.data(<span class="string">'f7-modal-shown'</span>, <span class="literal">true</span>);</span><br><span class="line">        modal.trigger(<span class="string">'close'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            modal.removeData(<span class="string">'f7-modal-shown'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (isModal) &#123;</span><br><span class="line">            modal.show();</span><br><span class="line">            modal.css(&#123;</span><br><span class="line">                marginTop: -<span class="built_in">Math</span>.round(modal.outerHeight() / <span class="number">2</span>) + <span class="string">'px'</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($(<span class="string">'.modal-overlay'</span>).length === <span class="number">0</span>) &#123;</span><br><span class="line">            $(<span class="string">'body'</span>).append(<span class="string">'&lt;div class="modal-overlay"&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> overlay = $(<span class="string">'.modal-overlay'</span>);</span><br><span class="line">        <span class="comment">//Make sure that styles are applied, trigger relayout;</span></span><br><span class="line">        <span class="keyword">var</span> clientLeft = modal[<span class="number">0</span>].clientLeft;<span class="comment">//这个不能删,删了actions动画没了.</span></span><br><span class="line">        <span class="comment">// Trugger open event</span></span><br><span class="line">        modal.trigger(<span class="string">'open'</span>);</span><br><span class="line">        <span class="comment">// Classes for transition in</span></span><br><span class="line">        overlay.addClass(<span class="string">'modal-overlay-visible'</span>);</span><br><span class="line">        modal.removeClass(<span class="string">'modal-out'</span>).addClass(<span class="string">'modal-in'</span>).transitionEnd(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (modal.hasClass(<span class="string">'modal-out'</span>)) modal.trigger(<span class="string">'closed'</span>);</span><br><span class="line">            <span class="keyword">else</span> modal.trigger(<span class="string">'opened'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">closeModal</span>(<span class="params">modal</span>) </span>&#123;</span><br><span class="line">        modal = $(modal || <span class="string">'.modal-in'</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> modal !== <span class="string">'undefined'</span> &amp;&amp; modal.length === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> isModal = modal.hasClass(<span class="string">'modal'</span>);</span><br><span class="line">        <span class="keyword">var</span> overlay = $(<span class="string">'.modal-overlay'</span>);</span><br><span class="line">        <span class="keyword">if</span> (overlay &amp;&amp; overlay.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            overlay.removeClass(<span class="string">'modal-overlay-visible'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        modal.trigger(<span class="string">'close'</span>);</span><br><span class="line">        modal.removeClass(<span class="string">'modal-in'</span>).addClass(<span class="string">'modal-out'</span>).transitionEnd(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (modal.hasClass(<span class="string">'modal-out'</span>)) modal.trigger(<span class="string">'closed'</span>);</span><br><span class="line">            <span class="keyword">else</span> modal.trigger(<span class="string">'opened'</span>);</span><br><span class="line">            modal.remove();</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (isModal) &#123;</span><br><span class="line">            modalStackClearQueue();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">modalStackClearQueue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (modalStack.length) &#123;</span><br><span class="line">            (modalStack.shift())();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> modalTitle = <span class="string">'提示'</span>;</span><br><span class="line">    <span class="keyword">var</span> modalButtonOk = <span class="string">'确定'</span>;</span><br><span class="line">    <span class="keyword">var</span> modalButtonCancel = <span class="string">'取消'</span>;</span><br><span class="line">    <span class="keyword">var</span> modalPreloaderTitle = <span class="string">'加载中'</span>;</span><br><span class="line">    $.extend(&#123;</span><br><span class="line">        alert: <span class="function"><span class="keyword">function</span> (<span class="params">text, title, callbackOk</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> title === <span class="string">'function'</span>) &#123;</span><br><span class="line">                callbackOk = <span class="built_in">arguments</span>[<span class="number">1</span>];</span><br><span class="line">                title = <span class="literal">undefined</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> modal(&#123;</span><br><span class="line">                text: text || <span class="string">''</span>,</span><br><span class="line">                title: <span class="keyword">typeof</span> title === <span class="string">'undefined'</span> ? modalTitle : title,</span><br><span class="line">                buttons: [</span><br><span class="line">                    &#123;<span class="attr">text</span>: modalButtonOk, <span class="attr">bold</span>: <span class="literal">true</span>, <span class="attr">onClick</span>: callbackOk&#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        confirm: <span class="function"><span class="keyword">function</span> (<span class="params">text, title, callbackOk, callbackCancel</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> title === <span class="string">'function'</span>) &#123;</span><br><span class="line">                callbackCancel = <span class="built_in">arguments</span>[<span class="number">2</span>];</span><br><span class="line">                callbackOk = <span class="built_in">arguments</span>[<span class="number">1</span>];</span><br><span class="line">                title = <span class="literal">undefined</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> modal(&#123;</span><br><span class="line">                text: text || <span class="string">''</span>,</span><br><span class="line">                title: <span class="keyword">typeof</span> title === <span class="string">'undefined'</span> ? modalTitle : title,</span><br><span class="line">                buttons: [</span><br><span class="line">                    &#123;<span class="attr">text</span>: modalButtonCancel, <span class="attr">onClick</span>: callbackCancel&#125;,</span><br><span class="line">                    &#123;<span class="attr">text</span>: modalButtonOk, <span class="attr">bold</span>: <span class="literal">true</span>, <span class="attr">onClick</span>: callbackOk&#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        showPreloader: <span class="function"><span class="keyword">function</span> (<span class="params">title</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> modal(&#123;</span><br><span class="line">                title: title || modalPreloaderTitle,</span><br><span class="line">                text: <span class="string">'&lt;div class="preloader"&gt;&lt;/div&gt;'</span>,</span><br><span class="line">                cssClass: <span class="string">'modal-preloader'</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        hidePreloader: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            closeModal(<span class="string">'.modal.modal-in'</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        showIndicator: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//$('body').append('&lt;div class="preloader-indicator-overlay"&gt;&lt;/div&gt;&lt;div class="preloader-indicator-modal"&gt;&lt;span class="preloader preloader-white"&gt;&lt;/span&gt;&lt;/div&gt;');</span></span><br><span class="line">            <span class="comment">//去掉全屏透明遮盖层</span></span><br><span class="line">            $(<span class="string">'body'</span>).append(<span class="string">'&lt;div class="preloader-indicator-modal"&gt;&lt;span class="preloader preloader-white"&gt;&lt;/span&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        hideIndicator: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'.preloader-indicator-overlay, .preloader-indicator-modal'</span>).remove();</span><br><span class="line">        &#125;,</span><br><span class="line">        toast: <span class="function"><span class="keyword">function</span> (<span class="params">text, closeCallBack</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> m = modal(&#123;</span><br><span class="line">                title: <span class="string">''</span>,</span><br><span class="line">                text: text</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">if</span> (closeCallBack) &#123;</span><br><span class="line">                m.on(<span class="string">"close"</span>, closeCallBack);</span><br><span class="line">            &#125;</span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                closeModal();</span><br><span class="line">            &#125;, <span class="number">1500</span>);</span><br><span class="line">            <span class="keyword">return</span> modal</span><br><span class="line">        &#125;,</span><br><span class="line">        actions: <span class="function"><span class="keyword">function</span> (<span class="params">params</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> modal, groupSelector, buttonSelector;</span><br><span class="line"></span><br><span class="line">            params = params || [];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (params.length &gt; <span class="number">0</span> &amp;&amp; !$.isArray(params[<span class="number">0</span>])) &#123;</span><br><span class="line">                params = [params];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> modalHTML;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> buttonsHTML = <span class="string">''</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; params[i].length; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (j === <span class="number">0</span>) buttonsHTML += <span class="string">'&lt;div class="actions-modal-group"&gt;'</span>;</span><br><span class="line">                    <span class="keyword">var</span> button = params[i][j];</span><br><span class="line">                    <span class="keyword">var</span> buttonClass = button.label ? <span class="string">'actions-modal-label'</span> : <span class="string">'actions-modal-button'</span>;</span><br><span class="line">                    <span class="keyword">if</span> (button.bold) buttonClass += <span class="string">' actions-modal-button-bold'</span>;</span><br><span class="line">                    <span class="keyword">if</span> (button.color) buttonClass += <span class="string">' color-'</span> + button.color;</span><br><span class="line">                    <span class="keyword">if</span> (button.bg) buttonClass += <span class="string">' bg-'</span> + button.bg;</span><br><span class="line">                    <span class="keyword">if</span> (button.disabled) buttonClass += <span class="string">' disabled'</span>;</span><br><span class="line">                    buttonsHTML += <span class="string">'&lt;div class="'</span> + buttonClass + <span class="string">'"&gt;'</span> + button.text + <span class="string">'&lt;/div&gt;'</span>;</span><br><span class="line">                    <span class="keyword">if</span> (j === params[i].length - <span class="number">1</span>) buttonsHTML += <span class="string">'&lt;/div&gt;'</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            modalHTML = <span class="string">'&lt;div class="actions-modal"&gt;'</span> + buttonsHTML + <span class="string">'&lt;/div&gt;'</span>;</span><br><span class="line">            _modalTemplateTempDiv.innerHTML = modalHTML;</span><br><span class="line">            modal = $(_modalTemplateTempDiv).children();</span><br><span class="line">            $(<span class="string">'body'</span>).append(modal[<span class="number">0</span>]);</span><br><span class="line">            groupSelector = <span class="string">'.actions-modal-group'</span>;</span><br><span class="line">            buttonSelector = <span class="string">'.actions-modal-button'</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> groups = modal.find(groupSelector);</span><br><span class="line">            groups.each(<span class="function"><span class="keyword">function</span> (<span class="params">index, el</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> groupIndex = index;</span><br><span class="line">                $(el).children().each(<span class="function"><span class="keyword">function</span> (<span class="params">index, el</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">var</span> buttonIndex = index;</span><br><span class="line">                    <span class="keyword">var</span> buttonParams = params[groupIndex][buttonIndex];</span><br><span class="line">                    <span class="keyword">var</span> clickTarget;</span><br><span class="line">                    <span class="keyword">if</span> ($(el).is(buttonSelector)) clickTarget = $(el);</span><br><span class="line">                    <span class="keyword">if</span> ($(el).find(buttonSelector).length &gt; <span class="number">0</span>) clickTarget = $(el).find(buttonSelector);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (clickTarget) &#123;</span><br><span class="line">                        clickTarget.on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">                            <span class="keyword">if</span> (buttonParams.close !== <span class="literal">false</span>) closeModal(modal);</span><br><span class="line">                            <span class="keyword">if</span> (buttonParams.onClick) buttonParams.onClick(modal, e);</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">            openModal(modal);</span><br><span class="line">            <span class="keyword">return</span> modal;</span><br><span class="line">        &#125;,</span><br><span class="line">        closeModal: closeModal</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)(jQuery, <span class="built_in">window</span>, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/05/31/web弹框插件设计/" data-id="ck71asp7u00b6sr9f7z8nqi93" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/弹框/">弹框</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-使用IntelliJ系列IDE，导致webpack-dev-server监听文件失效问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/29/使用IntelliJ系列IDE，导致webpack-dev-server监听文件失效问题/" class="article-date">
  <time datetime="2016-05-29T10:48:12.000Z" itemprop="datePublished">2016-05-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/构建/">构建</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/29/使用IntelliJ系列IDE，导致webpack-dev-server监听文件失效问题/">使用IntelliJ系列IDE，导致webpack-dev-server监听文件失效问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>在使用 IntelliJ系列IDE（比如WebStorm idea等），开始webpack-dev-server,修改文件并保存，webpack-dev-server并没有反应，由于IntelliJ系列IDE会吧文件修改存在一个临时文件中，并不会改变原始文件，而webpack-dev-server监听的又是原始文件，so…</p>
<p>解决办法：just change a setting</p>
<p>如下图将 Use “safe write” (save changes to a temporary file first) 去掉勾选。</p>
<p><img src="save-write.png" alt="save-write"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/05/29/使用IntelliJ系列IDE，导致webpack-dev-server监听文件失效问题/" data-id="ck71asp5o0059sr9f8zv6gcwe" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-React-周期函数" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/27/React-周期函数/" class="article-date">
  <time datetime="2016-05-27T02:45:07.000Z" itemprop="datePublished">2016-05-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/27/React-周期函数/">React 周期函数</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>对于React相关开发，理解React提供得几个周期函数尤为重要，这里简单总结一下，更多内容移步参考链接</p>
<h2 id="React生命周期图"><a href="#React生命周期图" class="headerlink" title="React生命周期图"></a>React生命周期图</h2><p><img src="React生命周期.png" alt="React生命周期图"></p>
<h2 id="周期函数说明"><a href="#周期函数说明" class="headerlink" title="周期函数说明"></a>周期函数说明</h2><table>
<thead>
<tr>
<th>生命周期函数</th>
<th>被调用次数</th>
<th>能否使用setState()</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>componentWillMount</td>
<td>1</td>
<td>是</td>
<td>首次渲染前的一些初始化操作，如果涉及到渲染之后的DOM操作，在componentDidMount进行。</td>
</tr>
<tr>
<td>render</td>
<td>&gt;=1</td>
<td>否</td>
<td>由于调用比较频繁，尽量少写逻辑，除了获取state，props属性之外的一些变量声明不要在这里做，大块的业务逻辑封装成方法，提出render，保持render清晰简洁。</td>
</tr>
<tr>
<td>componentDidMount</td>
<td>1</td>
<td>是</td>
<td>尽量不要在此方法中使用setState，初始化setState操作请在componentWillMount做。</td>
</tr>
<tr>
<td>componentWillReceiveProps(object nextProps)</td>
<td>&gt;=0</td>
<td>是</td>
<td>提供了接受新的props之后操作state得机会</td>
</tr>
<tr>
<td>shouldComponentUpdate(object nextProps, object nextState)</td>
<td>&gt;=0</td>
<td>否</td>
<td>返回false render不会执行，可以通过此方法优化性能。</td>
</tr>
<tr>
<td>componentWillUpdate(object nextProps, object nextState)</td>
<td>&gt;=0</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>componentDidUpdate(object prevProps, object prevState)</td>
<td>&gt;=0</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>componentWillUnmount</td>
<td>1</td>
<td>否</td>
<td></td>
</tr>
</tbody>
</table>
<p>参考链接：<br><a href="http://www.open-open.com/lib/view/open1446022707992.html" target="_blank" rel="noopener">http://www.open-open.com/lib/view/open1446022707992.html</a></p>
<p><a href="http://reactjs.cn/react/docs/component-specs.html" target="_blank" rel="noopener">http://reactjs.cn/react/docs/component-specs.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/05/27/React-周期函数/" data-id="ck71asp2h001ksr9fe5blv3sv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-node-项目中的模块" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/22/node-项目中的模块/" class="article-date">
  <time datetime="2016-05-21T16:38:14.000Z" itemprop="datePublished">2016-05-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/后端/">后端</a>►<a class="article-category-link" href="/categories/后端/node/">node</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/22/node-项目中的模块/">node 项目中的模块</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>项目中使用到的一些modules的介绍</p>
<h2 id="ejs-mate"><a href="#ejs-mate" class="headerlink" title="ejs-mate"></a><a href="https://www.npmjs.com/package/ejs-mate" target="_blank" rel="noopener">ejs-mate</a></h2><p>模板语言 </p>
<h2 id="oneapm"><a href="#oneapm" class="headerlink" title="oneapm"></a><a href="http://www.oneapm.com/" target="_blank" rel="noopener">oneapm</a></h2><p>oneapm 是个用来监控网站性能的服务,性能监控解决方案</p>
<h2 id="colors"><a href="#colors" class="headerlink" title="colors"></a><a href="https://www.npmjs.com/package/colors" target="_blank" rel="noopener">colors</a></h2><p>get colors in your node.js console.</p>
<p>两种使用方式：</p>
<p>扩展String.prototype<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">require(&apos;colors&apos;);</span><br><span class="line"></span><br><span class="line"> console.log(&apos;hello&apos;.green); // outputs green text</span><br><span class="line"> console.log(&apos;i like cake and pies&apos;.underline.red) // outputs red underlined text</span><br><span class="line"> console.log(&apos;inverse the color&apos;.inverse); // inverses the color</span><br><span class="line"> console.log(&apos;OMG Rainbows!&apos;.rainbow); // rainbow</span><br><span class="line"> console.log(&apos;Run the trap&apos;.trap); // Drops the bass</span><br></pre></td></tr></table></figure></p>
<p>不扩展String.prototype<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var colors = require(&apos;colors/safe&apos;);</span><br><span class="line"></span><br><span class="line">console.log(colors.green(&apos;hello&apos;)); // outputs green text</span><br><span class="line">console.log(colors.red.underline(&apos;i like cake and pies&apos;)) // outputs red underlined text</span><br><span class="line">console.log(colors.inverse(&apos;inverse the color&apos;)); // inverses the color</span><br><span class="line">console.log(colors.rainbow(&apos;OMG Rainbows!&apos;)); // rainbow</span><br><span class="line">console.log(colors.trap(&apos;Run the trap&apos;)); // Drops the bass</span><br></pre></td></tr></table></figure></p>
<h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a><a href="https://www.npmjs.com/package/loader" target="_blank" rel="noopener">loader</a></h2><p>Node静态资源加载器。该模块通过两个步骤配合完成，代码部分根据环境生成标签。上线时，需要调用minify方法进行静态资源的合并和压缩。</p>
<h2 id="express"><a href="#express" class="headerlink" title="express"></a><a href="http://www.expressjs.com.cn/" target="_blank" rel="noopener">express</a></h2><p>基于 Node.js 平台，快速、开放、极简的 web 开发框架。</p>
<h2 id="express-session"><a href="#express-session" class="headerlink" title="express-session"></a><a href="https://www.npmjs.com/package/express-session" target="_blank" rel="noopener">express-session</a></h2><p>Simple session middleware for Express</p>
<h2 id="passport"><a href="#passport" class="headerlink" title="passport"></a><a href="https://www.npmjs.com/package/passport" target="_blank" rel="noopener">passport</a></h2><p>兼容express的身份认证中间件</p>
<h2 id="loadash"><a href="#loadash" class="headerlink" title="loadash"></a><a href="https://lodash.com/" target="_blank" rel="noopener">loadash</a></h2><p>javascript 的一个工具库，类似underscore的一个东西</p>
<h2 id="csurf"><a href="#csurf" class="headerlink" title="csurf"></a><a href="https://www.npmjs.com/package/csurf" target="_blank" rel="noopener">csurf</a></h2><p>Node.js CSRF protection middleware. Cross-site request forgery跨站请求伪造</p>
<h2 id="compression"><a href="#compression" class="headerlink" title="compression"></a><a href="https://www.npmjs.com/package/compression" target="_blank" rel="noopener">compression</a></h2><p>nodejs 压缩中间件,http请求返回的资源进行压缩？</p>
<h2 id="body-parser"><a href="#body-parser" class="headerlink" title="body-parser"></a><a href="https://www.npmjs.com/package/body-parser" target="_blank" rel="noopener">body-parser</a></h2><p>Node.js body parsing middleware.</p>
<h2 id="connect-busboy"><a href="#connect-busboy" class="headerlink" title="connect-busboy"></a><a href="https://www.npmjs.com/package/connect-busboy" target="_blank" rel="noopener">connect-busboy</a></h2><p>Connect middleware for busboy</p>
<h2 id="errorhandler"><a href="#errorhandler" class="headerlink" title="errorhandler"></a><a href="https://www.npmjs.com/package/errorhandler" target="_blank" rel="noopener">errorhandler</a></h2><h2 id="helmet"><a href="#helmet" class="headerlink" title="helmet"></a><a href="https://www.npmjs.com/package/helmet" target="_blank" rel="noopener">helmet</a></h2><p>Helmet是一系列帮助增强Node.JS之Express/Connect等Javascript Web应用安全的中间件。</p>
<p>一些著名的对Web攻击有XSS跨站脚本， 脚本注入 clickjacking 以及各种非安全的请求等对Node.js的Web应用构成各种威胁，使用Helmet能帮助你的应用避免这些攻击。</p>
<h2 id="url"><a href="#url" class="headerlink" title="url"></a><a href="https://www.npmjs.com/package/url" target="_blank" rel="noopener">url</a></h2><p>提取url的各种信息</p>
<h2 id="response-time"><a href="#response-time" class="headerlink" title="response-time"></a><a href="https://www.npmjs.com/package/response-time" target="_blank" rel="noopener">response-time</a></h2><p>This module creates a middleware that records the response time for requests in HTTP servers. The “response time” is defined here as the elapsed time from when a request enters this middleware to when the headers are written out to the client.</p>
<h2 id="method-override"><a href="#method-override" class="headerlink" title="method-override"></a><a href="https://www.npmjs.com/package/method-override" target="_blank" rel="noopener">method-override</a></h2><p>Lets you use HTTP verbs such as PUT or DELETE in places where the client doesn’t support it.</p>
<h2 id="cookie-parser"><a href="#cookie-parser" class="headerlink" title="cookie-parser"></a><a href="https://www.npmjs.com/package/cookie-parser" target="_blank" rel="noopener">cookie-parser</a></h2><p>cookie parsing with signatures</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/05/22/node-项目中的模块/" data-id="ck71asp46003rsr9f9ygkmwf9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-MongoDB-从懵逼到入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/19/MongoDB-从懵逼到入门/" class="article-date">
  <time datetime="2016-05-19T13:50:53.000Z" itemprop="datePublished">2016-05-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/后端/">后端</a>►<a class="article-category-link" href="/categories/后端/数据库/">数据库</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/19/MongoDB-从懵逼到入门/">MongoDB-从懵逼到入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>根据<a href="https://docs.mongodb.com/manual/installation/" target="_blank" rel="noopener">官网</a>进行安装。</p>
<p><a href="http://askubuntu.com/questions/617097/mongodb-2-6-does-not-start-on-ubuntu-15-04" target="_blank" rel="noopener">ubuntu 15 安装完成之后无法使用解决办法</a>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install upstart-sysv</span><br><span class="line">重启之后，就可以使用了。</span><br></pre></td></tr></table></figure></p>
<h2 id="启动-amp-停止"><a href="#启动-amp-停止" class="headerlink" title="启动&amp;停止"></a>启动&amp;停止</h2><p>官网上有相关文档，一切以官网为主</p>
<h3 id="终端方式"><a href="#终端方式" class="headerlink" title="终端方式"></a>终端方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 启动</span><br><span class="line">mongod</span><br><span class="line"># 停止</span><br><span class="line">关闭当前终端即可</span><br></pre></td></tr></table></figure>
<h3 id="后台运行方式"><a href="#后台运行方式" class="headerlink" title="后台运行方式"></a>后台运行方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 启动 添加--fork参数 --logpath：指定日志文件 --logappend：日志以追加方式记录</span><br><span class="line">mongod --fork --logpath /var/log/mongodb.log --logappend</span><br><span class="line"></span><br><span class="line"># 停止 通过admin数据库命令停止</span><br><span class="line">mongo</span><br><span class="line">use admin</span><br><span class="line">db.shutdownServer()</span><br></pre></td></tr></table></figure>
<h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><p><a href="http://askubuntu.com/questions/147135/how-can-i-uninstall-mongodb-and-reinstall-the-latest-version" target="_blank" rel="noopener">http://askubuntu.com/questions/147135/how-can-i-uninstall-mongodb-and-reinstall-the-latest-version</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get purge mongodb mongodb-clients mongodb-server mongodb-dev</span><br><span class="line">sudo apt-get purge mongodb-10gen</span><br><span class="line">sudo apt-get autoremove</span><br></pre></td></tr></table></figure></p>
<h2 id="常用shell命令"><a href="#常用shell命令" class="headerlink" title="常用shell命令"></a>常用shell命令</h2><ul>
<li>查看当前数据库：<code>db</code></li>
<li>查看有那些数据库：<code>show dbs</code></li>
<li>切换数据库：<code>use db_name</code></li>
<li>查看集合：<code>show collections</code></li>
<li>查询：<code>db.collection_name.find()</code></li>
<li>插入：<code>db.collection_name.insert(obj)</code></li>
<li>更新：<code>db.collection_name.update(condition,newObj)</code></li>
</ul>
<h2 id="导入导出"><a href="#导入导出" class="headerlink" title="导入导出"></a>导入导出</h2><p><a href="http://www.jb51.net/article/52498.htm" target="_blank" rel="noopener">更多参考这里</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">导出数据库：</span><br><span class="line">mongodump -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 -o 保存导出文件路径</span><br><span class="line"></span><br><span class="line">如果没有用户密码，可以去掉-u和-p。</span><br><span class="line">如果导出本机的数据库，可以去掉-h。</span><br><span class="line">如果是默认端口，可以去掉--port。</span><br><span class="line">如果想导出所有数据库，可以去掉-d。</span><br><span class="line"></span><br><span class="line">导入数据库：</span><br><span class="line">mongorestore -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 --drop 文件存在路径</span><br><span class="line"></span><br><span class="line">--drop的意思是，先删除所有的记录，然后恢复</span><br><span class="line"></span><br><span class="line">导出表：</span><br><span class="line">mongoexport -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 -c 表名 -f 字段 -q 条件导出 --csv -o 文件名</span><br><span class="line"></span><br><span class="line">-f 导出指字段，以字号分割，-f name,email,age导出name,email,age这三个字段</span><br><span class="line">-q 可以根查询条件导出，-q &apos;&#123; &quot;uid&quot; : &quot;100&quot; &#125;&apos; 导出uid为100的数据</span><br><span class="line">--csv 表示导出的文件格式为csv的，这个比较有用，因为大部分的关系型数据库都是支持csv，在这里有共同点</span><br><span class="line"></span><br><span class="line">导入表：</span><br><span class="line">1.1,还原整表导出的非csv文件</span><br><span class="line">mongoimport -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 -c 表名 --upsert --drop 文件名  </span><br><span class="line">重点说一下--upsert，其他参数上面的命令已有提到，--upsert 插入或者更新现有数据</span><br><span class="line"></span><br><span class="line">1.2,还原部分字段的导出文件</span><br><span class="line">mongoimport -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 -c 表名 --upsertFields 字段 --drop 文件名  </span><br><span class="line">--upsertFields根--upsert一样</span><br><span class="line"></span><br><span class="line">1.3,还原导出的csv文件</span><br><span class="line">mongoimport -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 -c 表名 --type 类型 --headerline --upsert --drop 文件名  </span><br><span class="line">上面三种情况，还可以有其他排列组合的。</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/05/19/MongoDB-从懵逼到入门/" data-id="ck71asp280010sr9f96j50t9c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mongodb/">mongodb</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-使用序列生成id" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/17/使用序列生成id/" class="article-date">
  <time datetime="2016-05-17T06:02:39.000Z" itemprop="datePublished">2016-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实现方案/">实现方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/17/使用序列生成id/">使用序列生成id</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>注：</p>
<ol>
<li>分表分库，使用自增id的方式，会出现id重复的情况</li>
<li>要保证id的任何情况下的唯一性，最好不用数据库自增id</li>
<li>自增id有规律，容易被爬虫，（但是有些情况欢迎被爬，但是用户之类的信息就要避免被爬了。）</li>
<li>不局限于user_id，任何需要保护的id都可以使用</li>
<li>使用统一的一个表，维护各个表数据的id，保证id唯一的同时，可以对id进行混淆。</li>
</ol>
<p>表设计：sequences<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`sequences`</span> (</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'名称，可以等同于表名'</span>,</span><br><span class="line">  <span class="string">`name_space`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'名称空间'</span>,</span><br><span class="line">  <span class="string">`step`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'步进长度'</span>,</span><br><span class="line">  <span class="string">`next_id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'下一个id'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`name`</span>,<span class="string">`name_space`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4;</span><br></pre></td></tr></table></figure></p>
<p>算法（python）：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> exc</span><br><span class="line"><span class="keyword">from</span> app.commons <span class="keyword">import</span> stringutil</span><br><span class="line"><span class="keyword">from</span> configs.database_builder <span class="keyword">import</span> DatabaseBuilder</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DatabaseSequenceFactory</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">""" 所有Dao对象需要集成DatabaseTemplate</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    sequences = dict()  <span class="comment"># 缓存系统中所有的id</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, database_factory=None, alphabet=None)</span>:</span></span><br><span class="line">        self._default_db = DatabaseBuilder.get_default_db_instance() <span class="keyword">if</span> database_factory <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">else</span> database_factory</span><br><span class="line">        self.alphabet = <span class="string">"wWBLCMPZbH2GFszTogYu93JNDfIlVmneRx6tkAvKU51r8XOidpchEjQqS7a40y"</span> <span class="keyword">if</span> alphabet <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">else</span> alphabet</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_id</span><span class="params">(self, name_space, name)</span>:</span>  <span class="comment"># 默认为当前项目的name_space 具体项目要修改这个默认值</span></span><br><span class="line">        sequence_key = <span class="string">"%r:%r"</span> % (name_space, name)</span><br><span class="line">        sequence = self.sequences.get(sequence_key)</span><br><span class="line">        <span class="keyword">if</span> sequence <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> len(sequence) == <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># id消费完了,重新获取一组</span></span><br><span class="line">            start_id, step = self._get_start_id_step(name_space, name)</span><br><span class="line">            sequence = deque(range(start_id, start_id+step))</span><br><span class="line">            self.sequences[sequence_key] = sequence</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sequence.popleft()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_obfuscated_id</span><span class="params">(self, name_space, name, alphabet=None, has_random=False, random_length=<span class="number">1</span>, is_prefix=True)</span>:</span></span><br><span class="line">        result = stringutil.base62_encode(self.get_id(name_space, name),</span><br><span class="line">                                          alphabet <span class="keyword">if</span> alphabet <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">else</span> self.alphabet)</span><br><span class="line">        <span class="keyword">if</span> has_random:</span><br><span class="line">            random_str = <span class="string">''</span>.join(random.sample(string.ascii_letters+string.digits, random_length))</span><br><span class="line">            result = random_str+<span class="string">'_'</span>+result <span class="keyword">if</span> is_prefix <span class="keyword">else</span> result+<span class="string">'_'</span>+random_str</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_get_start_id_step</span><span class="params">(self, name_space, name)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param name_space:</span></span><br><span class="line"><span class="string">        :param name:</span></span><br><span class="line"><span class="string">        :return: tupple (start_id, step)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> self._default_db.create_connection() <span class="keyword">as</span> connection:</span><br><span class="line">            update_sql = <span class="string">"update sequences set next_id = last_insert_id(next_id+step) where name=%s and name_space=%s"</span></span><br><span class="line">            select_sql = <span class="string">"select last_insert_id()-step as start_id, step from sequences "</span> +\</span><br><span class="line">                         <span class="string">"where name=%s and name_space=%s"</span></span><br><span class="line">            result = connection.execute(update_sql, name, name_space)</span><br><span class="line">            <span class="keyword">if</span> result.rowcount == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">raise</span> exc.ArgumentError(<span class="string">"sequence is not exist namespace:%r name:%r"</span> % (name_space, name))</span><br><span class="line">            entity = connection.execute(select_sql, name, name_space).first()</span><br><span class="line">            <span class="keyword">return</span> entity[<span class="number">0</span>], entity[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    DatabaseBuilder.run_mode = <span class="string">'test'</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">100000</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">print</span> DatabaseSequenceFactory().get_id(<span class="string">'aiwanr'</span>,<span class="string">'hehe'</span>)</span><br><span class="line">        <span class="comment"># print DatabaseSequenceFactory().get_obfuscated_id('aiwanr','users')</span></span><br><span class="line">        <span class="comment"># print DatabaseSequenceFactory().get_obfuscated_id('aiwanr','users', has_random=True)</span></span><br><span class="line">        <span class="comment"># print DatabaseSequenceFactory().get_obfuscated_id('aiwanr','users', has_random=True, random_length=2, is_prefix=False)</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/05/17/使用序列生成id/" data-id="ck71asp5q005csr9fceasqcb7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-人员管理数据库设计" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/17/人员管理数据库设计/" class="article-date">
  <time datetime="2016-05-17T03:58:06.000Z" itemprop="datePublished">2016-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实现方案/">实现方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/17/人员管理数据库设计/">人员管理数据库设计</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><p>视情况而定，三张表或四张表：</p>
<ul>
<li>users 用户基本信息表，用于存放用户id，姓名、性别、头像等常用信息</li>
<li>accounts 用户账号表，users：accounts 1：n，用于存储用户账号、登录时间、登录ip等信息（多类型账号支持）</li>
<li>passwords 账号对应的密码 accounts：passwords n：1，多个账号都可以登录使用同一个密码。</li>
<li>profiles 用户其他信息，users：profiles 1：1，用于存放一些不常用的信息，比如邮箱，工作，职位等等。</li>
</ul>
<p>为什么1:1的两个表，不直接合并成一个表？常用信息使用一个表，不常用信息使用一个表，可以提高查询速度，信息如果区分的好，单表的查询要远远多于两个表的关联查询，比如users表和profiles表，“用户名”这样的信息会频繁用到，而“单位”，则不是很常用。需要同时显示的时候，做一下关联查询即可。</p>
<h3 id="用户敏感信息处理："><a href="#用户敏感信息处理：" class="headerlink" title="用户敏感信息处理："></a>用户敏感信息处理：</h3><ol>
<li>密码加密：用户密码进行加密处理</li>
<li>密码添加salt（一个随机字符串，每个用户有个唯一的salt），确保即使密码明文相同，加密过后的密码也不相同</li>
<li>user_id，通过一个序列算法生成（详见《使用序列生成id》），防止分表分库user_id出现重复，防止恶意爬虫，获取有规律的user_id</li>
</ol>
<p>一个python中的加密算法：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_encrypted_password</span><span class="params">(password, salt)</span>:</span></span><br><span class="line">  <span class="string">"""</span></span><br><span class="line"><span class="string">   * 密码加密</span></span><br><span class="line"><span class="string">   * @param string password 密码</span></span><br><span class="line"><span class="string">   * @param string salt 混淆码</span></span><br><span class="line"><span class="string">   * @return string 加密后的密码</span></span><br><span class="line"><span class="string">  """</span></span><br><span class="line">  <span class="keyword">return</span> hashlib.md5(hashlib.md5(password).hexdigest() + salt).hexdigest()</span><br></pre></td></tr></table></figure></p>
<h3 id="users、accounts、passwords表创建语句："><a href="#users、accounts、passwords表创建语句：" class="headerlink" title="users、accounts、passwords表创建语句："></a>users、accounts、passwords表创建语句：</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`users`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`user_id`</span> <span class="built_in">varchar</span>(<span class="number">36</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> <span class="keyword">ascii</span> <span class="keyword">COLLATE</span> ascii_bin <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户id'</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'姓名/昵称 用户姓名和昵称'</span>,</span><br><span class="line">  <span class="string">`avatar`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`gender`</span> <span class="built_in">char</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'N'</span> <span class="keyword">COMMENT</span> <span class="string">'性别: N-unknown M-man F-female'</span>,</span><br><span class="line">  <span class="string">`is_locked`</span> tinyint(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`created_at`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`updated_at`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`index_user_id`</span> (<span class="string">`user_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">111</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`accounts`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`user_id`</span> <span class="built_in">varchar</span>(<span class="number">36</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> <span class="keyword">ascii</span> <span class="keyword">COLLATE</span> ascii_bin <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`account_type`</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">80</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`last_visit_ip`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`last_login_ip`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`fail_count`</span> <span class="built_in">int</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`locked_at`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`created_at`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`updated_at`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`idx_accounts_actAc`</span> (<span class="string">`account_type`</span>,<span class="string">`name`</span>) <span class="keyword">USING</span> BTREE</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">160</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`passwords`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`account_id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`hashed_password`</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`salt`</span> <span class="built_in">varchar</span>(<span class="number">5</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`created_at`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`updated_at`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`idx_passwords_aid`</span> (<span class="string">`account_id`</span>) <span class="keyword">USING</span> BTREE</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">162</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/05/17/人员管理数据库设计/" data-id="ck71asp5n0056sr9fu6e9ajux" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-利用HTML和CSS实现常见的布局" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/09/利用HTML和CSS实现常见的布局/" class="article-date">
  <time datetime="2016-05-09T09:25:07.000Z" itemprop="datePublished">2016-05-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/转载/">转载</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/09/利用HTML和CSS实现常见的布局/">利用HTML和CSS实现常见的布局</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p><a href="https://segmentfault.com/a/1190000003931851" target="_blank" rel="noopener">https://segmentfault.com/a/1190000003931851</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/05/09/利用HTML和CSS实现常见的布局/" data-id="ck71asp5y005tsr9f5ptrpw3i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/布局/">布局</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-CSS-Secrets阅读笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/27/CSS-Secrets阅读笔记/" class="article-date">
  <time datetime="2016-04-27T07:36:43.000Z" itemprop="datePublished">2016-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/CSS/">CSS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/27/CSS-Secrets阅读笔记/">CSS Secrets阅读笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <style>
  .demo-box{
    position:relative;
    width:300px;
    height:300px;
    background: #f06;
    background: linear-gradient(45deg, #f06, yellow);
  }
  .inner-box{
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%, -50%);
    width:200px;
    height:200px;  
  }
</style>

<h2 id="透明边框"><a href="#透明边框" class="headerlink" title="透明边框"></a>透明边框</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="built_in">hsla</span>(0,0%,100%,.5);</span><br><span class="line">  <span class="attribute">background</span>: white;</span><br><span class="line">  <span class="attribute">background-clip</span>: padding-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主要属性：</p>
<ul>
<li>边框颜色使用hsla或者rgba</li>
<li>background-clip设置为padding-box;即背景为padding+content</li>
</ul>
<p>background-clip三个值：</p>
<ul>
<li>border-box    背景被裁剪到边框盒。</li>
<li>padding-box    背景被裁剪到内边距框。</li>
<li>content-box    背景被裁剪到内容框。</li>
</ul>
<p>效果如下：</p>
<style>
.translucent-borders{
  border:10px solid hsla(0,0%,100%,.5);
  background:white;
  background-clip:padding-box;
}
</style>

<div class="demo-box"><br>  <div class="translucent-borders inner-box"></div><br></div>

<p>官方示例：<a href="http://play.csssecrets.io/translucent-borders" target="_blank" rel="noopener">http://play.csssecrets.io/translucent-borders</a></p>
<h2 id="多重边框"><a href="#多重边框" class="headerlink" title="多重边框"></a>多重边框</h2><h3 id="box-shadow-方案"><a href="#box-shadow-方案" class="headerlink" title="box-shadow 方案"></a>box-shadow 方案</h3><p>box-shadow语法：</p>
<p><code>box-shadow: h-shadow v-shadow blur spread color inset;</code></p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>h-shadow</td>
<td>必需。水平阴影的位置。允许负值。</td>
</tr>
<tr>
<td>v-shadow</td>
<td>必需。垂直阴影的位置。允许负值。</td>
</tr>
<tr>
<td>blur</td>
<td>可选。模糊距离。</td>
</tr>
<tr>
<td>spread</td>
<td>可选。阴影的尺寸。</td>
</tr>
<tr>
<td>color</td>
<td>可选。阴影的颜色。请参阅 CSS 颜色值。</td>
</tr>
<tr>
<td>inset</td>
<td>可选。将外部阴影 (outset) 改为内部阴影。</td>
</tr>
</tbody>
</table>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#655</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<style>
  .box-shadow-one-borders{
    background: yellowgreen;
    box-shadow: 0 0 0 10px #655;
  }
</style>

<div class="demo-box"><br>  <div class="box-shadow-one-borders inner-box"></div><br></div>

<p>两个边框：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#655</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span> deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<style>
  .box-shadow-two-borders{
    background: yellowgreen;
    box-shadow: 0 0 0 10px #655, 0 0 0 15px deeppink;
  }
</style>

<div class="demo-box"><br>  <div class="box-shadow-two-borders inner-box"></div><br></div>

<p>三个边框：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#655</span>,</span><br><span class="line">  <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span> deeppink,</span><br><span class="line">  <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">#632</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<style>
  .box-shadow-three-borders{
    background: yellowgreen;
    box-shadow: 0 0 0 10px #655,
    0 0 0 15px deeppink,
    0 0 0 20px #632;
    border-radius:5px;
    border:5px dashed #000;
  }
</style>

<div class="demo-box"><br>  <div class="box-shadow-three-borders inner-box"></div><br></div>

<p>几点说明：</p>
<ul>
<li>shadows会忽略box-sizing属性，阴影是加在盒子之外的，可以使用 box-shadow 的 inset 属性解决这个问题。</li>
<li>shadows会忽略hover click等鼠标事件，同样可以使用inset属性解决，如果有内容，可以使用padding属性，把shadows的空间留出来。</li>
<li>不支持dashed边框</li>
</ul>
<p>官方示例：<a href="http://play.csssecrets.io/multiple-borders" target="_blank" rel="noopener">http://play.csssecrets.io/multiple-borders</a></p>
<h3 id="outline-方案"><a href="#outline-方案" class="headerlink" title="outline 方案"></a>outline 方案</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="number">#655</span>;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">15px</span> solid deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<style>
  .out-line-borders{
    background: yellowgreen;
    border: 5px dashed #655;
    outline: 15px solid deeppink;
  }
</style>

<div class="demo-box"><br>  <div class="out-line-borders inner-box"></div><br></div>

<h2 id="背景位置右下角"><a href="#背景位置右下角" class="headerlink" title="背景位置右下角"></a>背景位置右下角</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">方案一</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">url</span>(http://csssecrets.io/images/code-pirate.svg)</span><br><span class="line">	            no-repeat bottom right <span class="number">#58a</span>;</span><br><span class="line">	<span class="attribute">background-position</span>: right <span class="number">20px</span> bottom <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line">方案二</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">url</span>(http://csssecrets.io/images/code-pirate.svg)</span><br><span class="line">	            no-repeat bottom right <span class="number">#58a</span>;</span><br><span class="line">	<span class="attribute">background-origin</span>: content-box;</span><br><span class="line">&#125;</span><br><span class="line">方案三</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">url</span>(http://csssecrets.io/images/code-pirate.svg)</span><br><span class="line">	            no-repeat bottom right <span class="number">#58a</span>;</span><br><span class="line">	<span class="attribute">background-position</span>: <span class="built_in">calc</span>(100% - 20px) <span class="built_in">calc</span>(100% - 10px);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="内圆角"><a href="#内圆角" class="headerlink" title="内圆角"></a>内圆角</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">	<span class="attribute">outline</span>: .<span class="number">6em</span> solid <span class="number">#655</span>;</span><br><span class="line">	<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> .<span class="number">4em</span> <span class="number">#655</span>; <span class="comment">/* todo calculate max of this */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="条纹背景"><a href="#条纹背景" class="headerlink" title="条纹背景"></a>条纹背景</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#58a</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">repeating-linear-gradient</span>(30deg,</span><br><span class="line">              hsla(0,0%,100%,.1), <span class="built_in">hsla</span>(0,0%,100%,.1) <span class="number">15px</span>,</span><br><span class="line">              transparent <span class="number">0</span>, transparent <span class="number">30px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="随机条纹背景"><a href="#随机条纹背景" class="headerlink" title="随机条纹背景"></a>随机条纹背景</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">hsl</span>(20, 40%, 90%);</span><br><span class="line">  <span class="attribute">background-image</span>:</span><br><span class="line">  	<span class="built_in">linear-gradient</span>(90deg, #fb3 11px, transparent 0),</span><br><span class="line">  	<span class="built_in">linear-gradient</span>(90deg, #ab4 23px, transparent 0),</span><br><span class="line">  	<span class="built_in">linear-gradient</span>(90deg, #655 23px, transparent 0);</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">83px</span> <span class="number">100%</span>, <span class="number">61px</span> <span class="number">100%</span>, <span class="number">41px</span> <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>各种背景：<a href="http://lea.verou.me/css3patterns/" target="_blank" rel="noopener">http://lea.verou.me/css3patterns/</a> <a href="http://bennettfeely.com/gradients/" target="_blank" rel="noopener">http://bennettfeely.com/gradients/</a></p>
<p>各种按钮：<a href="http://simurai.com/archive/buttons/" target="_blank" rel="noopener">http://simurai.com/archive/buttons/</a></p>
<h2 id="容器倾斜文字不倾斜"><a href="#容器倾斜文字不倾斜" class="headerlink" title="容器倾斜文字不倾斜"></a>容器倾斜文字不倾斜</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">方案一</span><br><span class="line"><span class="selector-class">.button</span> &#123; <span class="attribute">transform</span>: <span class="built_in">skewX</span>(45deg); &#125;</span><br><span class="line"><span class="selector-class">.button</span> &gt; <span class="selector-tag">div</span> &#123; <span class="attribute">transform</span>: <span class="built_in">skewX</span>(-45deg); &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: inline-block;</span><br><span class="line">	<span class="attribute">padding</span>: .<span class="number">5em</span> <span class="number">1em</span>;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">0</span>; <span class="attribute">margin</span>: .<span class="number">5em</span>;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#58a</span>;</span><br><span class="line">	<span class="attribute">color</span>: white;</span><br><span class="line">	<span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">	<span class="attribute">text-decoration</span>: none;</span><br><span class="line">	<span class="attribute">font</span>: bold <span class="number">200%</span>/<span class="number">1</span> sans-serif;</span><br><span class="line">&#125;</span><br><span class="line">方案二</span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">	<span class="attribute">position</span>: relative;</span><br><span class="line">	<span class="attribute">display</span>: inline-block;</span><br><span class="line">	<span class="attribute">padding</span>: .<span class="number">5em</span> <span class="number">1em</span>;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">0</span>; <span class="attribute">margin</span>: .<span class="number">5em</span>;</span><br><span class="line">	<span class="attribute">background</span>: transparent;</span><br><span class="line">	<span class="attribute">color</span>: white;</span><br><span class="line">	<span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">	<span class="attribute">text-decoration</span>: none;</span><br><span class="line">	<span class="attribute">font</span>: bold <span class="number">200%</span>/<span class="number">1</span> sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">	<span class="attribute">content</span>: <span class="string">''</span>; <span class="comment">/* To generate the box */</span></span><br><span class="line">	<span class="attribute">position</span>: absolute;</span><br><span class="line">	<span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#58a</span>;</span><br><span class="line">	<span class="attribute">transform</span>: <span class="built_in">skew</span>(45deg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="菱形图片"><a href="#菱形图片" class="headerlink" title="菱形图片"></a>菱形图片</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">方案一</span><br><span class="line"><span class="selector-class">.diamond</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">250px</span>;</span><br><span class="line">	<span class="attribute">transform</span>: <span class="built_in">rotate</span>(45deg);</span><br><span class="line">	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.diamond</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">	<span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">	<span class="attribute">transform</span>: <span class="built_in">rotate</span>(-45deg) <span class="built_in">scale</span>(1.42);</span><br><span class="line">	<span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">	<span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line">方案二</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">	<span class="attribute">max-width</span>: <span class="number">250px</span>;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">	<span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(50% 0, 100% 50%, 50% 100%, 0 50%);</span><br><span class="line">	<span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(50% 0, 100% 50%, 50% 100%, 0 50%);</span><br><span class="line">	<span class="attribute">transition</span>: <span class="number">1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">	<span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(0 0, 100% 0, 100% 100%, 0 100%);</span><br><span class="line">	<span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(0 0, 100% 0, 100% 100%, 0 100%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="单边阴影"><a href="#单边阴影" class="headerlink" title="单边阴影"></a>单边阴影</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">1.6in</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">1in</span>;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#fb3</span>;</span><br><span class="line">	<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">4px</span> -<span class="number">4px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/04/27/CSS-Secrets阅读笔记/" data-id="ck71asp1f0001sr9fs9lxc9ae" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-绝对定位方式水平垂直居中" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/27/绝对定位方式水平垂直居中/" class="article-date">
  <time datetime="2016-04-27T03:44:28.000Z" itemprop="datePublished">2016-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/CSS/">CSS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/27/绝对定位方式水平垂直居中/">绝对定位方式水平垂直居中</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>两个div，.parent 和 .child，.child 要相对于.parent水平垂直居中。</p>
<p>第一种方式：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">top</span>:<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>:-<span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">left</span>:<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>:-<span class="number">150px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这种方式兼容性比较好，但是要指定.child得宽高，而且宽高修改之后要修改margin-top或margin-left。</p>
<p>第二种方式：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span>&#123;</span><br><span class="line">	<span class="attribute">position</span>:relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child</span>&#123;</span><br><span class="line">	<span class="attribute">position</span>:absolute;</span><br><span class="line">	<span class="attribute">top</span>:<span class="number">50%</span>;</span><br><span class="line">	<span class="attribute">left</span>:<span class="number">50%</span>;</span><br><span class="line">	<span class="attribute">transform</span>:<span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这种方式ie9以上可用，不需要制定宽高，或者宽高随意指定，不用修改其他属性。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/04/27/绝对定位方式水平垂直居中/" data-id="ck71asp6o007esr9fkiaa75t0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/布局/">布局</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-js数组操作" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/19/js数组操作/" class="article-date">
  <time datetime="2016-04-19T05:51:54.000Z" itemprop="datePublished">2016-04-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/19/js数组操作/">js数组操作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="数组基本方法："><a href="#数组基本方法：" class="headerlink" title="数组基本方法："></a>数组基本方法：</h2><h3 id="concat"><a href="#concat" class="headerlink" title="concat()"></a>concat()</h3><p>用于链接2个或多个数组，不改变现有数组，返回一个数组。</p>
<p><strong>语法：arr.concat(arr1, arr2, arr3, …arrN);</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> a2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">var</span> a3 = [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a1.concat(a2, a3)); <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line"><span class="built_in">console</span>.log(a1); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"><span class="built_in">console</span>.log(a2); <span class="comment">// [4, 5, 6]</span></span><br><span class="line"><span class="built_in">console</span>.log(a3); <span class="comment">// [7, 8, 9]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h3><p>将数组的所有元素拼接成一个字符串，不改变现有数组，返回一个字符串。</p>
<p><strong>语法：arr.join([separator]);</strong></p>
<p>separator: 指定链接各个元素的符号，默认为英文逗号。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.join()); <span class="comment">// a,b,c</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.join(<span class="string">'-'</span>)); <span class="comment">// a-b-c</span></span><br></pre></td></tr></table></figure></p>
<h3 id="push"><a href="#push" class="headerlink" title="push()"></a>push()</h3><p>数组尾部添加1个或者多个元素，改变原有数组，返回改变之后的数组长度。</p>
<p><strong>语法：arr.push(elem1, elem2, …elemN)</strong></p>
<p>如果参数为空，则直接返回数组长度，不对数组有任何操作<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.push()); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "b", "c"]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.push(<span class="string">'d'</span>)); <span class="comment">// 4</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "b", "c", "d"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.push(<span class="string">'e'</span>, <span class="string">'f'</span>)); <span class="comment">// 6</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "b", "c", "d", "e", "f"]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="pop"><a href="#pop" class="headerlink" title="pop()"></a>pop()</h3><p>数组尾部删除1个元素，改变原有数组，返回被删除元素，如果数组为空，返回undefined。</p>
<p><strong>语法：arr.pop()</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.pop()); <span class="comment">// c</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "b"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr2 = [];</span><br><span class="line"><span class="built_in">console</span>.log(arr2.pop()); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">// []</span></span><br></pre></td></tr></table></figure>
<h3 id="reverse"><a href="#reverse" class="headerlink" title="reverse()"></a>reverse()</h3><p>颠倒数组中元素得顺序，改变原有数组，返回颠倒完成之后的数组</p>
<p><strong>语法：arr.reverse()</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr2 = arr.reverse();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">// ["c", "b", "a"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["c", "b", "a"]</span></span><br></pre></td></tr></table></figure>
<h3 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a>unshift()</h3><p>数组头部添加1个或多个元素，改变原有数组，返回改变之后的数组长度。</p>
<p><strong>语法：arr.unshift(elem1, elem2, …elemN)</strong></p>
<p>如果参数为空，则直接返回数组长度，不对数组有任何操作<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.unshift()); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "b", "c"]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.unshift(<span class="string">'d'</span>)); <span class="comment">// 4</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["d", "a", "b", "c"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.unshift(<span class="string">'e'</span>, <span class="string">'f'</span>)); <span class="comment">// 6</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["e", "f", "d", "a", "b", "c"]</span></span><br></pre></td></tr></table></figure></p>
<p>注：unshift和push两个方法非常类似，只不过一个再头部添加，一个在尾部添加。</p>
<h3 id="shift"><a href="#shift" class="headerlink" title="shift()"></a>shift()</h3><p>数组头部删除1个元素，改变原有数组，返回被删除元素，如果数组为空，返回undefined。</p>
<p><strong>语法：arr.shift()</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.shift()); <span class="comment">// a</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["b", "c"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr2 = [];</span><br><span class="line"><span class="built_in">console</span>.log(arr2.shift()); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">// []</span></span><br></pre></td></tr></table></figure>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h3><p>对数组的元素进行排序，改变原有数组，返回排序之后的数组。</p>
<p><strong>语法：arr.sort([sortby])</strong></p>
<p>如果参数为空，默认按字母得字符编码顺序排序。</p>
<p>sortby为接受两个参数的函数，返回用于说明这两个参数顺序得数字，比如参数为a，b：</p>
<p>a小于b，即排序之后a在b之前，sortby函数需要返回一个小于0的值；</p>
<p>a等于b，sortby函数需要返回一个等于0的值；</p>
<p>a大于b，即排序之后b在a之前，sortby函数需要返回一个大于0的值；<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'just'</span>, <span class="string">'do'</span>, <span class="string">'it'</span>, <span class="string">'!'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.sort()); <span class="comment">// ["!", "do", "it", "just"]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["!", "do", "it", "just"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">12</span>, <span class="number">28</span>, <span class="number">1</span>, <span class="number">99</span>, <span class="number">23</span>, <span class="number">27</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr2.sort()); <span class="comment">// [1, 12, 23, 27, 28, 99]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr2.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a-b;</span><br><span class="line">&#125;)); <span class="comment">// [1, 12, 23, 27, 28, 99]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr2.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> b-a;</span><br><span class="line">&#125;)); <span class="comment">// [99, 28, 27, 23, 12, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr3 = [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'张三'</span>,</span><br><span class="line">    age: <span class="number">22</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'李四'</span>,</span><br><span class="line">    age: <span class="number">15</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'王五'</span>,</span><br><span class="line">    age: <span class="number">27</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr4 = arr3.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a.age-b.age;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;arr4.length;i++)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr4[i].name, arr4[i].age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">李四 15</span></span><br><span class="line"><span class="comment">张三 22</span></span><br><span class="line"><span class="comment">王五 27</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p>
<h3 id="slice"><a href="#slice" class="headerlink" title="slice()"></a>slice()</h3><p>获取现有数组中指定元素，不改变原有数组，返回一个数组。</p>
<p><strong>语法：arr.slice(start, end)</strong></p>
<p>如果start， end 都缺省，返回与原数组相同的一个数组；</p>
<p>如果只传如start，缺省end，返回从start开始至原数组末尾所有元素组成的数组</p>
<p>具体传参方式参考如下例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice()); <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">0</span>)); <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">1</span>)); <span class="comment">// [2, 3, 4, 5, 6]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">1</span>, <span class="number">3</span>)); <span class="comment">// [2, 3]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">1</span>, <span class="number">-2</span>)); <span class="comment">// [2, 3, 4] 5的位置相当于-2, 6的位置相当于-1</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">-3</span>, <span class="number">-1</span>)); <span class="comment">// [4, 5] 4的位置是-3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">4</span>, <span class="number">1</span>)); <span class="comment">// []</span></span><br><span class="line"><span class="built_in">console</span>.log(arr);  <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure>
<h3 id="splice"><a href="#splice" class="headerlink" title="splice()"></a>splice()</h3><p>插入， 删除， 替换数组元素，改变原有数组，返回删除的所有元素组成的数组。</p>
<p><strong>语法：arr.splice(start, count, elem1, elem2, …elemN)</strong></p>
<p>start：插入或者删除元素得起始位置</p>
<p>count：删除元素得个数</p>
<p>elem1：从start位置开始插入的元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.splice()); <span class="comment">// [] 相当于啥也没做</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "b", "c", "d", "e", "f", "g"]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.splice(<span class="number">1</span>)); <span class="comment">// ["b", "c", "d", "e", "f", "g"] 从1开始到数组结尾的元素全部删除</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a"]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.splice(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// ["b", "c"] 从索引为1开始删除2个元素</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "d", "e", "f", "g"]</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.splice(<span class="number">1</span>, <span class="number">0</span>, <span class="string">'h'</span>)); <span class="comment">// [] 在1的位置插入h</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "h", "b", "c", "d", "e", "f", "g"]</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.splice(<span class="number">1</span>, <span class="number">3</span>, <span class="string">'h'</span>, <span class="string">'i'</span>));<span class="comment">// ["b", "c", "d"]从1的位置开始 删除3个元素，并插入h，i两个元素。</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "h", "i", "e", "f", "g"]</span></span><br></pre></td></tr></table></figure>
<h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h3><p>将数组转化为一个字符串，不改变原有数组，返回一个字符串</p>
<p><strong>语法：arr.toString()</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.toString()); <span class="comment">// a,b,c,d,e,f,g</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "b", "c", "d", "e", "f", "g"]</span></span><br></pre></td></tr></table></figure>
<h2 id="ES5-数组的扩展"><a href="#ES5-数组的扩展" class="headerlink" title="ES5 数组的扩展"></a>ES5 数组的扩展</h2><h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h3><p>遍历循环一个数组</p>
<p><strong>语法：arr.forEach(func[, context])</strong></p>
<p>func:一个函数，这个函数接受三个参数value, index, array，每次遍历的数组元素，元素对应的索引，原数组。</p>
<p>context：上下文，用来改变func中this的指向。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, array</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value, index, array);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">a 0 ["a", "b", "c"]</span></span><br><span class="line"><span class="comment">b 1 ["a", "b", "c"]</span></span><br><span class="line"><span class="comment">c 2 ["a", "b", "c"]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只是占位得元素不会被forEach遍历</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, , <span class="string">'c'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.length); <span class="comment">// 3</span></span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, array</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value, index, array);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">a 0 ["a", "b", "c"]</span></span><br><span class="line"><span class="comment">c 2 ["a", "b", "c"]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h3><p>可以理解为映射，基于原数组映射出一个新数组，不改变原数组，返回一个新数组。<br><strong>语法：arr.map(func[， context])</strong></p>
<p>func:一个函数，此函数接受三个参数：value， index， array，必须要有返回值，所有的返回值会组成一个新数组。</p>
<p>context：上下文，用来改变func中this的指向。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, array</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value*value;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">// [1, 4, 9, 16, 25]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr3 = [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'张三'</span>,</span><br><span class="line">    age: <span class="number">22</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'李四'</span>,</span><br><span class="line">    age: <span class="number">15</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'王五'</span>,</span><br><span class="line">    age: <span class="number">27</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr3.map(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v.name;</span><br><span class="line">&#125;)); <span class="comment">// ["张三", "李四", "王五"]</span></span><br></pre></td></tr></table></figure>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h3><p>可以理解为‘过滤’，‘筛选’，不改变原数组，返回筛选之后的新数组。<br><strong>语法：arr.filter(func[, context])</strong></p>
<p>func:一个函数，此函数接受三个参数：value， index， array，返回值如果是true或者转化为true得值，则此次遍历的元素就会被加入返回得新数组中（筛选通过！）</p>
<p>context：上下文，用来改变func中this的指向。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v&gt;<span class="number">3</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">// [4, 5]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<h3 id="some"><a href="#some" class="headerlink" title="some()"></a>some()</h3><p>每次遍历只要有一次返回true，some函数就返回true，所有遍历都返回false，some返回false，不改变原有数组，返回boolean值。</p>
<p><strong>语法：arr.some(func[, context])</strong></p>
<p>func:一个函数，此函数接受三个参数：value， index， array</p>
<p>context：上下文，用来改变func中this的指向。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, array</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value&gt;<span class="number">3</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// true 4和5 这两个元素大于3了，所有返回true。</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<h3 id="every"><a href="#every" class="headerlink" title="every()"></a>every()</h3><p>每次遍历只要有一次返回false，every函数就返回false，所有遍历都返回true，every返回true，不改变原有数组，返回boolean值。</p>
<p><strong>语法：arr.every(func[, context])</strong></p>
<p>func:一个函数，此函数接受三个参数：value， index， array</p>
<p>context：上下文，用来改变func中this的指向。</p>
<p>与some类似，但是every要求每个元素都满足要求，才返回true，some只要一个元素满足要求，就返回true<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, array</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value&gt;<span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// true 所有元素都大于0，所以返回true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a>indexOf()</h3><p>查询元素在数组中的索引，跟str.indexOf类似。如果未查到，返回-1，否则返回元素所在数组中的索引。</p>
<p><strong>语法：arr.indexOf(elem[, start])</strong></p>
<p>elem：要查找得元素</p>
<p>start：开始位置，如果缺省，从开始位置查找（0）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.indexOf(<span class="string">'g'</span>)); <span class="comment">// -1</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.indexOf(<span class="string">'c'</span>)); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.indexOf(<span class="string">'d'</span>, <span class="number">5</span>)); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
<h3 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf()"></a>lastIndexOf()</h3><p>与indexOf类似，只不过是从结尾开始查找，从右向左查找。</p>
<p><strong>语法：arr.lastIndexOf(elem[, start])</strong></p>
<p>elem：要查找得元素</p>
<p>start：开始位置，如果缺省，从数组末尾开始查找（arr.length-1）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.lastIndexOf(<span class="string">'g'</span>)); <span class="comment">// -1</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.lastIndexOf(<span class="string">'c'</span>)); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.lastIndexOf(<span class="string">'d'</span>, <span class="number">5</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h3><p>这个函数有些复杂，不知到怎么描述好，直接看例子吧：</p>
<p><strong>语法：arr.reduce(func[, initialValue])</strong></p>
<p>func：接受4个参数得函数，previous, current, index, array，之前值，当前值，索引，数组本身。func的返回值，会作为下一次迭代时previous的值。</p>
<p>initialValue：可选，表示初始值，如果指定initialValue，则作为初始时previous的值，如果缺省，数组得第一个元素为previous值，第二个元素为current。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> sum = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">previous, current, index, array</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> previous + current;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(sum); <span class="comment">// 15</span></span><br><span class="line"></span><br><span class="line">过程展开如下：</span><br><span class="line"><span class="comment">// 初始：</span></span><br><span class="line">previous = initialValue = <span class="number">1</span>, current = <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 第一次迭代 之后</span></span><br><span class="line">previous = <span class="number">1</span> + <span class="number">2</span> = <span class="number">3</span>, current = <span class="number">3</span>;<span class="comment">//current 向后移动一个元素</span></span><br><span class="line"><span class="comment">// 第二次迭代之后</span></span><br><span class="line">previous = <span class="number">3</span> + <span class="number">3</span> = <span class="number">6</span>, current = <span class="number">4</span>;</span><br><span class="line"><span class="comment">// 第三次迭代之后</span></span><br><span class="line">previous = <span class="number">6</span> + <span class="number">4</span> = <span class="number">10</span>, current = <span class="number">5</span>;</span><br><span class="line"><span class="comment">// 第四次迭代之后</span></span><br><span class="line">previous = <span class="number">10</span> + <span class="number">5</span> = <span class="number">15</span> ,current = <span class="literal">undefined</span><span class="comment">// 没有了，退出，返回15；</span></span><br></pre></td></tr></table></figure>
<h3 id="reduceRight"><a href="#reduceRight" class="headerlink" title="reduceRight()"></a>reduceRight()</h3><p>和reduce类似，只不过从数组结尾开始，从右向左迭代。</p>
<h2 id="ES6-数组的扩展"><a href="#ES6-数组的扩展" class="headerlink" title="ES6 数组的扩展"></a>ES6 数组的扩展</h2><h3 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h3><p><code>Array.from</code>方法用于将两类对象转为真正的数组：类似数组的对象（array-like object）和可遍历（iterable）的对象（包括ES6新增的数据结构Set和Map）。</p>
<p>下面是一个类似数组的对象，<code>Array.from</code>将它转为真正的数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">    <span class="string">'0'</span>: <span class="string">'a'</span>,</span><br><span class="line">    <span class="string">'1'</span>: <span class="string">'b'</span>,</span><br><span class="line">    <span class="string">'2'</span>: <span class="string">'c'</span>,</span><br><span class="line">    length: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5的写法</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [].slice.call(arrayLike); <span class="comment">// ['a', 'b', 'c']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6的写法</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.from(arrayLike); <span class="comment">// ['a', 'b', 'c']</span></span><br></pre></td></tr></table></figure>
<p>实际应用中，常见的类似数组的对象是DOM操作返回的NodeList集合，以及函数内部的<code>arguments</code>对象。<code>Array.from</code>都可以将它们转为真正的数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NodeList对象</span></span><br><span class="line"><span class="keyword">let</span> ps = <span class="built_in">document</span>.querySelectorAll(<span class="string">'p'</span>);</span><br><span class="line"><span class="built_in">Array</span>.from(ps).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">p</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// arguments对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中，<code>querySelectorAll</code>方法返回的是一个类似数组的对象，只有将这个对象转为真正的数组，才能使用<code>forEach</code>方法。</p>
<p>只要是部署了Iterator接口的数据结构，<code>Array.from</code>都能将其转为数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(<span class="string">'hello'</span>)</span><br><span class="line"><span class="comment">// ['h', 'e', 'l', 'l', 'o']</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> namesSet = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br><span class="line"><span class="built_in">Array</span>.from(namesSet) <span class="comment">// ['a', 'b']</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，字符串和Set结构都具有Iterator接口，因此可以被<code>Array.from</code>转为真正的数组。</p>
<p>如果参数是一个真正的数组，<code>Array.from</code>会返回一个一模一样的新数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<p>值得提醒的是，扩展运算符（<code>...</code>）也可以将某些数据结构转为数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// arguments对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = [...arguments];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NodeList对象</span></span><br><span class="line">[...document.querySelectorAll(<span class="string">'div'</span>)]</span><br></pre></td></tr></table></figure>
<p>扩展运算符背后调用的是遍历器接口（<code>Symbol.iterator</code>），如果一个对象没有部署这个接口，就无法转换。<code>Array.from</code>方法则是还支持类似数组的对象。所谓类似数组的对象，本质特征只有一点，即必须有<code>length</code>属性。因此，任何有<code>length</code>属性的对象，都可以通过<code>Array.from</code>方法转为数组，而此时扩展运算符就无法转换。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="number">3</span> &#125;);</span><br><span class="line"><span class="comment">// [ undefined, undefined, undefinded ]</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<code>Array.from</code>返回了一个具有三个成员的数组，每个位置的值都是<code>undefined</code>。扩展运算符转换不了这个对象。</p>
<p>对于还没有部署该方法的浏览器，可以用<code>Array.prototype.slice</code>方法替代。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toArray = <span class="function">(<span class="params">(</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from ? <span class="built_in">Array</span>.from : <span class="function"><span class="params">obj</span> =&gt;</span> [].slice.call(obj)</span><br><span class="line">)();</span><br></pre></td></tr></table></figure>
<p><code>Array.from</code>还可以接受第二个参数，作用类似于数组的<code>map</code>方法，用来对每个元素进行处理，将处理后的值放入返回的数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(arrayLike, x =&gt; x * x);</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="built_in">Array</span>.from(arrayLike).map(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], (x) =&gt; x * x)</span><br><span class="line"><span class="comment">// [1, 4, 9]</span></span><br></pre></td></tr></table></figure>
<p>下面的例子是取出一组DOM节点的文本内容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> spans = <span class="built_in">document</span>.querySelectorAll(<span class="string">'span.name'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// map()</span></span><br><span class="line"><span class="keyword">let</span> names1 = <span class="built_in">Array</span>.prototype.map.call(spans, s =&gt; s.textContent);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.from()</span></span><br><span class="line"><span class="keyword">let</span> names2 = <span class="built_in">Array</span>.from(spans, s =&gt; s.textContent)</span><br></pre></td></tr></table></figure>
<p>下面的例子将数组中布尔值为<code>false</code>的成员转为<code>0</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from([<span class="number">1</span>, , <span class="number">2</span>, , <span class="number">3</span>], (n) =&gt; n || <span class="number">0</span>)</span><br><span class="line"><span class="comment">// [1, 0, 2, 0, 3]</span></span><br></pre></td></tr></table></figure>
<p>另一个例子是返回各种数据的类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">typesOf</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>, value =&gt; <span class="keyword">typeof</span> value)</span><br><span class="line">&#125;</span><br><span class="line">typesOf(<span class="literal">null</span>, [], <span class="literal">NaN</span>)</span><br><span class="line"><span class="comment">// ['object', 'object', 'number']</span></span><br></pre></td></tr></table></figure>
<p>如果<code>map</code>函数里面用到了<code>this</code>关键字，还可以传入<code>Array.from</code>的第三个参数，用来绑定<code>this</code>。</p>
<p><code>Array.from()</code>可以将各种值转为真正的数组，并且还提供<code>map</code>功能。这实际上意味着，只要有一个原始的数据结构，你就可以先对它的值进行处理，然后转成规范的数组结构，进而就可以使用数量众多的数组方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="number">2</span> &#125;, () =&gt; <span class="string">'jack'</span>)</span><br><span class="line"><span class="comment">// ['jack', 'jack']</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<code>Array.from</code>的第一个参数指定了第二个参数运行的次数。这种特性可以让该方法的用法变得非常灵活。</p>
<p><code>Array.from()</code>的另一个应用是，将字符串转为数组，然后返回字符串的长度。因为它能正确处理各种Unicode字符，可以避免JavaScript将大于<code>\uFFFF</code>的Unicode字符，算作两个字符的bug。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countSymbols</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(string).length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h3><p><code>Array.of</code>方法用于将一组值，转换为数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>) <span class="comment">// [3,11,8]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>) <span class="comment">// [3]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>).length <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>这个方法的主要目的，是弥补数组构造函数<code>Array()</code>的不足。因为参数个数的不同，会导致<code>Array()</code>的行为有差异。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>() <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>) <span class="comment">// [, , ,]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>) <span class="comment">// [3, 11, 8]</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<code>Array</code>方法没有参数、一个参数、三个参数时，返回结果都不一样。只有当参数个数不少于2个时，<code>Array()</code>才会返回由参数组成的新数组。参数个数只有一个时，实际上是指定数组的长度。</p>
<p><code>Array.of</code>基本上可以用来替代<code>Array()</code>或<code>new Array()</code>，并且不存在由于参数不同而导致的重载。它的行为非常统一。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of() <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="literal">undefined</span>) <span class="comment">// [undefined]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>) <span class="comment">// [1]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure>
<p><code>Array.of</code>总是返回参数值组成的数组。如果没有参数，就返回一个空数组。</p>
<p><code>Array.of</code>方法可以用下面的代码模拟实现。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ArrayOf</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数组实例的copyWithin"><a href="#数组实例的copyWithin" class="headerlink" title="数组实例的copyWithin()"></a>数组实例的copyWithin()</h3><p>数组实例的<code>copyWithin</code>方法，在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），然后返回当前数组。也就是说，使用这个方法，会修改当前数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.copyWithin(target, start = <span class="number">0</span>, end = <span class="keyword">this</span>.length)</span><br></pre></td></tr></table></figure>
<p>它接受三个参数。</p>
<ul>
<li>target（必需）：从该位置开始替换数据。</li>
<li>start（可选）：从该位置开始读取数据，默认为0。如果为负值，表示倒数。</li>
<li>end（可选）：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示倒数。</li>
</ul>
<p>这三个参数都应该是数值，如果不是，会自动转为数值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// [4, 5, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<p>上面代码表示将从3号位直到数组结束的成员（4和5），复制到从0号位开始的位置，结果覆盖了原来的1和2。</p>
<p>下面是更多例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将3号位复制到0号位</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// -2相当于3号位，-1相当于4号位</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">-2</span>, <span class="number">-1</span>)</span><br><span class="line"><span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将3号位复制到0号位</span></span><br><span class="line">[].copyWithin.call(&#123;<span class="attr">length</span>: <span class="number">5</span>, <span class="number">3</span>: <span class="number">1</span>&#125;, <span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// &#123;0: 1, 3: 1, length: 5&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将2号位到数组结束，复制到0号位</span></span><br><span class="line"><span class="keyword">var</span> i32a = <span class="keyword">new</span> <span class="built_in">Int32Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line">i32a.copyWithin(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// Int32Array [3, 4, 5, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对于没有部署TypedArray的copyWithin方法的平台</span></span><br><span class="line"><span class="comment">// 需要采用下面的写法</span></span><br><span class="line">[].copyWithin.call(<span class="keyword">new</span> <span class="built_in">Int32Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]), <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">// Int32Array [4, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<h3 id="数组实例的find-和findIndex"><a href="#数组实例的find-和findIndex" class="headerlink" title="数组实例的find()和findIndex()"></a>数组实例的find()和findIndex()</h3><p>数组实例的<code>find</code>方法，用于找出第一个符合条件的数组成员。它的参数是一个回调函数，所有数组成员依次执行该回调函数，直到找出第一个返回值为<code>true</code>的成员，然后返回该成员。如果没有符合条件的成员，则返回<code>undefined</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">-5</span>, <span class="number">10</span>].find(<span class="function">(<span class="params">n</span>) =&gt;</span> n &lt; <span class="number">0</span>)</span><br><span class="line"><span class="comment">// -5</span></span><br></pre></td></tr></table></figure>
<p>上面代码找出数组中第一个小于0的成员。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>].find(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">9</span>;</span><br><span class="line">&#125;) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<code>find</code>方法的回调函数可以接受三个参数，依次为当前的值、当前的位置和原数组。</p>
<p>数组实例的<code>findIndex</code>方法的用法与<code>find</code>方法非常类似，返回第一个符合条件的数组成员的位置，如果所有成员都不符合条件，则返回<code>-1</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>].findIndex(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">9</span>;</span><br><span class="line">&#125;) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>这两个方法都可以接受第二个参数，用来绑定回调函数的<code>this</code>对象。</p>
<p>另外，这两个方法都可以发现<code>NaN</code>，弥补了数组的<code>IndexOf</code>方法的不足。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>)</span><br><span class="line"><span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line">[<span class="literal">NaN</span>].findIndex(<span class="function"><span class="params">y</span> =&gt;</span> <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, y))</span><br><span class="line"><span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<code>indexOf</code>方法无法识别数组的<code>NaN</code>成员，但是<code>findIndex</code>方法可以借助<code>Object.is</code>方法做到。</p>
<h3 id="数组实例的fill"><a href="#数组实例的fill" class="headerlink" title="数组实例的fill()"></a>数组实例的fill()</h3><p><code>fill</code>方法使用给定值，填充一个数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>].fill(<span class="number">7</span>)</span><br><span class="line"><span class="comment">// [7, 7, 7]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="number">7</span>)</span><br><span class="line"><span class="comment">// [7, 7, 7]</span></span><br></pre></td></tr></table></figure>
<p>上面代码表明，<code>fill</code>方法用于空数组的初始化非常方便。数组中已有的元素，会被全部抹去。</p>
<p><code>fill</code>方法还可以接受第二个和第三个参数，用于指定填充的起始位置和结束位置。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>].fill(<span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment">// ['a', 7, 'c']</span></span><br></pre></td></tr></table></figure>
<p>上面代码表示，<code>fill</code>方法从1号位开始，向原数组填充7，到2号位之前结束。</p>
<h3 id="数组实例的entries-，keys-和values"><a href="#数组实例的entries-，keys-和values" class="headerlink" title="数组实例的entries()，keys()和values()"></a>数组实例的entries()，keys()和values()</h3><p>ES6提供三个新的方法——<code>entries()</code>，<code>keys()</code>和<code>values()</code>——用于遍历数组。它们都返回一个遍历器对象（详见《Iterator》一章），可以用<code>for...of</code>循环进行遍历，唯一的区别是<code>keys()</code>是对键名的遍历、<code>values()</code>是对键值的遍历，<code>entries()</code>是对键值对的遍历。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">of</span> [<span class="string">'a'</span>, <span class="string">'b'</span>].keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> [<span class="string">'a'</span>, <span class="string">'b'</span>].values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 'a'</span></span><br><span class="line"><span class="comment">// 'b'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [index, elem] <span class="keyword">of</span> [<span class="string">'a'</span>, <span class="string">'b'</span>].entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index, elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 "a"</span></span><br><span class="line"><span class="comment">// 1 "b"</span></span><br></pre></td></tr></table></figure>
<p>如果不使用<code>for...of</code>循环，可以手动调用遍历器对象的<code>next</code>方法，进行遍历。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> letter = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="keyword">let</span> entries = letter.entries();</span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [0, 'a']</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [1, 'b']</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [2, 'c']</span></span><br></pre></td></tr></table></figure>
<h3 id="数组实例的includes"><a href="#数组实例的includes" class="headerlink" title="数组实例的includes()"></a>数组实例的includes()</h3><p><code>Array.prototype.includes</code>方法返回一个布尔值，表示某个数组是否包含给定的值，与字符串的<code>includes</code>方法类似。该方法属于ES7，但Babel转码器已经支持。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">2</span>);     <span class="comment">// true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">4</span>);     <span class="comment">// false</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="literal">NaN</span>].includes(<span class="literal">NaN</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>该方法的第二个参数表示搜索的起始位置，默认为0。如果第二个参数为负数，则表示倒数的位置，如果这时它大于数组长度（比如第二个参数为-4，但数组长度为3），则会重置为从0开始。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">3</span>);  <span class="comment">// false</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">-1</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>没有该方法之前，我们通常使用数组的<code>indexOf</code>方法，检查是否包含某个值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (arr.indexOf(el) !== <span class="number">-1</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>indexOf</code>方法有两个缺点，一是不够语义化，它的含义是找到参数值的第一个出现位置，所以要去比较是否不等于-1，表达起来不够直观。二是，它内部使用严格相当运算符（===）进行判断，这会导致对<code>NaN</code>的误判。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>)</span><br><span class="line"><span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
<p><code>includes</code>使用的是不一样的判断算法，就没有这个问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].includes(<span class="literal">NaN</span>)</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>下面代码用来检查当前环境是否支持该方法，如果不支持，部署一个简易的替代版本。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> contains = <span class="function">(<span class="params">(</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.prototype.includes</span><br><span class="line">    ? <span class="function">(<span class="params">arr, value</span>) =&gt;</span> arr.includes(value)</span><br><span class="line">    : <span class="function">(<span class="params">arr, value</span>) =&gt;</span> arr.some(<span class="function"><span class="params">el</span> =&gt;</span> el === value)</span><br><span class="line">)();</span><br><span class="line">contains([<span class="string">"foo"</span>, <span class="string">"bar"</span>], <span class="string">"baz"</span>); <span class="comment">// =&gt; false</span></span><br></pre></td></tr></table></figure>
<p>另外，Map和Set数据结构有一个<code>has</code>方法，需要注意与<code>includes</code>区分。</p>
<ul>
<li>Map结构的<code>has</code>方法，是用来查找键名的，比如<code>Map.prototype.has(key)</code>、<code>WeakMap.prototype.has(key)</code>、<code>Reflect.has(target, propertyKey)</code>。</li>
<li>Set结构的<code>has</code>方法，是用来查找值的，比如<code>Set.prototype.has(value)</code>、<code>WeakSet.prototype.has(value)</code>。</li>
</ul>
<h3 id="数组的空位"><a href="#数组的空位" class="headerlink" title="数组的空位"></a>数组的空位</h3><p>数组的空位指，数组的某一个位置没有任何值。比如，<code>Array</code>构造函数返回的数组都是空位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>) <span class="comment">// [, , ,]</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<code>Array(3)</code>返回一个具有3个空位的数组。</p>
<p>注意，空位不是<code>undefined</code>，一个位置的值等于<code>undefined</code>，依然是有值的。空位是没有任何值，<code>in</code>运算符可以说明这一点。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="keyword">in</span> [<span class="literal">undefined</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>] <span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> [, , ,] <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>上面代码说明，第一个数组的0号位置是有值的，第二个数组的0号位置没有值。</p>
<p>ES5对空位的处理，已经很不一致了，大多数情况下会忽略空位。</p>
<ul>
<li><code>forEach()</code>, <code>filter()</code>, <code>every()</code> 和<code>some()</code>都会跳过空位。</li>
<li><code>map()</code>会跳过空位，但会保留这个值</li>
<li><code>join()</code>和<code>toString()</code>会将空位视为<code>undefined</code>，而<code>undefined</code>和<code>null</code>会被处理成空字符串。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// forEach方法</span></span><br><span class="line">[,<span class="string">'a'</span>].forEach(<span class="function">(<span class="params">x,i</span>) =&gt;</span> log(i)); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// filter方法</span></span><br><span class="line">[<span class="string">'a'</span>,,<span class="string">'b'</span>].filter(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// ['a','b']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// every方法</span></span><br><span class="line">[,<span class="string">'a'</span>].every(<span class="function"><span class="params">x</span> =&gt;</span> x===<span class="string">'a'</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// some方法</span></span><br><span class="line">[,<span class="string">'a'</span>].some(<span class="function"><span class="params">x</span> =&gt;</span> x !== <span class="string">'a'</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// map方法</span></span><br><span class="line">[,<span class="string">'a'</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="number">1</span>) <span class="comment">// [,1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// join方法</span></span><br><span class="line">[,<span class="string">'a'</span>,<span class="literal">undefined</span>,<span class="literal">null</span>].join(<span class="string">'#'</span>) <span class="comment">// "#a##"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// toString方法</span></span><br><span class="line">[,<span class="string">'a'</span>,<span class="literal">undefined</span>,<span class="literal">null</span>].toString() <span class="comment">// ",a,,"</span></span><br></pre></td></tr></table></figure>
<p>ES6则是明确将空位转为<code>undefined</code>。</p>
<p><code>Array.from</code>方法会将数组的空位，转为<code>undefined</code>，也就是说，这个方法不会忽略空位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from([<span class="string">'a'</span>,,<span class="string">'b'</span>])</span><br><span class="line"><span class="comment">// [ "a", undefined, "b" ]</span></span><br></pre></td></tr></table></figure>
<p>扩展运算符（<code>...</code>）也会将空位转为<code>undefined</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[...[<span class="string">'a'</span>,,<span class="string">'b'</span>]]</span><br><span class="line"><span class="comment">// [ "a", undefined, "b" ]</span></span><br></pre></td></tr></table></figure>
<p><code>copyWithin()</code>会连空位一起拷贝。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[,<span class="string">'a'</span>,<span class="string">'b'</span>,,].copyWithin(<span class="number">2</span>,<span class="number">0</span>) <span class="comment">// [,"a",,"a"]</span></span><br></pre></td></tr></table></figure>
<p><code>fill()</code>会将空位视为正常的数组位置。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="string">'a'</span>) <span class="comment">// ["a","a","a"]</span></span><br></pre></td></tr></table></figure>
<p><code>for...of</code>循环也会遍历空位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [, ,];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，数组<code>arr</code>有两个空位，<code>for...of</code>并没有忽略它们。如果改成<code>map</code>方法遍历，空位是会跳过的。</p>
<p><code>entries()</code>、<code>keys()</code>、<code>values()</code>、<code>find()</code>和<code>findIndex()</code>会将空位处理成<code>undefined</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entries()</span></span><br><span class="line">[...[,<span class="string">'a'</span>].entries()] <span class="comment">// [[0,undefined], [1,"a"]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// keys()</span></span><br><span class="line">[...[,<span class="string">'a'</span>].keys()] <span class="comment">// [0,1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// values()</span></span><br><span class="line">[...[,<span class="string">'a'</span>].values()] <span class="comment">// [undefined,"a"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// find()</span></span><br><span class="line">[,<span class="string">'a'</span>].find(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// findIndex()</span></span><br><span class="line">[,<span class="string">'a'</span>].findIndex(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<p>由于空位的处理规则非常不统一，所以建议避免出现空位。</p>
<h3 id="数组推导"><a href="#数组推导" class="headerlink" title="数组推导"></a>数组推导</h3><p>数组推导（array comprehension）提供简洁写法，允许直接通过现有数组生成新数组。这项功能本来是要放入ES6的，但是TC39委员会想继续完善这项功能，让其支持所有数据结构（内部调用iterator对象），不像现在只支持数组，所以就把它推迟到了ES7。Babel转码器已经支持这个功能。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> a2 = [<span class="keyword">for</span> (i <span class="keyword">of</span> a1) i * <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">a2 <span class="comment">// [2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure>
<p>上面代码表示，通过<code>for...of</code>结构，数组<code>a2</code>直接在<code>a1</code>的基础上生成。</p>
<p>注意，数组推导中，<code>for...of</code>结构总是写在最前面，返回的表达式写在最后面。</p>
<p><code>for...of</code>后面还可以附加<code>if</code>语句，用来设定循环的限制条件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> years = [ <span class="number">1954</span>, <span class="number">1974</span>, <span class="number">1990</span>, <span class="number">2006</span>, <span class="number">2010</span>, <span class="number">2014</span> ];</span><br><span class="line"></span><br><span class="line">[<span class="keyword">for</span> (year <span class="keyword">of</span> years) <span class="keyword">if</span> (year &gt; <span class="number">2000</span>) year];</span><br><span class="line"><span class="comment">// [ 2006, 2010, 2014 ]</span></span><br><span class="line"></span><br><span class="line">[<span class="keyword">for</span> (year <span class="keyword">of</span> years) <span class="keyword">if</span> (year &gt; <span class="number">2000</span>) <span class="keyword">if</span>(year &lt; <span class="number">2010</span>) year];</span><br><span class="line"><span class="comment">// [ 2006]</span></span><br><span class="line"></span><br><span class="line">[<span class="keyword">for</span> (year <span class="keyword">of</span> years) <span class="keyword">if</span> (year &gt; <span class="number">2000</span> &amp;&amp; year &lt; <span class="number">2010</span>) year];</span><br><span class="line"><span class="comment">// [ 2006]</span></span><br></pre></td></tr></table></figure>
<p>上面代码表明，<code>if</code>语句要写在<code>for...of</code>与返回的表达式之间，而且可以多个<code>if</code>语句连用。</p>
<p>下面是另一个例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> customers = [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'Jack'</span>,</span><br><span class="line">    age: <span class="number">25</span>,</span><br><span class="line">    city: <span class="string">'New York'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'Peter'</span>,</span><br><span class="line">    age: <span class="number">30</span>,</span><br><span class="line">    city: <span class="string">'Seattle'</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> results = [</span><br><span class="line">  <span class="keyword">for</span> (c <span class="keyword">of</span> customers)</span><br><span class="line">    <span class="keyword">if</span> (c.city == <span class="string">"Seattle"</span>)</span><br><span class="line">      &#123; <span class="attr">name</span>: c.name, <span class="attr">age</span>: c.age &#125;</span><br><span class="line">];</span><br><span class="line">results <span class="comment">// &#123; name: "Peter", age: 30 &#125;</span></span><br></pre></td></tr></table></figure>
<p>数组推导可以替代<code>map</code>和<code>filter</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">for</span> (i <span class="keyword">of</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) i * i];</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123; <span class="keyword">return</span> i * i &#125;);</span><br><span class="line"></span><br><span class="line">[<span class="keyword">for</span> (i <span class="keyword">of</span> [<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">-8</span>]) <span class="keyword">if</span> (i &lt; <span class="number">3</span>) i];</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">-8</span>].filter(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123; <span class="keyword">return</span> i &lt; <span class="number">3</span> &#125;);</span><br></pre></td></tr></table></figure>
<p>上面代码说明，模拟<code>map</code>功能只要单纯的<code>for...of</code>循环就行了，模拟<code>filter</code>功能除了<code>for...of</code>循环，还必须加上<code>if</code>语句。</p>
<p>在一个数组推导中，还可以使用多个<code>for...of</code>结构，构成多重循环。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 = [<span class="string">'x1'</span>, <span class="string">'y1'</span>];</span><br><span class="line"><span class="keyword">var</span> a2 = [<span class="string">'x2'</span>, <span class="string">'y2'</span>];</span><br><span class="line"><span class="keyword">var</span> a3 = [<span class="string">'x3'</span>, <span class="string">'y3'</span>];</span><br><span class="line"></span><br><span class="line">[<span class="keyword">for</span> (s <span class="keyword">of</span> a1) <span class="keyword">for</span> (w <span class="keyword">of</span> a2) <span class="keyword">for</span> (r <span class="keyword">of</span> a3) <span class="built_in">console</span>.log(s + w + r)];</span><br><span class="line"><span class="comment">// x1x2x3</span></span><br><span class="line"><span class="comment">// x1x2y3</span></span><br><span class="line"><span class="comment">// x1y2x3</span></span><br><span class="line"><span class="comment">// x1y2y3</span></span><br><span class="line"><span class="comment">// y1x2x3</span></span><br><span class="line"><span class="comment">// y1x2y3</span></span><br><span class="line"><span class="comment">// y1y2x3</span></span><br><span class="line"><span class="comment">// y1y2y3</span></span><br></pre></td></tr></table></figure>
<p>上面代码在一个数组推导之中，使用了三个<code>for...of</code>结构。</p>
<p>需要注意的是，数组推导的方括号构成了一个单独的作用域，在这个方括号中声明的变量类似于使用<code>let</code>语句声明的变量。</p>
<p>由于字符串可以视为数组，因此字符串也可以直接用于数组推导。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">for</span> (c <span class="keyword">of</span> <span class="string">'abcde'</span>) <span class="keyword">if</span> (<span class="regexp">/[aeiou]/</span>.test(c)) c].join(<span class="string">''</span>) <span class="comment">// 'ae'</span></span><br><span class="line"></span><br><span class="line">[<span class="keyword">for</span> (c <span class="keyword">of</span> <span class="string">'abcde'</span>) c+<span class="string">'0'</span>].join(<span class="string">''</span>) <span class="comment">// 'a0b0c0d0e0'</span></span><br></pre></td></tr></table></figure>
<p>上面代码使用了数组推导，对字符串进行处理。</p>
<p>数组推导需要注意的地方是，新数组会立即在内存中生成。这时，如果原数组是一个很大的数组，将会非常耗费内存。</p>
<h2 id="实用方法"><a href="#实用方法" class="headerlink" title="实用方法"></a>实用方法</h2><h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据元素，删除数据中的此元素，修改原素组，返回删除的元素</span></span><br><span class="line"><span class="comment"> * @param array</span></span><br><span class="line"><span class="comment"> * @param item</span></span><br><span class="line"><span class="comment"> * @returns &#123;Array.&lt;T&gt;|*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeByItem</span>(<span class="params">array, item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!array.length) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">var</span> index = array.indexOf(item);</span><br><span class="line">    <span class="keyword">if</span> (index &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> array.splice(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据索引，删除数据中的元素，修改原素组，返回删除的元素</span></span><br><span class="line"><span class="comment"> * @param array</span></span><br><span class="line"><span class="comment"> * @param item</span></span><br><span class="line"><span class="comment"> * @returns &#123;Array.&lt;T&gt;|*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeByIndex</span>(<span class="params">array, index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!array.length) <span class="keyword">return</span>;</span><br><span class="line"> 		<span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; array.length - <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (index &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> array.splice(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>参考链接：</p>
<p><a href="http://www.cnblogs.com/tugenhua0707/p/5052808.html" target="_blank" rel="noopener">http://www.cnblogs.com/tugenhua0707/p/5052808.html</a></p>
<p><a href="http://www.zhangxinxu.com/wordpress/2013/04/es5%E6%96%B0%E5%A2%9E%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/" target="_blank" rel="noopener">http://www.zhangxinxu.com/wordpress/2013/04/es5%E6%96%B0%E5%A2%9E%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/</a></p>
<p><a href="http://es6.ruanyifeng.com/#docs/array" target="_blank" rel="noopener">http://es6.ruanyifeng.com/#docs/array</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/04/19/js数组操作/" data-id="ck71asp8f00brsr9f11b5gf7f" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-webpack构建，js使用script标签引入" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/15/webpack构建，js使用script标签引入/" class="article-date">
  <time datetime="2016-04-15T05:48:10.000Z" itemprop="datePublished">2016-04-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/构建/">构建</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/15/webpack构建，js使用script标签引入/">webpack构建，js使用script标签引入</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>使用webpack构建大型项目的时候，如果js库引用过多，彼此之间依赖比较复杂，webpack构建过程非常的慢，而且生成得common.js非常大。整个项目中一些第三方得js库可以不用构建，直接在页面上通过script标签引入即可，只通过webpack打包编译业务代码。</p>
<p>我使用过react react-router ant-design等搭建了一个管理系统，光webpack构建就将近2分钟（而且是电脑配置很牛逼得情况下），打包成的common.js未压缩时2M多，压缩之后还有800k~900K，将react 等一些第三方的js通过script标签直接在页面上引入，降低了单个文件的大小，加快了webpack构建速度，配置如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">      ...</span><br><span class="line">      <span class="string">'libraryTarget'</span>: <span class="string">'var'</span>,</span><br><span class="line">      ...</span><br><span class="line">  &#125;,</span><br><span class="line">  externals: &#123;</span><br><span class="line">      <span class="string">'react'</span>: <span class="string">'React'</span>,</span><br><span class="line">      <span class="string">'react-dom'</span>: <span class="string">'ReactDOM'</span>,</span><br><span class="line">      <span class="string">'antd'</span>: <span class="string">'antd'</span>,</span><br><span class="line">      <span class="string">"jquery"</span>: <span class="string">"jQuery"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * 如果不使用CDN，拷贝externals文件到指定静态目录，webpack-dev-server也可以获取到这些文件。</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">  <span class="keyword">new</span> CopyWebpackPlugin([</span><br><span class="line">      &#123;<span class="attr">from</span>: <span class="string">'src/static/antd-0.12.12.min.css'</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">from</span>: <span class="string">'src/static/antd-0.12.12.min.js'</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">from</span>: <span class="string">'src/static/react-0.14.6.min.js'</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">from</span>: <span class="string">'src/static/react-dom-0.14.6.min.js'</span>&#125;</span><br><span class="line">  ])</span><br></pre></td></tr></table></figure></p>
<p>页面上通过script引入js：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"react-0.14.6.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"react-dom-0.14.6.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"antd-0.12.12.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>文件中的写法不变，依然使用es6的import:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Breadcrumb &#125; <span class="keyword">from</span> <span class="string">'antd'</span>;</span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'jquery'</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/04/15/webpack构建，js使用script标签引入/" data-id="ck71asp5k004ysr9f3fueejiu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-使用node创建一个命令行工具" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/14/使用node创建一个命令行工具/" class="article-date">
  <time datetime="2016-04-14T03:49:12.000Z" itemprop="datePublished">2016-04-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/14/使用node创建一个命令行工具/">使用node创建一个命令行工具 zk-init</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo npm install zk-init -g</span><br></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ zk-init [template name]</span><br></pre></td></tr></table></figure>
<p>在终端输入一个命令就能执行相关的操作，比如终端输入<code>$ zk-init</code>，就会的一个简单的<code>jQuery</code>开发的demo。输入<code>$ zk-init jquery-webpack</code>就会得到一个通过<code>webpack</code>构建得jQuery项目初始结构。</p>
<p>做这个小工具主要是学习一下“手脚架”是怎么写的。同时也想通过这个工具快速初始化出各种项目结构，比如我要写一个小demo的时候，需要新建一个文件夹，然后再创建<code>html</code>，<code>css</code>，<code>js</code>等，复杂一些得项目需要<code>gulp</code> <code>grunt</code> <code>webpack</code>等，还得从别的项目中把配置拷贝过来进行修改（配置我记不住。。。），通过这个工具可以省去一些繁琐的，没有技术含量的搭建过程。实现细节，这里就不详细介绍了可以直接去看<a href="https://github.com/zkboys/zk-init" target="_blank" rel="noopener">源码</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/04/14/使用node创建一个命令行工具/" data-id="ck71asp5s005gsr9fz9vxq99h" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-webpack-监听html文件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/13/webpack-监听html文件/" class="article-date">
  <time datetime="2016-04-13T09:34:38.000Z" itemprop="datePublished">2016-04-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/构建/">构建</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/13/webpack-监听html文件/">webpack 监听html文件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>在使用webpack-dev-server时，js改变，webpack就会重新构建项目，并且浏览器会自动刷新，但是编辑html文件时，webpack-dev-server却毫无反应。</p>
<p>原因由于webpack（webpack-dev-server）只监听有依赖得相关文件，比如html等没有依赖的文件是不会被webpack watch监听的。</p>
<p>既然有依赖关系才会被webpack watch监听，那么就把html文件添加到webpack构建过程中去，就可以监听html文件了。本文介绍一个方法，仅供参考</p>
<h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><ul>
<li>开发过程中可以监听html文件，编辑html文件，浏览器会自动刷新；</li>
<li>最终构建生成的线上文件不能有为了监听html，而加入的html依赖内容。</li>
</ul>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>webpack配置文件要能根据命令行参数区分不同的开发模式（runmod）。</p>
<p>为了兼容各个平台命令行参数的写法，这里使用cross-env模块</p>
<p>安装方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cross-env --save-dev</span><br></pre></td></tr></table></figure></p>
<p>使用方法，在 node 的package.json中定义一个scripts:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot; :&#123;</span><br><span class="line">  &quot;dev&quot; : &quot;cross-env runmod=devserver webpack-dev-server --port 8086 --progress --inline&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>终端输入<code>npm run dev</code> 即可运行如上命令</p>
<p>创建一个 <code>watch-html.js</code>文件：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// RUNMOD 是在webpack.config.js中配置的： new webpack.DefinePlugin(&#123;"RUNMOD": JSON.stringify(runmod)&#125;),</span></span><br><span class="line"><span class="keyword">if</span> (RUNMOD === <span class="string">'devserver'</span>) &#123;</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">'./index.html'</span>);<span class="comment">// 这个引入只是让index.html可以被webpack watch 监听</span></span><br><span class="line">    <span class="built_in">require</span>(<span class="string">'./demo/demo.html'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="webpack-config-js文件配置"><a href="#webpack-config-js文件配置" class="headerlink" title="webpack.config.js文件配置"></a>webpack.config.js文件配置</h2><p>webpack.config.js文件中可以使用 <code>var runmod = process.env.runmod</code> 获取到命令行传入得参数（<code>runmod=devserver</code>）</p>
<p>通过<code>new webpack.DefinePlugin({&quot;RUNMOD&quot;: JSON.stringify(runmod)})</code>方式可以把<code>RUNMOD</code>参数传给每一个通过webpack构建的js文件。参见<code>watch-html.js</code></p>
<p>将watch-html.js文件加入<code>entry</code>:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _entry = &#123;</span><br><span class="line">    <span class="comment">//"index": ["./src/home/home.jsx", "./src/home/home-content.jsx"],//会合并成一个index.js</span></span><br><span class="line">    <span class="string">"index"</span>: <span class="string">'./index.js'</span>,</span><br><span class="line">    <span class="string">"demo"</span>: <span class="string">'./demo/demo.js'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span> (runmod === <span class="string">'devserver'</span>) &#123;<span class="comment">// 只有devserver模式，才加入监听html文件</span></span><br><span class="line">    _entry[<span class="string">"watch-html"</span>] = <span class="string">'./watch-html.js'</span>;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 入口文件配置</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    entry: _entry,</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>将所需要进行监听得文件加入<code>watch-html.js</code>文件中就可以实现开发模式（devserver模式）下监听html文件，其他模式（线上 测试 等）不会生成额外的文件。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/04/13/webpack-监听html文件/" data-id="ck71asp5d004nsr9f5ae5rwku" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-React组件间数据传递" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/05/React组件间数据传递/" class="article-date">
  <time datetime="2016-04-05T04:57:41.000Z" itemprop="datePublished">2016-04-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/05/React组件间数据传递/">React组件间数据传递</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>组件间的数据管理，可以使用flux，redux，reflux等方案，如果不使用这些方案，组件间该如何传递数据？本文提供了几个办法。</p>
<h2 id="组件关系"><a href="#组件关系" class="headerlink" title="组件关系"></a>组件关系</h2><p>组件关系可以分为两种，一种是有层级关系得，即：父子组件；另一种是没有层级关系，即：没有公共的父级组件或者祖先组件。（感觉我在说废话)。</p>
<h2 id="父组件给子组件传递数据"><a href="#父组件给子组件传递数据" class="headerlink" title="父组件给子组件传递数据"></a>父组件给子组件传递数据</h2><p>父组件可以通过props给子组件传递数据。子组件通过this.props可以获取到父级组件传递过来的数据。</p>
<h2 id="子组件给父组件传递数据"><a href="#子组件给父组件传递数据" class="headerlink" title="子组件给父组件传递数据"></a>子组件给父组件传递数据</h2><p>父组件通过props，给子组件提供一个方法，方法是用来修改父组件数据，子组件调用方法，可以将子组件得数据传递给父组件;</p>
<p>代码片段如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> childData = &#123;&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">  <span class="keyword">return</span> &lt;ChildComponent setParentData=&#123;(dataFromChild)=&gt;childData=dataFromChild&#125;/&gt;</span><br><span class="line">&#125;</span><br><span class="line">//子组件通过调用 this.props.setParentData(dataFromChild);即可将数据传给父级组件。</span><br></pre></td></tr></table></figure></p>
<h2 id="没有层级关系的组件间传递数据"><a href="#没有层级关系的组件间传递数据" class="headerlink" title="没有层级关系的组件间传递数据"></a>没有层级关系的组件间传递数据</h2><p>可以使用发布订阅模式，进行数据通信；其实父子关系得组件间也可以使用发布订阅模式。flux，redux等解决方案，本质上其实也是发布订阅模式。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/04/05/React组件间数据传递/" data-id="ck71asp2j001nsr9fbcmfz2fk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-React-Redux-理解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/01/React-Redux-理解/" class="article-date">
  <time datetime="2016-04-01T03:58:35.000Z" itemprop="datePublished">2016-04-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/01/React-Redux-理解/">React Redux 理解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>初步对Redux的理解，进行一下总结</p>
<h2 id="组成部分"><a href="#组成部分" class="headerlink" title="组成部分"></a>组成部分</h2><h3 id="views"><a href="#views" class="headerlink" title="views"></a>views</h3><p>组件可以分为两类，component-views controller-views</p>
<h4 id="components-views"><a href="#components-views" class="headerlink" title="components-views"></a>components-views</h4><p>这个名字是我自己起的，这类组件职责如下：</p>
<ul>
<li>接受父组件（controller-views）的props做展示；</li>
<li>调用父组件的方法（通过props传递的），改变数据，一般组件中的事件（比如点击事件），通过pros调用父组件的方法。</li>
</ul>
<h4 id="controller-views"><a href="#controller-views" class="headerlink" title="controller-views"></a>controller-views</h4><p>顾名思义，这个view有控制器的功能，主要的作用如下：</p>
<ul>
<li>包含组装其他组件（component-views），通过props为其他组件提供数据；</li>
<li>通过props.dispatch调用actions中的方法，处理业务逻辑；</li>
<li>通过props为子组件提供方法,供子组件调用。</li>
<li>需要通过react-redux connect方法进行包装，将state转换成props。</li>
</ul>
<h3 id="actions"><a href="#actions" class="headerlink" title="actions"></a>actions</h3><p>为controller-vers提供语义化API，actions中的方法一般只是单纯的返回一个action对象，action约定有个type属性，用来让reducers区分什么样的操作。</p>
<h3 id="reducers"><a href="#reducers" class="headerlink" title="reducers"></a>reducers</h3><p>一些纯函数，接受两个参数，原state数据和action，返回处理好的state，函数中药注意，不要直接改变形参的state，通过assign方法，重新创建一个state，然后返回新建并处理过的state。</p>
<h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p><a href="http://redux.js.org/" target="_blank" rel="noopener">英文文档</a></p>
<p><a href="http://camsong.github.io/redux-in-chinese/index.html" target="_blank" rel="noopener">中文文档</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/04/01/React-Redux-理解/" data-id="ck71asp2e001dsr9fksk35gb2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redux/">Redux</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-分页实现方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/28/分页实现方法/" class="article-date">
  <time datetime="2016-03-28T01:57:41.000Z" itemprop="datePublished">2016-03-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实现方案/">实现方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/28/分页实现方法/">分页实现方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="limit-offset，count的方式实现分页"><a href="#limit-offset，count的方式实现分页" class="headerlink" title="limit offset，count的方式实现分页"></a>limit offset，count的方式实现分页</h2><p>这种分页方式可以提供完整的分页信息，比如页码，总页数（需要计算），总记录数等。</p>
<p>前端需要传给后台两个参数：当前页，每页显示记录数(currentPage,pageSize)或者一个参数：当前页（currentPage），每页显示记录数（pageSize）由后台自己提供。</p>
<p>offest和count计算方式如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> offset = (currentPage-<span class="number">1</span>)*pageSize;</span><br><span class="line"><span class="keyword">int</span> count = pageSize;</span><br></pre></td></tr></table></figure></p>
<p>MySql分页查询语句如下<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">LIMIT</span> <span class="keyword">offset</span>,<span class="keyword">count</span>; <span class="comment">-- offset 和 count替换成上面计算得结果。</span></span><br></pre></td></tr></table></figure></p>
<p>查询总记录数(totalCount)Sql语句如下<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">FROM</span> <span class="keyword">table</span></span><br></pre></td></tr></table></figure></p>
<p>计算总页数<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> totalCount = Math.ceil(totalCount/pageSize);<span class="comment">//向上取整</span></span><br></pre></td></tr></table></figure></p>
<h2 id="preCursor-nextCursor方式分页"><a href="#preCursor-nextCursor方式分页" class="headerlink" title="preCursor nextCursor方式分页"></a>preCursor nextCursor方式分页</h2><p>这种方式分页不显示页码级总页数，总记录数等分页信息，适用于只有两个分页按钮（上一页，下一页），无限加载情况。</p>
<p>前端需要给后台传两个参数nextCursor（或者preCursor） 和 pageSize（pageSize也可以后台自己提供）</p>
<p>下一页（无限加载）对应的sql语句<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">WHERE</span> created_at&gt;nextCursor <span class="keyword">ORDER</span> <span class="keyword">BY</span> created_at <span class="keyword">DESC</span> <span class="keyword">LIMIT</span> pageSize; <span class="comment">-- nextCursor 和 pageSize 替换成对应的值</span></span><br></pre></td></tr></table></figure></p>
<p>上一页对应的sql语句<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">WHERE</span> created_at&lt;preCursor <span class="keyword">ORDER</span> <span class="keyword">BY</span> created_at <span class="keyword">DESC</span> <span class="keyword">LIMIT</span> pageSize; <span class="comment">-- preCursor 和 pageSize 替换成对应的值</span></span><br></pre></td></tr></table></figure></p>
<p>其中nextCursor和preCursor存的是created_at的一个值，比如一次行查出10条数据，那么nextCursor存的就是第十条数据的created_at值，preCursor存的就是第一条数据created_at值。preCursor 和 nextCursor 需要传给前端，便于下次翻页的时候前端再传给后端。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/28/分页实现方法/" data-id="ck71asp5z005wsr9fwn0gmb2o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分页/">分页</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-前端编码规范" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/24/前端编码规范/" class="article-date">
  <time datetime="2016-03-24T07:03:27.000Z" itemprop="datePublished">2016-03-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/24/前端编码规范/">前端编码规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>通用规范请参阅如下链接，如有冲突，以本文为准。</p>
<ul>
<li><a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener">https://github.com/airbnb/javascript</a></li>
<li><a href="http://alloyteam.github.io/CodeGuide/" target="_blank" rel="noopener">http://alloyteam.github.io/CodeGuide/</a></li>
<li><a href="https://github.com/airbnb/javascript/tree/master/react" target="_blank" rel="noopener">https://github.com/airbnb/javascript/tree/master/react</a></li>
</ul>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><p>项目中可以使用ESLint，辅助实现规范</p>
<p>IntelliJ IDEA the Java IDE（IntelliJ系列） 配置：</p>
<p><em>.eslintrc.js配置文件项目中已经加入，相关包已经安装了，注意第一次使用时<code>npm install</code> eslint相关包</em></p>
<p>IDE 左上角 File -&gt; Settings 打开settings，配置如下图<br><img src="idea-eslint-config.png" alt="IntelliJ系列，ESLint配置图片"></p>
<h2 id="规范目的"><a href="#规范目的" class="headerlink" title="规范目的"></a>规范目的</h2><p>为了提高团队开发效率，减少沟通障碍，以及便于后期维护扩展，特制定此规范。本规范一经大家确认，前端开发人员必须按照此规范进行前端开发。规范中如有不恰之处，请及时提出，经讨论后修改或完善此规范。</p>
<h2 id="基本准则"><a href="#基本准则" class="headerlink" title="基本准则"></a>基本准则</h2><p>模块化，组件化，语义化jsx（html），结构（jsx）表现（css或less）行为（js）分离。</p>
<h2 id="文件规范"><a href="#文件规范" class="headerlink" title="文件规范"></a>文件规范</h2><ol>
<li>文件夹，文件命名，要使用语义化的英文，不允许使用缩写，数字。</li>
<li>架构相关，非业务文件归档至<code>assets/src/framework</code>；</li>
<li>公共方法归档至<code>assets/src/common</code>，注意，这个文件夹存放公共的方法，而非组件，添加之后QQ或邮件通知全体前端开发人员；</li>
<li>公共自定义组件归档至<code>assets/src/component</code>，并写好README，QQ或邮件通知全体前端开发人员；</li>
<li>业务模块统一归档至<code>assets/src/page</code>；</li>
<li>图片个数超过5个以上，要归档至当前模块文件夹下的<code>imgs/</code>文件夹中；</li>
<li>一个功能模块新建一个文件夹，一个模块相关的文件（html，css，js，jsx，images），归档至对应的模块文件夹中，当此模块不需要时，删除此模块对应的文件夹，即可将此模块相关文件全部移除；</li>
<li>文件夹命名：小写英文+连字符（减号），比如：<code>account-manage</code>；</li>
<li>文件命名： 驼峰式命名，首字母大写：比如<code>AccountManage.jsx</code>;一个文件一个类，而且文件名和类名必须完全一致，默认export类名（或者变量名）与文件名完全一致。</li>
<li><p>添加修改页面，文件名以Edit结尾,列表页面，文件名以List结尾，详情页面以Detail结尾；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AccountEdit.jsx</span><br><span class="line">AccountDetail.jsx</span><br><span class="line">AccountList.jsx</span><br></pre></td></tr></table></figure>
</li>
<li><p>css/less命名：一个模块下基本就包含一个css/less文件，命名为style.css/style.less即可；</p>
</li>
<li>图片：小写英文+连字符（减号），比如：<code>user-avatar.jpg</code></li>
<li>文件之间的依赖，统一使用ES6写法：<code>import request from &#39;xxx.jsx&#39;</code>；</li>
<li>统一使用ES6得模块写法（<code>import</code>,<code>export</code>），不要使用其他方式。</li>
</ol>
<h2 id="jsx"><a href="#jsx" class="headerlink" title="jsx"></a>jsx</h2><ol>
<li><p>文件名必须和默认输出完全保持一致</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file CheckBox.js or CheckBox.jsx</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CheckBox</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> CheckBox;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> CheckBox <span class="keyword">from</span> <span class="string">'./CheckBox'</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>import必须写在文件的头部，未使用到的引入，要删除。</p>
</li>
<li>export必须写在文件底部，通过export {aaa,bbb,Ccc as ccc }方式导出多个变量，通过export default aaa 导出默认变量。</li>
<li><p>import各类型文件顺序</p>
<ul>
<li>css/less文件</li>
<li>第三方模块</li>
<li>自定义模块</li>
<li>图片</li>
<li>声明模块变量</li>
</ul>
<p>比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// css/less文件</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./style.less'</span>;</span><br><span class="line"><span class="comment">//第三方模块</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;Link&#125; <span class="keyword">from</span> <span class="string">'react-router'</span></span><br><span class="line"><span class="keyword">import</span> assign <span class="keyword">from</span> <span class="string">'object-assign'</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">'moment'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;message, Button, Row, Col, Tabs, Progress &#125; <span class="keyword">from</span> <span class="string">'antd'</span></span><br><span class="line"><span class="comment">//自定义模块</span></span><br><span class="line"><span class="keyword">import</span> Page <span class="keyword">from</span> <span class="string">'../../framework/page/Page'</span>;</span><br><span class="line"><span class="keyword">import</span> ajax <span class="keyword">from</span> <span class="string">'../../framework/common/ajax'</span></span><br><span class="line"><span class="comment">//图片</span></span><br><span class="line"><span class="keyword">import</span> UserAvatar <span class="keyword">from</span> <span class="string">'./user-avatar.jpg'</span></span><br><span class="line"><span class="comment">// 模块变量</span></span><br><span class="line"><span class="keyword">const</span> TabPane = Tabs.TabPane;</span><br><span class="line"><span class="keyword">const</span> ProgressLine = Progress.Line;</span><br><span class="line"></span><br><span class="line"><span class="comment">//或者这样：</span></span><br><span class="line"><span class="comment">// css/less文件</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./style.less'</span>;</span><br><span class="line"><span class="comment">//第三方模块</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;Link&#125; <span class="keyword">from</span> <span class="string">'react-router'</span></span><br><span class="line"><span class="keyword">import</span> assign <span class="keyword">from</span> <span class="string">'object-assign'</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">'moment'</span>;</span><br><span class="line"><span class="comment">//自定义模块</span></span><br><span class="line"><span class="keyword">import</span> Page <span class="keyword">from</span> <span class="string">'../../framework/page/Page'</span>;</span><br><span class="line"><span class="keyword">import</span> ajax <span class="keyword">from</span> <span class="string">'../../framework/common/ajax'</span></span><br><span class="line"><span class="comment">//图片</span></span><br><span class="line"><span class="keyword">import</span> UserAvatar <span class="keyword">from</span> <span class="string">'./user-avatar.jpg'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//一次性引入过多，最好使用如下方式，方便增，删</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  message,</span><br><span class="line">  Button,</span><br><span class="line">  Row,</span><br><span class="line">  Col,</span><br><span class="line">  Tabs,</span><br><span class="line">  Form,</span><br><span class="line">  Modal,</span><br><span class="line">  Input,</span><br><span class="line">  InputNumber,</span><br><span class="line">  DatePicker,</span><br><span class="line">  Radio,</span><br><span class="line">  Checkbox,<span class="comment">//保留这个逗号，方便增，删</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'antd'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 模块变量</span></span><br><span class="line"><span class="keyword">const</span> TabPane = Tabs.TabPane;</span><br><span class="line"><span class="keyword">const</span> ProgressLine = Progress.Line;</span><br></pre></td></tr></table></figure>
</li>
<li><p>声明引用一个第三方模块的变量，必须使用const</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TabPane = Tabs.TabPane;</span><br><span class="line"><span class="keyword">const</span> ProgressLine = Progress.Line;</span><br></pre></td></tr></table></figure>
</li>
<li><p>尽量使用<code>const</code>声明变量，其次使用<code>let</code>，不允许使用<code>var</code></p>
</li>
<li><p>React统一使用ES6写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 是否考虑创建一个BaseComponent，其他类继承BaseComponent？</span></span><br><span class="line"><span class="comment">// BaseComponent中可以封装一些常用方法。</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 初始化state,替代原getInitialState, 注意前面没有static</span></span><br><span class="line">    state = &#123;</span><br><span class="line">        showMenu:<span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 替代原propTypes，指定props参数规范， 属性,注意前面有static,属于静态方法.</span></span><br><span class="line">    <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">        autoPlay: React.PropTypes.bool.isRequired</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 默认defaultProps,替代原getDefaultProps方法, 注意前面有static,属于静态方法.</span></span><br><span class="line">    <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">        loading:<span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="comment">// do something yourself...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 事件的写法,这里要使用箭头函数,箭头函数不会改变this的指向,否则函数内,this指的就不是当前对象了</span></span><br><span class="line">    <span class="comment">// React.CreatClass方式React会自动绑定this,ES6写法不会.</span></span><br><span class="line">    handleClick = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setState();<span class="comment">//这里的this指的还是App</span></span><br><span class="line">    &#125;;</span><br><span class="line">    render()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>jsx类的结构顺序：</p>
<ul>
<li>constructor</li>
<li>state</li>
<li>static propTypes</li>
<li>static defaultProps</li>
<li>其他自定义属性或静态（类）属性</li>
<li>周期函数componentDidMount等</li>
<li>自定义函数handle系列等</li>
<li>其他自定义辅助函数</li>
<li>render</li>
</ul>
<p>遵循这样的约定，方便快速查找各部分代码。</p>
</li>
<li><p>jsx中事件属性，统一on开头，比如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Sidebar</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span> <span class="attr">onToggle</span>=<span class="string">&#123;this.handleToggle&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Sidebar</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>事件处理函数命名，统一<code>handle</code>开头，驼峰式命名，比如：<code>handleClick</code> <code>handleToggle</code>等</p>
</li>
<li><p>事件统一使用箭头函数，箭头行数不会改变向上文（<code>this</code>指向），不必使用<code>bind</code>了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleClick = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Do something here!</span></span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>请求统一使用封装过的request</p>
</li>
<li>提示信息统一使用 src/common.jsx/MESSAGE_CONTENT中维护的内容。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量命名 取名字比较费劲 可读性较好</span></span><br><span class="line">exports <span class="keyword">const</span> MESSAGE_CONTENT = &#123;</span><br><span class="line">    OPERATE_SUCCESS:<span class="string">'操作成功'</span>,</span><br><span class="line">    OPERATE_FAILED:<span class="string">'操作失败'</span>,</span><br><span class="line">    LOGIN_SUCCESS:<span class="string">'登陆成功'</span>,</span><br><span class="line">    STORE_NAME_CAN_NOT_BE_NULL:<span class="string">'门店不能为空'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="less-css"><a href="#less-css" class="headerlink" title="less/css"></a>less/css</h2><ol>
<li>每个模块如果只有一个less/css文件，要命名为<code>style.less/style.css</code></li>
<li>类名/id名 小写英文+连字符，比如：<code>.user-avatar</code></li>
<li><p>各个模块的样式，以一个大的父级开始写起，避免各个模块样式冲突</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.account-manage</span>&#123;</span><br><span class="line">  <span class="selector-class">.block</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-id">#some-id</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写less时，避免嵌套多层（最多不要超过3层）。不要编写太过于复杂的less。</p>
</li>
</ol>
<h2 id="路由结构规范"><a href="#路由结构规范" class="headerlink" title="路由结构规范"></a>路由结构规范</h2><p><em>特殊情况，不能按照规范实现，与各位leader商榷</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/m/1 对应商户 1 为商户id</span><br><span class="line">/s/2 对应门店 2 为门店id</span><br><span class="line">多单词使用“_”链接，不要使用“-”，或其他特殊字符。</span><br><span class="line">根据菜单结构，定义url结构，RestFull 约定，具体看下面例子。</span><br></pre></td></tr></table></figure></p>
<p>例如：<br>菜单结构：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">品牌</span><br><span class="line">  -门店</span><br><span class="line">    -门店管理</span><br></pre></td></tr></table></figure></p>
<p>对应的菜单为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">列表页：</span><br><span class="line">http:localhost:8080/m/1/stores</span><br><span class="line">详情页</span><br><span class="line">http:localhost:8080/m/1/stores/12</span><br><span class="line">添加页</span><br><span class="line">http:localhost:8080/m/1/stores/new</span><br><span class="line">修改页</span><br><span class="line">http:localhost:8080/m/1/stores/12/edit</span><br></pre></td></tr></table></figure></p>
<p>菜单结构<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">门店  # store</span><br><span class="line">  -订单 # order 一级</span><br><span class="line">    -外卖订单 # take_out 二级</span><br><span class="line">      -新订单 # new_order 可点击跳转页面</span><br><span class="line">      -所有订单 # all_order 可点击跳转页面</span><br></pre></td></tr></table></figure></p>
<p>对应的菜单为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">列表页</span><br><span class="line">http:localhost:8080/m/1/s/2/order/take_out/new_orders</span><br><span class="line">详情页</span><br><span class="line">http:localhost:8080/m/1/s/2/order/take_out/new_orders/12</span><br><span class="line">添加页</span><br><span class="line">http:localhost:8080/m/1/s/2/order/take_out/new_orders/new</span><br><span class="line">修改页</span><br><span class="line">http:localhost:8080/m/1/s/2/order/take_out/new_orders/21/edit</span><br></pre></td></tr></table></figure></p>
<p><strong>未完待续</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/24/前端编码规范/" data-id="ck71asp7v00b8sr9f5h66y7rs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编码规范/">编码规范</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-Intellij-IDEA-Maven3-cannot-resolve-symbol" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/21/Intellij-IDEA-Maven3-cannot-resolve-symbol/" class="article-date">
  <time datetime="2016-03-21T11:29:13.000Z" itemprop="datePublished">2016-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/21/Intellij-IDEA-Maven3-cannot-resolve-symbol/">Intellij IDEA Maven3 cannot resolve symbol</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>Intellij IDEA + Maven3 模块无法引入得问题，编辑器上显示红色下滑线，maven可以正常编译项目，项目也可以运行，就是编辑器有红色得提示，碍眼。网上搜索了一些解决办法，但是没什么鸟用。那就应该是缓存问题，清理一下重启Idea就Ok了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">File -&gt; Invalidate Caches/Restart...</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/21/Intellij-IDEA-Maven3-cannot-resolve-symbol/" data-id="ck71asp1m0006sr9f4a735m19" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/错误/">错误</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-本地新建文件夹并提交到github上" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/17/本地新建文件夹并提交到github上/" class="article-date">
  <time datetime="2016-03-17T06:56:35.000Z" itemprop="datePublished">2016-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/17/本地新建文件夹并提交到github上/">本地新建文件夹并提交到github上</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>先手动在github官网上创建一个空的仓库,名为repo-name</p>
<p>方法一:通过命令clone到本地,一般是还没有写任何代码,clone下来之后再写内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:your-name/repo-name.git</span><br><span class="line">or</span><br><span class="line">git clone https://github.com/your-name/repo-name.git</span><br></pre></td></tr></table></figure></p>
<p>注意:https方式ssh-key不起作用,每次push都要输入账号密码</p>
<p>方法二:本地已经写好文件了,然后才创建的github仓库。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd 到本地文件夹</span><br><span class="line">git init</span><br><span class="line">git add --all</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin git@github.com:your-name/repo-name.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></p>
<h2 id="编辑完成之后，提交命令"><a href="#编辑完成之后，提交命令" class="headerlink" title="编辑完成之后，提交命令"></a>编辑完成之后，提交命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add --all</span><br><span class="line">git commit -m &apos;这里写注释&apos;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/17/本地新建文件夹并提交到github上/" data-id="ck71asp6j0073sr9fxk7pe20a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/">github</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-npm-scripts-跨平台写法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/17/npm-scripts-跨平台写法/" class="article-date">
  <time datetime="2016-03-17T06:20:43.000Z" itemprop="datePublished">2016-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/构建/">构建</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/17/npm-scripts-跨平台写法/">npm scripts 跨平台写法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p> Unix 或者 Windows 的命令行脚本写法有些不同,在不精通这些脚本命令的情况下,可以通过一些工具达到跨平台,使用起来也非常简单.</p>
<p>一个package.json文件实例：源码<a href="https://github.com/zkboys/npm-scripts" target="_blank" rel="noopener">戳这里</a><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"cross-env"</span>: <span class="string">"^1.0.7"</span>,</span><br><span class="line">    <span class="attr">"mkdirp"</span>: <span class="string">"^0.5.1"</span>,</span><br><span class="line">    <span class="attr">"ncp"</span>: <span class="string">"^2.0.0"</span>,</span><br><span class="line">    <span class="attr">"rimraf"</span>: <span class="string">"^2.5.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"my"</span>: <span class="string">"rimraf my &amp;&amp; mkdirp my &amp;&amp; ncp build my &amp;&amp; cross-env MOD=pro node my.js"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>相应的模块官网:</p>
<p><a href="https://www.npmjs.com/package/rimraf" target="_blank" rel="noopener">删除目录 rimraf</a></p>
<p><a href="https://www.npmjs.com/package/mkdirp" target="_blank" rel="noopener">创建目录 mkdirp</a></p>
<p><a href="https://www.npmjs.com/package/cross-env" target="_blank" rel="noopener">传递参数 cross-env</a></p>
<p><a href="https://www.npmjs.com/package/ncp" target="_blank" rel="noopener">复制 ncp</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/17/npm-scripts-跨平台写法/" data-id="ck71asp530043sr9fyn535x22" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/">npm</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-React-ES6写法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/17/React-ES6写法/" class="article-date">
  <time datetime="2016-03-17T05:55:12.000Z" itemprop="datePublished">2016-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/17/React-ES6写法/">React ES6写法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>React 最新版本支持ES6的写法,配合上Babel,写起来挺嗨的,总结一下ES6的一些写法:</p>
<h2 id="React-ES6-写法"><a href="#React-ES6-写法" class="headerlink" title="React ES6+写法"></a>React ES6+写法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 多加一层继承, 可以在baseComponent中做一些文章.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">baseComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...其他公用代码,方法等封装</span></span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">//定义类 并继承baseComponent</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">baseComponent</span></span>&#123;</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 初始化state,替代原getInitialState, 注意前面没有static</span></span><br><span class="line">    state = &#123;</span><br><span class="line">        showMenu:<span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 替代原propTypes 属性,注意前面有static,属于静态方法.</span></span><br><span class="line">    <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">        autoPlay: React.PropTypes.bool.isRequired</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 默认defaultProps,替代原getDefaultProps方法, 注意前面有static</span></span><br><span class="line">    <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">        loading:<span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 事件的写法,这里要使用箭头函数,箭头函数不会改变this的指向,否则函数内,this指的就不是当前对象了</span></span><br><span class="line">    <span class="comment">// React.CreatClass方式React会自动绑定this,ES6写法不会.详见下一小节说明.</span></span><br><span class="line">    handleClick = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setState();<span class="comment">//这里的this指的还是App</span></span><br><span class="line">    &#125;;</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="comment">// React内置的周期函数,这里要显示的调用父类的相应函数,</span></span><br><span class="line">        <span class="comment">// 否则一旦父类中有封装,子类会把父类相应函数覆盖掉,不会执行父类的函数.</span></span><br><span class="line">        <span class="comment">// 需要判断一下...父类一旦没有实现componentDidMount,这里直接调用就会报错,</span></span><br><span class="line">        <span class="comment">// 最好是父类都实现相应的方法,子类就不用判断了.</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">super</span>.componentDidMount) &#123;</span><br><span class="line">            <span class="keyword">super</span>.componentDidMount();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// do something yourself...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="官方的一个例子"><a href="#官方的一个例子" class="headerlink" title="官方的一个例子:"></a>官方的一个例子:</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;<span class="attr">count</span>: props.initialCount&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  tick() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">count</span>: <span class="keyword">this</span>.state.count + <span class="number">1</span>&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div onClick=&#123;<span class="keyword">this</span>.tick.bind(<span class="keyword">this</span>)&#125;&gt;</span><br><span class="line">        Clicks: &#123;<span class="keyword">this</span>.state.count&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">Counter.propTypes = &#123; initialCount: React.PropTypes.number &#125;;</span></span><br><span class="line"><span class="regexp">Counter.defaultProps = &#123; initialCount: 0 &#125;;</span></span><br></pre></td></tr></table></figure>
<h2 id="React-ES6-事件绑定"><a href="#React-ES6-事件绑定" class="headerlink" title="React ES6 事件绑定"></a>React ES6 事件绑定</h2><p>官方原话:</p>
<blockquote>
<p>Autobinding: When creating callbacks in JavaScript, you usually need to explicitly bind a method to its instance such that the value of this is correct. With React, every method is automatically bound to its component instance. React caches the bound method such that it’s extremely CPU and memory efficient. It’s also less typing!</p>
</blockquote>
<p>新的ES6写法如果要实现this还指向当前对象,有三种写法:个人感觉箭头函数写法最优雅.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">第一种:<span class="keyword">this</span>._handleClick.bind(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">_handleClick(e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;h1 onClick=&#123;<span class="keyword">this</span>._handleClick.bind(<span class="keyword">this</span>)&#125;&gt;点击&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">第二种:<span class="keyword">this</span>._handleClick = <span class="keyword">this</span>._handleClick.bind(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>._handleClick = <span class="keyword">this</span>._handleClick.bind(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">_handleClick(e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;h1 onClick=&#123;<span class="keyword">this</span>._handleClick&#125;&gt;点击&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">第三种:_handleClick = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">_handleClick = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 使用箭头函数(arrow function)</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;h1 onClick=&#123;<span class="keyword">this</span>._handleClick&#125;&gt;点击&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="React-ES6-写法-做封装一些待解决的问题"><a href="#React-ES6-写法-做封装一些待解决的问题" class="headerlink" title="React ES6 写法,做封装一些待解决的问题"></a>React ES6 写法,做封装一些待解决的问题</h2><ul>
<li>多层继承,props state等属性如何继承?</li>
<li>一些周期函数子类如何自动调用?而不是super.componentDidMount()这种显示调用</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/17/React-ES6写法/" data-id="ck71asp2c0018sr9ftledm27j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-前端工程化构建" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/15/前端工程化构建/" class="article-date">
  <time datetime="2016-03-15T02:34:37.000Z" itemprop="datePublished">2016-03-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/构建/">构建</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/15/前端工程化构建/">前端工程化构建</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>目前前端组件化，工程化，构建等概念越来越流行，根据自己的理解，如果要构建一个组件化，工程化的系统，需要做哪些事情，最近一篇文章不错，引用过来～</p>
<p><a href="http://www.tuicool.com/articles/rmYN7bV" target="_blank" rel="noopener">告别刀耕火种:浅谈VisMooc的前端工程化</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/15/前端工程化构建/" data-id="ck71asp660069sr9fhf4c7mf9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-模块模式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/14/模块模式/" class="article-date">
  <time datetime="2016-03-14T08:07:16.000Z" itemprop="datePublished">2016-03-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/14/模块模式/">模块模式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>模块模式是用来封装逻辑并避免全局命名空间污染的好方法。 使用匿名函数可以做到这一点， 匿名函数也是JavaScript 中被证明最优秀的特性之一。 通常是创建一个匿名函数并立即执行它。 在匿名函数里的逻辑都在闭包里运行， 为应用中的变量提供了局部作用域和私有的运行环境 ：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<h2 id="全局导入"><a href="#全局导入" class="headerlink" title="全局导入"></a>全局导入</h2><p>模块内部的变量都是局部变量，全局命名空间无法访问，但是模块内部可以访问全局变量，模块中的变量很难一眼就看出来是全局变量还是局部变量，隐身的全局变量由于解释器要遍历作用域链的原因，会是程序变得更慢，局部变量的读取往往更快更高效。</p>
<p>将全局变量以函数参数的方式传入匿名函数，可以将全局变量导入模块中。这种方式比隐式的全局对象更加简洁而且速度更快 ：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">&#125;)(jQuery);</span><br></pre></td></tr></table></figure></p>
<p>模块中不要使用隐式全局变量，全局变量要通过参数传入匿名函数</p>
<h2 id="全局导出"><a href="#全局导出" class="headerlink" title="全局导出"></a>全局导出</h2><p>理想状况下应当使用尽可能少的全局变量， 但总会有某些特殊场景用到全局变量。 可以将页面的 window 导入我们的模块， 直接给它定义属性， 通过这种方式可以暴露全局变量 ：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$, exports</span>)</span>&#123;</span><br><span class="line">    exports.Foo = <span class="string">"wem"</span>;</span><br><span class="line">&#125;)(jQuery, <span class="built_in">window</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="添加少量上下文"><a href="#添加少量上下文" class="headerlink" title="添加少量上下文"></a>添加少量上下文</h2><p>使用局部上下文是一种架构模块很有用的方法， 特别是当需要给事件注册回调函数时。</p>
<p>实际情况是， 模块中的上下文都是全局的， this 就是 window ：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  assertEqual( <span class="keyword">this</span>, <span class="built_in">window</span> );</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<p>如果想自定义作用域的上下文， 则需要将函数添加至一个对象中， 比如 ：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> mod = &#123;&#125;;</span><br><span class="line">  mod.contextFunction = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    assertEqual( <span class="keyword">this</span>, mod );</span><br><span class="line">  &#125;;</span><br><span class="line">  mod.contextFunction();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<p>在 contextFunction() 中的上下文不是全局的， 而是 mod 对象。 这时使用 this 就不必担心会创建全局变量了。 为了展示如何在实际中更好地使用这种技术， 我们对例子做进一步修改 ：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> mod = &#123;&#125;;</span><br><span class="line">    mod.load = <span class="function"><span class="keyword">function</span> (<span class="params">func</span>) </span>&#123;</span><br><span class="line">        $($.proxy(func, <span class="keyword">this</span>));</span><br><span class="line">    &#125;;</span><br><span class="line">    mod.load(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.view = $(<span class="string">"#view"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    mod.assetsClick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 处理点击</span></span><br><span class="line">    &#125;;</span><br><span class="line">    mod.load(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.view.find(<span class="string">".assets"</span>).click(</span><br><span class="line">            $.proxy(<span class="keyword">this</span>.assetsClick, <span class="keyword">this</span>)</span><br><span class="line">        );</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)(jQuery);</span><br></pre></td></tr></table></figure></p>
<p>这里新建了 load() 函数来处理回调， 当页面加载后执行它。 注意， 我们使用了 jQuery.proxy() 来确保回调是基于正确的上下文执行的。</p>
<p>然后， 当页面加载时， 我们给一个元素添加了点击事件监听， 这里使用了局部函数assetsClick() 作为回调函数。</p>
<p>摘自：《基于MVC的JavaScript Web富应用开发》</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/14/模块模式/" data-id="ck71asp6l0077sr9f7u6e6d6d" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-JS函数节流" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/14/JS函数节流/" class="article-date">
  <time datetime="2016-03-14T07:44:57.000Z" itemprop="datePublished">2016-03-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/14/JS函数节流/">JS函数节流/截流</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>平时作网页的时候，会给window添加resize，scroll事件，这些事件触发频率比较高，如果事件实现比较复杂，性能较低，可以使用节流/截流方式</p>
<p><em>也不知道谁起的名，一个叫节流，一个叫截流</em></p>
<h2 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h2><p>每间隔一个固定的时间调用一次函数，以$(window).resize()为列：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timer = <span class="number">0</span>;</span><br><span class="line">    $(<span class="built_in">window</span>).resize(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">            timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">//do something...</span></span><br><span class="line">                timer = <span class="number">0</span>;</span><br><span class="line">            &#125;, <span class="number">250</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).trigger(<span class="string">'resize'</span>);<span class="comment">//页面初始化的时候立即调用一次</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>节流的一个封装<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> throttle = <span class="function"><span class="keyword">function</span> (<span class="params">action, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timeout = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">let</span> lastRun = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (timeout) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> elapsed = <span class="built_in">Date</span>.now() - lastRun</span><br><span class="line">        <span class="keyword">let</span> context = <span class="keyword">this</span></span><br><span class="line">        <span class="keyword">let</span> args = <span class="built_in">arguments</span></span><br><span class="line">        <span class="keyword">let</span> runCallback = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                lastRun = <span class="built_in">Date</span>.now()</span><br><span class="line">                timeout = <span class="literal">false</span></span><br><span class="line">                action.apply(context, args)</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span> (elapsed &gt;= delay) &#123;</span><br><span class="line">            runCallback()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            timeout = setTimeout(runCallback, delay)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="built_in">window</span>).resize(throttle(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'我会100ms被调用一次'</span>);</span><br><span class="line">&#125;, <span class="number">100</span>));</span><br></pre></td></tr></table></figure></p>
<h2 id="截流"><a href="#截流" class="headerlink" title="截流"></a>截流</h2><p>实现一个搜索功能，用户输入停止300后触发一次搜索事件。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> searchTimeout,</span><br><span class="line">    searchDelay = <span class="number">300</span>;</span><br><span class="line">$(<span class="string">'#search'</span>).on(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    clearTimeout(searchTimeout);</span><br><span class="line">    searchTimeout = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $ajaxForm.triggerHandler(<span class="string">'submit'</span>);</span><br><span class="line">    &#125;, searchDelay);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/14/JS函数节流/" data-id="ck71asp1s000bsr9fzdcvkyfw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-emmet语法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/11/emmet语法/" class="article-date">
  <time datetime="2016-03-11T06:35:53.000Z" itemprop="datePublished">2016-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/11/emmet语法/">emmet语法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="element标签名"><a href="#element标签名" class="headerlink" title="element标签名"></a><code>element</code>标签名</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h2 id="IDid选择符"><a href="#IDid选择符" class="headerlink" title="IDid选择符"></a><code>ID</code>id选择符</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div#some-id 或者 #some-id</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div id=&quot;some-id&quot;&gt;&lt;div&gt;</span><br></pre></td></tr></table></figure>
<h2 id="CLASS类选择符"><a href="#CLASS类选择符" class="headerlink" title="CLASS类选择符"></a><code>CLASS</code>类选择符</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div.some-class 或者 .some-class</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div class=&quot;some-class&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h2 id="gt-嵌套，直接子节点"><a href="#gt-嵌套，直接子节点" class="headerlink" title="&gt; 嵌套，直接子节点"></a><code>&gt;</code> 嵌套，直接子节点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">div&gt;ul&gt;li</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h2 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="+兄弟节点"></a><code>+</code>兄弟节点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">div+p+bq</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;p&gt;&lt;/p&gt;</span><br><span class="line">&lt;blockquote&gt;&lt;/blockquote&gt;</span><br></pre></td></tr></table></figure>
<h2 id="切换上下文，返回上一级"><a href="#切换上下文，返回上一级" class="headerlink" title="^切换上下文，返回上一级"></a><code>^</code>切换上下文，返回上一级</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">div+div&gt;p&gt;span+em^bq</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;p&gt;&lt;span&gt;&lt;/span&gt;&lt;em&gt;&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">    &lt;blockquote&gt;&lt;/blockquote&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="可以多个一起使用，每一个返回一级"><a href="#可以多个一起使用，每一个返回一级" class="headerlink" title="可以多个一起使用，每一个返回一级"></a>可以多个一起使用，每一个返回一级</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">div+div&gt;p&gt;span+em^^^bq</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;p&gt;&lt;span&gt;&lt;/span&gt;&lt;em&gt;&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;blockquote&gt;&lt;/blockquote&gt;</span><br></pre></td></tr></table></figure>
<h2 id="重复多个"><a href="#重复多个" class="headerlink" title="* 重复多个"></a><code>*</code> 重复多个</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ul&gt;li*5</span><br><span class="line">...will produce:</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h2 id="分组，用来分组子集，不推荐过多使用"><a href="#分组，用来分组子集，不推荐过多使用" class="headerlink" title="()分组，用来分组子集，不推荐过多使用"></a><code>()</code>分组，用来分组子集，不推荐过多使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">div&gt;(header&gt;ul&gt;li*2&gt;a)+footer&gt;p</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">    &lt;footer&gt;</span><br><span class="line">        &lt;p&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/footer&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="可以嵌套使用"><a href="#可以嵌套使用" class="headerlink" title="()可以嵌套使用"></a><code>()</code>可以嵌套使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(div&gt;dl&gt;(dt+dd)*3)+footer&gt;p</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;dl&gt;</span><br><span class="line">        &lt;dt&gt;&lt;/dt&gt;</span><br><span class="line">        &lt;dd&gt;&lt;/dd&gt;</span><br><span class="line">        &lt;dt&gt;&lt;/dt&gt;</span><br><span class="line">        &lt;dd&gt;&lt;/dd&gt;</span><br><span class="line">        &lt;dt&gt;&lt;/dt&gt;</span><br><span class="line">        &lt;dd&gt;&lt;/dd&gt;</span><br><span class="line">    &lt;/dl&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;footer&gt;</span><br><span class="line">    &lt;p&gt;&lt;/p&gt;</span><br><span class="line">&lt;/footer&gt;</span><br></pre></td></tr></table></figure>
<h2 id="用户自定义属性"><a href="#用户自定义属性" class="headerlink" title="[]用户自定义属性"></a><code>[]</code>用户自定义属性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div[title=&quot;Hello world!&quot;]</span><br><span class="line">...will produce:</span><br><span class="line">&lt;div title=&quot;Hello world!&quot; data-name=&quot;haha&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h3><ul>
<li>方括号内可以一次性写多个属性，以空格隔开，比如：[title=’H W’ data-name=haha]</li>
<li>属性可以不写属性值，比如：[title data-name]</li>
<li>属性值可以使用单引号或者双引号</li>
<li>属性值如果没有空格，可以省略引号</li>
</ul>
<h2 id="数字"><a href="#数字" class="headerlink" title="$数字"></a><code>$</code>数字</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ul&gt;li.item$*5</span><br><span class="line">...will produce:</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li class=&quot;item1&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item2&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item3&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item4&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item5&quot;&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h3 id="可以使用多个-，不足会使用0站位"><a href="#可以使用多个-，不足会使用0站位" class="headerlink" title="可以使用多个$，不足会使用0站位"></a>可以使用多个<code>$</code>，不足会使用<code>0</code>站位</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ul&gt;li.item$$$*5</span><br><span class="line">...will produce:</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li class=&quot;item001&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item002&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item003&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item004&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item005&quot;&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h3 id="控制数字开始值和顺序"><a href="#控制数字开始值和顺序" class="headerlink" title="@控制数字开始值和顺序"></a><code>@</code>控制数字开始值和顺序</h3><h4 id="倒序"><a href="#倒序" class="headerlink" title="@- 倒序"></a><code>@-</code> 倒序</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ul&gt;li.item$@-*5</span><br><span class="line">...will produce:</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li class=&quot;item5&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item4&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item3&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item2&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item1&quot;&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h4 id="n-改变数字开始位置"><a href="#n-改变数字开始位置" class="headerlink" title="@n 改变数字开始位置"></a><code>@n</code> 改变数字开始位置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ul&gt;li.item$@3*5</span><br><span class="line">...will produce:</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li class=&quot;item3&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item4&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item5&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item6&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item7&quot;&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h4 id="n-降序并改变开始位置"><a href="#n-降序并改变开始位置" class="headerlink" title="@-n 降序并改变开始位置"></a><code>@-n</code> 降序并改变开始位置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ul&gt;li.item$@-3*5</span><br><span class="line">...will produce:</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li class=&quot;item7&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item6&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item5&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item4&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item3&quot;&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h2 id="文本节点"><a href="#文本节点" class="headerlink" title="{}文本节点"></a><code>{}</code>文本节点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a&#123;Click me&#125;</span><br><span class="line">...will produce:</span><br><span class="line">&lt;a href=&quot;&quot;&gt;Click me&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<h3 id="注意如下的区别（受-gt-影响）"><a href="#注意如下的区别（受-gt-影响）" class="headerlink" title="注意如下的区别（受&gt;影响）"></a>注意如下的区别（受<code>&gt;</code>影响）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a&#123;click&#125;+b&#123;here&#125;</span><br><span class="line">...will produce:</span><br><span class="line">&lt;a href=&quot;&quot;&gt;click&lt;/a&gt;&lt;b&gt;here&lt;/b&gt;</span><br><span class="line"></span><br><span class="line">a&gt;&#123;click&#125;+b&#123;here&#125;</span><br><span class="line">...will produce:</span><br><span class="line">&lt;a href=&quot;&quot;&gt;click&lt;b&gt;here&lt;/b&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<h2 id="缺省表签名"><a href="#缺省表签名" class="headerlink" title="缺省表签名"></a>缺省表签名</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#some-id                  div#some-id</span><br><span class="line">.some-class               div.some-class</span><br><span class="line">.wrap&gt;.content            div.wrap&gt;div.content</span><br><span class="line">em&gt;.info                  em&gt;span.info</span><br><span class="line">ul&gt;.item*3                ul&gt;li.item*3</span><br><span class="line">table&gt;#row$*4&gt;[colspan=2] table&gt;tr#row$*4&gt;td[colspan=2]</span><br></pre></td></tr></table></figure>
<h3 id="缺省标签名之后，emmet会根据父级标签确定表签名，一些例子："><a href="#缺省标签名之后，emmet会根据父级标签确定表签名，一些例子：" class="headerlink" title="缺省标签名之后，emmet会根据父级标签确定表签名，一些例子："></a>缺省标签名之后，emmet会根据父级标签确定表签名，一些例子：</h3><ul>
<li>li for ul and ol</li>
<li>tr for table, tbody, thead and tfoot</li>
<li>td for tr</li>
<li>option for select and optgroup</li>
</ul>
<h2 id="lorem-生成一段虚拟文字，一般用来快速填充html，查看效果"><a href="#lorem-生成一段虚拟文字，一般用来快速填充html，查看效果" class="headerlink" title="lorem 生成一段虚拟文字，一般用来快速填充html，查看效果"></a><code>lorem</code> 生成一段虚拟文字，一般用来快速填充html，查看效果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">lorem</span><br><span class="line">...will produce:</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Alias et nemo repudiandae. Esse ex molestias numquam, possimus quaerat quas sint tempora? Asperiores dicta ducimus facilis impedit neque ratione ut vel!</span><br><span class="line"></span><br><span class="line">lorem10 //生成10个单词</span><br><span class="line">...will produce:</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolore, totam.</span><br><span class="line"></span><br><span class="line">p*4&gt;lorem</span><br><span class="line">...will produce:</span><br><span class="line">&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Qui dicta minus molestiae vel beatae natus eveniet ratione temporibus aperiam harum alias officiis assumenda officia quibusdam deleniti eos cupiditate dolore doloribus!&lt;/p&gt;</span><br><span class="line">&lt;p&gt;Ad dolore dignissimos asperiores dicta facere optio quod commodi nam tempore recusandae. Rerum sed nulla eum vero expedita ex delectus voluptates rem at neque quos facere sequi unde optio aliquam!&lt;/p&gt;</span><br><span class="line">&lt;p&gt;Tenetur quod quidem in voluptatem corporis dolorum dicta sit pariatur porro quaerat autem ipsam odit quam beatae tempora quibusdam illum! Modi velit odio nam nulla unde amet odit pariatur at!&lt;/p&gt;</span><br><span class="line">&lt;p&gt;Consequatur rerum amet fuga expedita sunt et tempora saepe? Iusto nihil explicabo perferendis quos provident delectus ducimus necessitatibus reiciendis optio tempora unde earum doloremque commodi laudantium ad nulla vel odio?&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">ul.generic-list&gt;lorem10.item*4  //10是只每行10个单词</span><br><span class="line">...will produce:</span><br><span class="line">&lt;ul class=&quot;generic-list&quot;&gt;</span><br><span class="line">    &lt;li class=&quot;item&quot;&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam vero.&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item&quot;&gt;Laboriosam quaerat sapiente minima nam minus similique illum architecto et!&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item&quot;&gt;Incidunt vitae quae facere ducimus nostrum aliquid dolorum veritatis dicta!&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;item&quot;&gt;Tenetur laborum quod cum excepturi recusandae porro sint quas soluta!&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h2 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h2><ul>
<li>空格是emmet停止转换的分隔符，一个emmt语句中，不能有空格</li>
<li>不要写太复杂的语法，写太复杂了容易出错。</li>
</ul>
<h2 id="参考连接"><a href="#参考连接" class="headerlink" title="参考连接"></a>参考连接</h2><p>emmet官网 <a href="http://docs.emmet.io/" target="_blank" rel="noopener">http://docs.emmet.io/</a><br>emmet语法查询 <a href="http://emmet.evget.com/" target="_blank" rel="noopener">http://emmet.evget.com/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/11/emmet语法/" data-id="ck71asp2x002asr9fu7q1ro8w" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/emmet/">emmet</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-css选择器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/11/css选择器/" class="article-date">
  <time datetime="2016-03-11T02:01:16.000Z" itemprop="datePublished">2016-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/CSS/">CSS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/11/css选择器/">css选择器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>闲来无事，复习一下。</p>
<table>
<thead>
<tr>
<th>选择器</th>
<th>例子</th>
<th>描述</th>
<th>CSS版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>.class</td>
<td>.active</td>
<td>类选择器</td>
<td>1</td>
</tr>
<tr>
<td>#id</td>
<td>#wrap</td>
<td>id选择器</td>
<td>1</td>
</tr>
<tr>
<td>*</td>
<td>*</td>
<td>通配符，选择所有元素</td>
<td>2</td>
</tr>
<tr>
<td>element</td>
<td>p</td>
<td>标签选择器</td>
<td>1</td>
</tr>
<tr>
<td>element,element</td>
<td>div,p</td>
<td>逗号选择符，一次性选择多个元素</td>
<td>1</td>
</tr>
<tr>
<td>element element</td>
<td>div p</td>
<td>空格选择符，选取所有后代元素</td>
<td>1</td>
</tr>
<tr>
<td>element&gt;element</td>
<td>div&gt;p</td>
<td>大于号选择符，选取直接子节点</td>
<td>2</td>
</tr>
<tr>
<td>element+element</td>
<td>div+p</td>
<td>加号选择符，紧接着之后的第一个兄弟元素（中间不能有其他元素），直接下一个。</td>
<td>2</td>
</tr>
<tr>
<td>element~element</td>
<td>div~p</td>
<td>所有之后的兄弟元素，非兄弟元素不会选中</td>
<td>3</td>
</tr>
<tr>
<td>[attr]</td>
<td>div[title]</td>
<td>含有title属性的div元素</td>
<td>2</td>
</tr>
<tr>
<td>[attr=value]</td>
<td>div[title=good]</td>
<td>选择title属性为good的div元素</td>
<td>2</td>
</tr>
<tr>
<td>[attr~=value]</td>
<td>div[title~=good]</td>
<td>title属相包含good <strong>单词</strong> 的div元素，比如title=’good boy!’可以，但是title=’goodboy’不可以</td>
<td>2</td>
</tr>
<tr>
<td>[attr竖线=value]</td>
<td>div[title竖线=go]</td>
<td>title属性以go开头的所有div元素，还不算是以某个xx开头，这个选择符只有以下几种情况可以：title=’go’ title=’go-‘ title=’go-od’ title=’go-od boy!’,<strong>需要连字符</strong>,这个选择器是不是为lang属性发明的？</td>
<td>2</td>
</tr>
<tr>
<td>[attr^=value]</td>
<td>a[src^=”https”]</td>
<td>开头：选择其 src 属性值以 “https” 开头的所有a元素</td>
<td>3</td>
</tr>
<tr>
<td>[attr$=value]</td>
<td>a[src$=”.pdf”]</td>
<td>结尾：选择其 src 属性以 “.pdf” 结尾的所有a元素</td>
<td>3</td>
</tr>
<tr>
<td>[attr*=value]</td>
<td>a[src*=”abc”]</td>
<td>包含：选择其 src 属性中包含 “abc” 子串的所有a元素</td>
<td>3</td>
</tr>
<tr>
<td>:link</td>
<td>a:link</td>
<td>选择所有未被访问的链接</td>
<td>1</td>
</tr>
<tr>
<td>:visited</td>
<td>a:visited</td>
<td>选择所有已被访问的链接</td>
<td>1</td>
</tr>
<tr>
<td>:active</td>
<td>a:active</td>
<td>选择活动链接</td>
<td>1</td>
</tr>
<tr>
<td>:hover</td>
<td>a:hover</td>
<td>选择鼠标指针位于其上的链接</td>
<td>1</td>
</tr>
<tr>
<td>:focus</td>
<td>input:focus</td>
<td>选择获得焦点的 input 元素</td>
<td>2</td>
</tr>
<tr>
<td>:first-letter</td>
<td>p:first-letter</td>
<td>选择每个 p 元素的首字母</td>
<td>1</td>
</tr>
<tr>
<td>:first-line</td>
<td>p:first-line</td>
<td>选择每个 p 元素的首行</td>
<td>1</td>
</tr>
<tr>
<td>:first-child</td>
<td>p:first-child</td>
<td>选择属于父元素的第一个子元素的每个 p 元素</td>
<td>2</td>
</tr>
<tr>
<td>:before</td>
<td>p:before</td>
<td>在每个 p 元素的内容之前插入内容</td>
<td>2</td>
</tr>
<tr>
<td>:after</td>
<td>p:after</td>
<td>在每个 p 元素的内容之后插入内容</td>
<td>2</td>
</tr>
<tr>
<td>:lang(language)</td>
<td>p:lang(it)</td>
<td>选择带有以 “it” 开头的 lang 属性值的每个p元素</td>
<td>2</td>
</tr>
<tr>
<td>:first-of-type</td>
<td>p:first-of-type</td>
<td>选择属于其父元素的首个 p 元素</td>
<td>3</td>
</tr>
<tr>
<td>:last-of-type</td>
<td>p:last-of-type</td>
<td>选择属于其父元素的最后 p 元素</td>
<td>3</td>
</tr>
<tr>
<td>:only-of-type</td>
<td>p:only-of-type</td>
<td>选择属于其父元素唯一的 p 元素</td>
<td>3</td>
</tr>
<tr>
<td>:only-child</td>
<td>p:only-child</td>
<td>选择属于其父元素的唯一子元素</td>
<td>3</td>
</tr>
<tr>
<td>:nth-child(n)</td>
<td>p:nth-child(2)</td>
<td>选择属于其父元素的第二个子元素</td>
<td>3</td>
</tr>
<tr>
<td>:nth-last-child(n)</td>
<td>p:nth-last-child(2)</td>
<td>同上，从最后一个子元素开始计数</td>
<td>3</td>
</tr>
<tr>
<td>:nth-of-type(n)</td>
<td>p:nth-of-type(2)</td>
<td>选择属于其父元素第二个 p 元素</td>
<td>3</td>
</tr>
<tr>
<td>:nth-last-of-type(n)</td>
<td>p:nth-last-of-type(2)</td>
<td>同上，但是从最后一个子元素开始计数。</td>
<td>3</td>
</tr>
<tr>
<td>:last-child</td>
<td>p:last-child</td>
<td>选择属于其父元素最后一个子元素</td>
<td>3</td>
</tr>
<tr>
<td>:root</td>
<td>:root</td>
<td>选择文档的根元素</td>
<td>3</td>
</tr>
<tr>
<td>:empty</td>
<td>p:empty</td>
<td>选择没有子元素的 p 元素（包括文本节点）</td>
<td>3</td>
</tr>
<tr>
<td>:target</td>
<td>#news:target</td>
<td>选择当前活动的 #news 元素</td>
<td>3</td>
</tr>
<tr>
<td>:enabled</td>
<td>input:enabled</td>
<td>选择每个启用的 input 元素</td>
<td>3</td>
</tr>
<tr>
<td>:disabled</td>
<td>input:disabled</td>
<td>选择每个禁用的 input 元素</td>
<td>3</td>
</tr>
<tr>
<td>:checked</td>
<td>input:checked</td>
<td>选择每个被选中的 input 元素</td>
<td>3</td>
</tr>
<tr>
<td>:not(selector)</td>
<td>:not(p)</td>
<td>选择非 p 元素的每个元素</td>
<td>3</td>
</tr>
<tr>
<td>::selection</td>
<td>::selection</td>
<td>选择被用户选取的元素部分</td>
<td>3</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/11/css选择器/" data-id="ck71asp2w0027sr9fx77l410b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-github提交代码时，即使添加了sshkey仍然需要输入密码的原因" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/10/github提交代码时，即使添加了sshkey仍然需要输入密码的原因/" class="article-date">
  <time datetime="2016-03-10T05:21:05.000Z" itemprop="datePublished">2016-03-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/10/github提交代码时，即使添加了sshkey仍然需要输入密码的原因/">github提交代码时，即使添加了ssh-key仍然需要输入密码的原因</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>原因是库克隆下来的时候使用的是https的方式，改用ssh方式就OK了,</p>
<p>将https方式改为ssh方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote rm origin</span><br><span class="line">git remote add origin git@github.com:yourusername/demo.git</span><br><span class="line">git push origin</span><br></pre></td></tr></table></figure></p>
<p>git clone　时，尽量使用ssh方式．</p>
<p>ssh-key生成方式：<a href="https://help.github.com/articles/generating-an-ssh-key/" target="_blank" rel="noopener">戳这里</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/10/github提交代码时，即使添加了sshkey仍然需要输入密码的原因/" data-id="ck71asp37002tsr9fxp7da0mv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/">github</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssh-key/">ssh-key</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-webpack文件名" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/10/webpack文件名/" class="article-date">
  <time datetime="2016-03-10T04:28:12.000Z" itemprop="datePublished">2016-03-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/构建/">构建</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/10/webpack文件名/">webpack文件名相关配置和按需加载</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="output-filename"><a href="#output-filename" class="headerlink" title="output.filename"></a>output.filename</h2><p>filename是对应于entry里面生成出来的文件名。比如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        <span class="string">"index"</span>: <span class="string">"./index.jsx"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">"[name].min.js"</span>,</span><br><span class="line">        chunkFilename: <span class="string">"[name].min.js"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>生成出来的文件名为index.min.js。</p>
<h2 id="output-chunkname"><a href="#output-chunkname" class="headerlink" title="output.chunkname"></a>output.chunkname</h2><p>chunkname 是未被列在entry中，却又需要被打包出来的文件命名配置，一般在按需加载模块时候，会生成文件，这个文件名就是使用output.chunkname进行配置的．一般配置成：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    filename: <span class="string">"[name].min.js"</span>,</span><br><span class="line">    chunkFilename: <span class="string">"[name].[chunkhash:8].min.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>非entry，但是需要单独打包出来的文件名配置，添加[chunkhash:8]　每次文件内容改变后，文件名都会变．防止浏览器缓存不更新．</p>
<h2 id="webpack按需加载写法"><a href="#webpack按需加载写法" class="headerlink" title="webpack按需加载写法"></a>webpack按需加载写法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>.ensure([<span class="string">"modules/demo.jsx"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">"modules/demo.jsx"</span>);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;, <span class="string">'demo'</span>);</span><br></pre></td></tr></table></figure>
<p>这样除了entry之外会生成的文件demo.asd88sss.min.js(asd88sss我乱写的，webpack会根据文件内容生成[chunkhash:8]).</p>
<p>require.ensure() API的第三个参数是给这个模块命名，否则 chunkFilename: “[name].[chunkhash:8].min.js” 中的 [name] 是一个自动分配的、可读性很差的id(就是一个数字)</p>
<h2 id="结合React-Router按需加载写法"><a href="#结合React-Router按需加载写法" class="headerlink" title="结合React-Router按需加载写法"></a>结合React-Router按需加载写法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">childRoutes: [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">    getComponent: <span class="function">(<span class="params">location, cb</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">require</span>.ensure([], (<span class="built_in">require</span>) =&gt; &#123;</span><br><span class="line">        cb(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../components/Login'</span>))</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>react-router 代码片段 其实就是getComponent函数内部使用了require.ensure()</p>
<h2 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h2><p>如果使用按需加载（require.ensure），本文件中就不要使用import再引入相应得模块，否这webpack不会单独打包出一个文件。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/10/webpack文件名/" data-id="ck71asp5g004usr9f8lwxdbqq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-state-machine" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/09/state-machine/" class="article-date">
  <time datetime="2016-03-09T11:26:40.000Z" itemprop="datePublished">2016-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/09/state-machine/">js状态机实现tab切换页面</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>tab页的状态机方式实现，不多说直接上代码<br><a href="https://github.com/zkboys/little-demo/blob/master/jq_tabs.html" target="_blank" rel="noopener">源码</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>jQuery 选项卡<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">		*&#123;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">padding</span><span class="selector-pseudo">:0</span>;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">margin</span><span class="selector-pseudo">:0</span>;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		body&#123;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">padding</span><span class="selector-pseudo">:15px</span>;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="css">		 <span class="selector-id">#tabs</span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">		 &#125;</span></span><br><span class="line"><span class="css">		 <span class="selector-id">#tabs</span>&gt;<span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">width</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">height</span><span class="selector-pseudo">:30px</span>;</span></span><br><span class="line"><span class="undefined">		 	line-height: 30px;</span></span><br><span class="line"><span class="undefined">		 	text-align: center;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">float</span><span class="selector-pseudo">:left</span>;</span></span><br><span class="line"><span class="undefined">		 	list-style-type: none;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">border</span><span class="selector-pseudo">:1px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">border-bottom</span><span class="selector-pseudo">:0</span>;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">cursor</span><span class="selector-pseudo">:pointer</span>;</span></span><br><span class="line"><span class="undefined">		 &#125;</span></span><br><span class="line"><span class="css">		 <span class="selector-id">#tabs</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span>&#123;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">border-top-left-radius</span><span class="selector-pseudo">:5px</span>;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">border-right</span><span class="selector-pseudo">:0</span>;</span></span><br><span class="line"><span class="undefined">		 &#125;</span></span><br><span class="line"><span class="css">		 <span class="selector-id">#tabs</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span>&#123;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">border-top-right-radius</span><span class="selector-pseudo">:5px</span>;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">border-left</span><span class="selector-pseudo">:0</span>;</span></span><br><span class="line"><span class="undefined">		 &#125;</span></span><br><span class="line"><span class="css">		 <span class="selector-id">#tabs</span>&gt;<span class="selector-tag">li</span><span class="selector-class">.active</span>,<span class="selector-id">#tabs</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">background-color</span>:<span class="selector-id">#eee</span>;</span></span><br><span class="line"><span class="undefined">		 &#125;</span></span><br><span class="line"><span class="css">		 <span class="selector-id">#tabs-content</span>&gt;<span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">display</span><span class="selector-pseudo">:none</span>;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">width</span><span class="selector-pseudo">:500px</span>;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">height</span><span class="selector-pseudo">:200px</span>;</span></span><br><span class="line"><span class="css">		 	<span class="selector-tag">border</span><span class="selector-pseudo">:1px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line"><span class="undefined">		 	border-bottom-right-radius: 5px;</span></span><br><span class="line"><span class="undefined">		 	border-bottom-left-radius: 5px;</span></span><br><span class="line"><span class="undefined">		 	border-top-right-radius: 5px;</span></span><br><span class="line"><span class="undefined">		 &#125;</span></span><br><span class="line"><span class="css">		 <span class="selector-id">#tabs-content</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.active</span>&#123;</span></span><br><span class="line"><span class="undefined">		 	display: block;</span></span><br><span class="line"><span class="undefined">		 &#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tabs-wrap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"tabs"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">data-tab</span>=<span class="string">"users"</span> <span class="attr">class</span>=<span class="string">'active'</span>&gt;</span>Users<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">data-tab</span>=<span class="string">"groups"</span>&gt;</span>Groups<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">data-tab</span>=<span class="string">"position"</span>&gt;</span>Position<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"clear:both;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tabs-content"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">data-tab</span>=<span class="string">"users"</span> <span class="attr">class</span>=<span class="string">'active'</span>&gt;</span>Users...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">data-tab</span>=<span class="string">"groups"</span>&gt;</span>Groups...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">data-tab</span>=<span class="string">"position"</span>&gt;</span>Position...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-1.10.2.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">	/*</span></span><br><span class="line"><span class="undefined">	通过自定义事件方式实现</span></span><br><span class="line"><span class="undefined">	选项卡状态切换回调彼此分离，代码更具有扩展性</span></span><br><span class="line"><span class="undefined">	js值改变相应的active类，显示隐藏通过css控制</span></span><br><span class="line"><span class="undefined">	*/</span></span><br><span class="line"><span class="javascript">	jQuery.fn.tabs = <span class="function"><span class="keyword">function</span>(<span class="params">control</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> element = $(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="javascript">		control = $(control);</span></span><br><span class="line"><span class="javascript">		element.on(<span class="string">'click'</span>, <span class="string">'li'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> tabName = $(<span class="keyword">this</span>).attr(<span class="string">'data-tab'</span>);</span></span><br><span class="line"><span class="javascript">			<span class="comment">//点击选项卡时触发自定义事件</span></span></span><br><span class="line"><span class="javascript">			element.trigger(<span class="string">'change.tabs'</span>, tabName);</span></span><br><span class="line"><span class="undefined">		&#125;);</span></span><br><span class="line"><span class="javascript">		<span class="comment">//绑定自定义事件</span></span></span><br><span class="line"><span class="javascript">		element.on(<span class="string">'change.tabs'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e, tabName</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">			element.find(<span class="string">'li'</span>).removeClass(<span class="string">'active'</span>);</span></span><br><span class="line"><span class="javascript">			element.find(<span class="string">'&gt;[data-tab="'</span>+tabName+<span class="string">'"]'</span>).addClass(<span class="string">'active'</span>);</span></span><br><span class="line"><span class="undefined">		&#125;);</span></span><br><span class="line"><span class="javascript">		element.on(<span class="string">'change.tabs'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e, tabName</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">			control.find(<span class="string">'&gt;[data-tab]'</span>).removeClass(<span class="string">'active'</span>);</span></span><br><span class="line"><span class="javascript">			control.find(<span class="string">'&gt;[data-tab="'</span>+tabName+<span class="string">'"]'</span>).addClass(<span class="string">'active'</span>)</span></span><br><span class="line"><span class="undefined">		&#125;);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> firstName = element.find(<span class="string">'li:first'</span>).attr(<span class="string">'data-tab'</span>);</span></span><br><span class="line"><span class="javascript">		element.trigger(<span class="string">'change.tabs'</span>, firstName);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">return</span> <span class="keyword">this</span>;</span></span><br><span class="line"><span class="undefined">	&#125;;</span></span><br><span class="line"><span class="javascript">	<span class="comment">// 切换选项卡的动作和窗口的hash做关联，支持浏览器的前进后退按钮。</span></span></span><br><span class="line"><span class="javascript">	$(<span class="string">'ul#tabs'</span>).on(<span class="string">'change.tabs'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e, tabName</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">		<span class="built_in">window</span>.location.hash = tabName;</span></span><br><span class="line"><span class="undefined">	&#125;)</span></span><br><span class="line"><span class="javascript">	$(<span class="built_in">window</span>).on(<span class="string">'hashchange'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> tabName = <span class="built_in">window</span>.location.hash.slice(<span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">		$(<span class="string">'ul#tabs'</span>).trigger(<span class="string">'change.tabs'</span>, tabName);</span></span><br><span class="line"><span class="undefined">	&#125;)</span></span><br><span class="line"><span class="javascript">	<span class="comment">// 初始化插件</span></span></span><br><span class="line"><span class="javascript">	$(<span class="string">'ul#tabs'</span>).tabs(<span class="string">'#tabs-content'</span>);</span></span><br><span class="line"><span class="javascript">	<span class="comment">// 选中某个选项卡</span></span></span><br><span class="line"><span class="javascript">	$(<span class="string">'ul#tabs'</span>).trigger(<span class="string">'change.tabs'</span>, <span class="string">'position'</span>);</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/09/state-machine/" data-id="ck71asp5a004hsr9f93ud81vz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/state-machine/">state-machine</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tabs/">tabs</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-html-meta-viewport" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/09/html-meta-viewport/" class="article-date">
  <time datetime="2016-03-09T10:56:19.000Z" itemprop="datePublished">2016-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/HTML/">HTML</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/09/html-meta-viewport/">html的viewport meta标签</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>移动设备上浏览器一般会加如下meta标签，会有更好的显示效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p><em>注：width=device-width 会导致 iPhone 5 添加到主屏后以 WebApp 全屏模式打开页面时出现黑边 <a href="http://bigc.at/ios-webapp-viewport-meta.orz" target="_blank" rel="noopener">戳这里</a></em></p>
<h2 id="content-参数："><a href="#content-参数：" class="headerlink" title="content 参数："></a>content 参数：</h2><ul>
<li>width viewport 宽度(数值/device-width)</li>
<li>height viewport 高度(数值/device-height)</li>
<li>initial-scale 初始缩放比例</li>
<li>maximum-scale 最大缩放比例</li>
<li>minimum-scale 最小缩放比例</li>
<li>user-scalable 是否允许用户缩放(yes/no)</li>
<li>minimal-ui iOS 7.1 beta 2 中新增属性，可以在页面加载时最小化上下状态栏。这是一个布尔值，可以直接这样写：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, minimal-ui&quot;&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>而如果你的网站不是响应式的，请不要使用 initial-scale 或者禁用缩放。便于移动设备访问你的网站的时候，用户可以通过缩放查看你的网站。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,user-scalable=yes&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>适配 iPhone 6 和 iPhone 6plus 则需要写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=375&quot;&gt;</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=414&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="不同手机viewport-width尺寸"><a href="#不同手机viewport-width尺寸" class="headerlink" title="不同手机viewport width尺寸"></a>不同手机viewport width尺寸</h2><table>
<thead>
<tr>
<th>操作系统</th>
<th>屏幕尺寸</th>
<th>viewport width</th>
</tr>
</thead>
<tbody>
<tr>
<td>android</td>
<td>4.7~5寸</td>
<td>360px</td>
</tr>
<tr>
<td>IOS</td>
<td>4.7~5寸（iPhone 6）</td>
<td>375px</td>
</tr>
<tr>
<td>android</td>
<td>5.5寸</td>
<td>400px</td>
</tr>
<tr>
<td>IOS</td>
<td>5.5寸（iPhone 6 plus）</td>
<td>414px</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/09/html-meta-viewport/" data-id="ck71asp3c0033sr9fka30t0yl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/">html</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/meta/">meta</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-html-meta" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/09/html-meta/" class="article-date">
  <time datetime="2016-03-09T10:49:00.000Z" itemprop="datePublished">2016-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>►<a class="article-category-link" href="/categories/前端/HTML/">HTML</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/09/html-meta/">html常用meta标签</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">声明文档使用的字符编码，</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line"></span><br><span class="line">优先使用 IE 最新版本和 Chrome</span><br><span class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;</span><br><span class="line"></span><br><span class="line">360 使用Google Chrome Frame</span><br><span class="line">&lt;meta name=&quot;renderer&quot; content=&quot;webkit&quot;&gt;</span><br><span class="line"></span><br><span class="line">页面关键词 keywords</span><br><span class="line">&lt;meta name=&quot;keywords&quot; content=&quot;your keywords&quot;&gt;</span><br><span class="line"></span><br><span class="line">页面描述内容 description</span><br><span class="line">&lt;meta name=&quot;description&quot; content=&quot;your description&quot;&gt;</span><br><span class="line"></span><br><span class="line">定义网页作者 author</span><br><span class="line">&lt;meta name=&quot;author&quot; content=&quot;author,email address&quot;&gt;</span><br><span class="line"></span><br><span class="line">百度禁止转码</span><br><span class="line">通过百度手机打开网页时，百度可能会对你的网页进行转码，脱下你的衣服，往你的身上贴狗皮膏药的广告，为此可在 head 内添加</span><br><span class="line">&lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-siteapp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">viewport 可以让布局在移动浏览器上显示的更好。 通常会写</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, user-scalable=no&quot;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="移动端的meta"><a href="#移动端的meta" class="headerlink" title="移动端的meta"></a>移动端的meta</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, user-scalable=no&quot; /&gt;</span><br><span class="line">&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt;</span><br><span class="line">&lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot; /&gt;</span><br><span class="line">&lt;meta name=&quot;format-detection&quot;content=&quot;telephone=no, email=no&quot; /&gt;</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, user-scalable=no&quot; /&gt;</span><br><span class="line">&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt;&lt;!-- 删除苹果默认的工具栏和菜单栏 --&gt;</span><br><span class="line">&lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot; /&gt;&lt;!-- 设置苹果工具栏颜色 --&gt;</span><br><span class="line">&lt;meta name=&quot;format-detection&quot; content=&quot;telphone=no, email=no&quot; /&gt;&lt;!-- 忽略页面中的数字识别为电话，忽略email识别 --&gt;</span><br><span class="line">&lt;!-- 启用360浏览器的极速模式(webkit) --&gt;</span><br><span class="line">&lt;meta name=&quot;renderer&quot; content=&quot;webkit&quot;&gt;</span><br><span class="line">&lt;!-- 避免IE使用兼容模式 --&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">&lt;!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 --&gt;</span><br><span class="line">&lt;meta name=&quot;HandheldFriendly&quot; content=&quot;true&quot;&gt;</span><br><span class="line">&lt;!-- 微软的老式浏览器 --&gt;</span><br><span class="line">&lt;meta name=&quot;MobileOptimized&quot; content=&quot;320&quot;&gt;</span><br><span class="line">&lt;!-- uc强制竖屏 --&gt;</span><br><span class="line">&lt;meta name=&quot;screen-orientation&quot; content=&quot;portrait&quot;&gt;</span><br><span class="line">&lt;!-- QQ强制竖屏 --&gt;</span><br><span class="line">&lt;meta name=&quot;x5-orientation&quot; content=&quot;portrait&quot;&gt;</span><br><span class="line">&lt;!-- UC强制全屏 --&gt;</span><br><span class="line">&lt;meta name=&quot;full-screen&quot; content=&quot;yes&quot;&gt;</span><br><span class="line">&lt;!-- QQ强制全屏 --&gt;</span><br><span class="line">&lt;meta name=&quot;x5-fullscreen&quot; content=&quot;true&quot;&gt;</span><br><span class="line">&lt;!-- UC应用模式 --&gt;</span><br><span class="line">&lt;meta name=&quot;browsermode&quot; content=&quot;application&quot;&gt;</span><br><span class="line">&lt;!-- QQ应用模式 --&gt;</span><br><span class="line">&lt;meta name=&quot;x5-page-mode&quot; content=&quot;app&quot;&gt;</span><br><span class="line">&lt;!-- windows phone 点击无高光 --&gt;</span><br><span class="line">&lt;meta name=&quot;msapplication-tap-highlight&quot; content=&quot;no&quot;&gt;</span><br><span class="line">&lt;!-- 适应移动端end --&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/09/html-meta/" data-id="ck71asp3e0036sr9fuvmzjwga" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/meta/">meta</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-html-doctype" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/09/html-doctype/" class="article-date">
  <time datetime="2016-03-09T10:34:53.000Z" itemprop="datePublished">2016-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/09/html-doctype/">HTML DOCTYPE</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>DOCTYPE(Document Type)，该声明位于文档中最前面的位置，处于 html 标签之前，此标签告知浏览器文档使用哪种 HTML 或者 XHTML 规范。</p>
<p>DTD(Document Type Definition) 声明以 &lt;!DOCTYPE&gt; 开始，不区分大小写，前面没有任何内容，如果有其他内容(空格除外)会使浏览器在 IE 下开启怪异模式(quirks mode)渲染网页。</p>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p>在 HTML中 doctype 有两个主要目的。</p>
<ul>
<li>对文档进行有效性验证，它告诉用户代理和校验器这个文档是按照什么 DTD 写的。这个动作是被动的，每次页面加载时，浏览器并不会下载 DTD 并检查合法性，只有当手动校验页面时才启用。</li>
<li>决定浏览器的呈现模式，对于实际操作，通知浏览器读取文档时用哪种解析算法。如果没有写，则浏览器则根据自身的规则对代码进行解析，可能会严重影响 html 排版布局。浏览器有三种方式解析 HTML 文档。 <em> 非怪异（标准）模式 </em> 怪异模式 * 部分怪异（近乎标准）模式 关于IE浏览器的文档模式，浏览器模式，严格模式，怪异模式，DOCTYPE 标签，可详细阅读模式？标准！的内容。</li>
</ul>
<h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><p>公共 DTD，名称格式为 注册//组织//类型 标签//语言,</p>
<ul>
<li>注册指组织是否由国际标准化组织(ISO)注册，+表示是，-表示不是。</li>
<li>组织即组织名称，如：W3C。</li>
<li>类型一般是 DTD。</li>
<li>标签是指定公开文本描述，即对所引用的公开文本的唯一描述性名称，后面可附带版本号。</li>
<li>语言是 DTD 语言的 ISO 639 语言标识符，如：EN 表示英文，ZH 表示中文。</li>
</ul>
<h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><p>XHTML 1.0 可声明三种 DTD 类型。分别表示严格版本，过渡版本，以及基于框架的 HTML 文档。</p>
<ul>
<li><p>HTML 4.01 strict 严格版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>HTML 4.01 Transitional 过渡版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>HTML 4.01 Frameset 基于框架的 HTML 文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Frameset//EN&quot; &quot;http://www.w3.org/TR/html4/frameset.dtd&quot;&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>最新 HTML5 推出更加简洁的书写，它向前向后兼容，推荐使用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/09/html-doctype/" data-id="ck71asp3b0030sr9fvkdhl9b7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/doctype/">doctype</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/">html</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-build-blog-with-hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/09/build-blog-with-hexo/" class="article-date">
  <time datetime="2016-03-09T09:42:42.000Z" itemprop="datePublished">2016-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/09/build-blog-with-hexo/">基于hexo 和 github 搭建的博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h1 id="hexo-blog"><a href="#hexo-blog" class="headerlink" title="hexo-blog"></a>hexo-blog</h1><p>基于hexo搭建的博客 <em>详细文档请参考<a href="https://hexo.io/" target="_blank" rel="noopener">官网</a></em></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">git clone https://github.com/zkboys/hexo-blog.git</span><br><span class="line">cd hexo-blog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<h2 id="修改网站信息"><a href="#修改网站信息" class="headerlink" title="修改网站信息"></a>修改网站信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Site</span><br><span class="line">title: ZKBOYS</span><br><span class="line">subtitle: I&apos;m a 博客</span><br><span class="line">description: 技术整理归档</span><br><span class="line">author: WangShubin</span><br><span class="line">language: zh-CN</span><br><span class="line">timezone:</span><br></pre></td></tr></table></figure>
<h2 id="创建新文章"><a href="#创建新文章" class="headerlink" title="创建新文章"></a>创建新文章</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &apos;My new Post&apos;</span><br></pre></td></tr></table></figure>
<p>将会生成<code>/source/_posts/My-new-Post.md</code>文件，内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: My new Post //文章列表标题 网页&lt;title&gt;</span><br><span class="line">date: 2016-03-09 15:59:25</span><br><span class="line">tags:</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<h2 id="生成public静态资源（网站的实际内容）"><a href="#生成public静态资源（网站的实际内容）" class="headerlink" title="生成public静态资源（网站的实际内容）"></a>生成public静态资源（网站的实际内容）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure>
<p><em>删除public目录使用<code>hexo clean</code></em></p>
<h2 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h2><p>修改_config.yml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: &lt;repository url&gt;</span><br><span class="line">  branch: [branch]</span><br><span class="line">  message: [message]</span><br></pre></td></tr></table></figure></p>
<p>安装发布插件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></p>
<p>发布<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure></p>
<h2 id="npm-scripts"><a href="#npm-scripts" class="headerlink" title="npm scripts"></a>npm scripts</h2><p>clean + generate + deploy<br>package.json中加入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;:&#123;</span><br><span class="line">  &quot;deploy&quot;:&quot;hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy&quot;,</span><br><span class="line">  &quot;push&quot;:&quot;git add --all &amp;&amp; git commit -m &apos;blog update&apos; &amp;&amp; git push origin master&quot;,</span><br><span class="line">  &quot;done&quot;:&quot;npm run push &amp;&amp; npm run deploy&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">发布</span><br><span class="line">npm run deploy</span><br><span class="line">提交</span><br><span class="line">npm run push</span><br><span class="line">提交并发布：</span><br><span class="line">npm run done</span><br></pre></td></tr></table></figure></p>
<p><em>注：如果项目没有任何更改，调用npm run push命令会报错</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/09/build-blog-with-hexo/" data-id="ck71asp2t0021sr9fx9xdc9oy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/">github</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>



	



  
    <article id="post-some-docs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/09/some-docs/" class="article-date">
  <time datetime="2016-03-09T06:07:51.000Z" itemprop="datePublished">2016-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/资源/">资源</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/09/some-docs/">一些技术文档</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>NodeJS API<br><a href="http://nodeapi.ucdok.com/#/api/" target="_blank" rel="noopener">http://nodeapi.ucdok.com/#/api/</a></p>
<p>FreeMarker<br>模版语言<br>官方有中文文档下载连接<br><a href="http://freemarker.incubator.apache.org/index.html" target="_blank" rel="noopener">http://freemarker.incubator.apache.org/index.html</a></p>
<p>vue.js<br><a href="http://cn.vuejs.org/" target="_blank" rel="noopener">http://cn.vuejs.org/</a><br>数据驱动的组件，为现代化的 Web 界面而生</p>
<p>sui<br><a href="http://sui.taobao.org/sui/docs/index.html" target="_blank" rel="noopener">http://sui.taobao.org/sui/docs/index.html</a><br>SUI 是一套基于bootstrap开发的前端组件库，同时她也是一套设计规范。通过SUI，可以非常方便的设计和实现精美的页面</p>
<p>sui mobile<br><a href="http://m.sui.taobao.org/" target="_blank" rel="noopener">http://m.sui.taobao.org/</a><br>轻量，小巧且精美的UI库；方便迅速搭建手机H5应用</p>
<p>ant.design<br><a href="http://ant.design/" target="_blank" rel="noopener">http://ant.design/</a><br>Ant Design 是一个 UI 设计语言，是一套提炼和应用于企业级后台产品的交互语言和视觉体系。</p>
<p>zepto<br><a href="http://gmu.baidu.com/doc/2.0.5/" target="_blank" rel="noopener">http://gmu.baidu.com/doc/2.0.5/</a><br><a href="http://zeptojs.com/" target="_blank" rel="noopener">http://zeptojs.com/</a><br>Zepto是一个轻量级的针对现代浏览器的JS库，兼容jQuery用法</p>
<p>webpack<br><a href="http://webpack.github.io/" target="_blank" rel="noopener">http://webpack.github.io/</a><br><a href="http://zhaoda.net/webpack-handbook/" target="_blank" rel="noopener">http://zhaoda.net/webpack-handbook/</a><br>前端构建工具</p>
<p>gulp<br><a href="http://www.gulpjs.com.cn/docs" target="_blank" rel="noopener">http://www.gulpjs.com.cn/docs</a><br><a href="https://github.com/gulpjs/gulp/tree/master/docs" target="_blank" rel="noopener">https://github.com/gulpjs/gulp/tree/master/docs</a><br>前端构建工具</p>
<p>React<br><a href="http://reactjs.cn/" target="_blank" rel="noopener">http://reactjs.cn/</a><br><a href="http://facebook.github.io/react/" target="_blank" rel="noopener">http://facebook.github.io/react/</a><br>用于构建用户界面的JAVASCRIPT库</p>
<p>React Flux<br><a href="http://reactjs.cn/react/docs/flux-overview.html" target="_blank" rel="noopener">http://reactjs.cn/react/docs/flux-overview.html</a><br><a href="http://facebook.github.io/flux/docs/overview.html" target="_blank" rel="noopener">http://facebook.github.io/flux/docs/overview.html</a><br>Flux是Facebook用来构建用户端的web应用的应用程序体系架构。</p>
<p>React Router<br><a href="https://github.com/rackt/react-router/tree/master/docs" target="_blank" rel="noopener">https://github.com/rackt/react-router/tree/master/docs</a></p>
<p>History<br><a href="https://github.com/rackt/history" target="_blank" rel="noopener">https://github.com/rackt/history</a></p>
<p>SuperAnger<br><a href="http://visionmedia.github.io/superagent/" target="_blank" rel="noopener">http://visionmedia.github.io/superagent/</a><br>Super Agent is light-weight progressive ajax API crafted for flexibility, readability, and a low learning curve after being frustrated with many of the existing request APIs. It also works with Node.js!</p>
<p>Font Awesome<br><a href="http://fontawesome.io/" target="_blank" rel="noopener">http://fontawesome.io/</a></p>
<p>《ECMAScript 6入门》<br><a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">http://es6.ruanyifeng.com/</a><br>《ECMAScript 6入门》是一本开源的JavaScript语言教程，全面介绍ECMAScript 6新引入的语法特性。</p>
<p>Fetch<br><a href="https://github.com/github/fetch" target="_blank" rel="noopener">https://github.com/github/fetch</a><br>将会代替ajax（XHR）？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zkboys.com/2016/03/09/some-docs/" data-id="ck71asp58004dsr9fyf078rc7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docs/">docs</a></li></ul>

    </footer>
  </div>
  
</article>



	



  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul class="recent-post">
        
          <li>
            <a href="/2018/02/27/cross-env/">cross-env</a>
          </li>
        
          <li>
            <a href="/2017/08/15/react相关面试题/">react相关面试题</a>
          </li>
        
          <li>
            <a href="/2017/08/09/前端与产品约定/">前端与产品约定</a>
          </li>
        
          <li>
            <a href="/2017/07/28/nginx操作/">nginx操作</a>
          </li>
        
          <li>
            <a href="/2017/07/12/web打印/">web打印</a>
          </li>
        
          <li>
            <a href="/2017/06/02/关于组件化/">关于组件化</a>
          </li>
        
          <li>
            <a href="/2017/05/22/前端leader工作任务/">前端leader工作任务</a>
          </li>
        
          <li>
            <a href="/2017/05/05/前后端分离开发约定/">前后端分离开发约定</a>
          </li>
        
          <li>
            <a href="/2017/04/12/前端最佳实践/">前端最佳实践</a>
          </li>
        
          <li>
            <a href="/2017/04/02/GraphQL/">GraphQL</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">52</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/前端/CSS/">CSS</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/HTML/">HTML</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/JS/">JS</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/构建/">构建</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/监控/">监控</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/">后端</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/后端/nginx/">nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/node/">node</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/shell/">shell</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/数据库/">数据库</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/实现方案/">实现方案</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/规范/">规范</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/资源/">资源</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/转载/">转载</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GraphQL/">GraphQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redux/">Redux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/color/">color</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cross-env/">cross-env</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docs/">docs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/doctype/">doctype</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/emmet/">emmet</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/">meta</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/polyfill/">polyfill</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh-key/">ssh-key</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/state-machine/">state-machine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tabs/">tabs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分页/">分页</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端上报错误信息/">前端上报错误信息</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单页面/">单页面</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安全/">安全</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/布局/">布局</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/弹框/">弹框</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信/">微信</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/打印/">打印</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/按钮/">按钮</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最佳实践/">最佳实践</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试/">测试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/环境搭建/">环境搭建</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编码规范/">编码规范</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/规范/">规范</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/错误/">错误</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/GraphQL/" style="font-size: 10px;">GraphQL</a> <a href="/tags/React/" style="font-size: 18.33px;">React</a> <a href="/tags/Redux/" style="font-size: 10px;">Redux</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/blog/" style="font-size: 10px;">blog</a> <a href="/tags/color/" style="font-size: 10px;">color</a> <a href="/tags/cross-env/" style="font-size: 10px;">cross-env</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/docs/" style="font-size: 10px;">docs</a> <a href="/tags/doctype/" style="font-size: 10px;">doctype</a> <a href="/tags/emmet/" style="font-size: 10px;">emmet</a> <a href="/tags/git/" style="font-size: 13.33px;">git</a> <a href="/tags/github/" style="font-size: 13.33px;">github</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/html/" style="font-size: 11.67px;">html</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/meta/" style="font-size: 11.67px;">meta</a> <a href="/tags/mongodb/" style="font-size: 11.67px;">mongodb</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/polyfill/" style="font-size: 10px;">polyfill</a> <a href="/tags/ssh-key/" style="font-size: 10px;">ssh-key</a> <a href="/tags/state-machine/" style="font-size: 10px;">state-machine</a> <a href="/tags/tabs/" style="font-size: 10px;">tabs</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/webpack/" style="font-size: 18.33px;">webpack</a> <a href="/tags/分页/" style="font-size: 10px;">分页</a> <a href="/tags/前端上报错误信息/" style="font-size: 10px;">前端上报错误信息</a> <a href="/tags/单页面/" style="font-size: 10px;">单页面</a> <a href="/tags/安全/" style="font-size: 10px;">安全</a> <a href="/tags/布局/" style="font-size: 11.67px;">布局</a> <a href="/tags/弹框/" style="font-size: 10px;">弹框</a> <a href="/tags/微信/" style="font-size: 10px;">微信</a> <a href="/tags/打印/" style="font-size: 10px;">打印</a> <a href="/tags/按钮/" style="font-size: 10px;">按钮</a> <a href="/tags/数据库/" style="font-size: 11.67px;">数据库</a> <a href="/tags/最佳实践/" style="font-size: 16.67px;">最佳实践</a> <a href="/tags/测试/" style="font-size: 10px;">测试</a> <a href="/tags/环境搭建/" style="font-size: 10px;">环境搭建</a> <a href="/tags/算法/" style="font-size: 11.67px;">算法</a> <a href="/tags/编码规范/" style="font-size: 10px;">编码规范</a> <a href="/tags/规范/" style="font-size: 10px;">规范</a> <a href="/tags/错误/" style="font-size: 10px;">错误</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">19</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 WangShubin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      <a href="http://www.beian.miit.gov.cn">京ICP备16006256号-1</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script src="/js/jquery.min.js"></script>

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script src="/js/script.js"></script>


<script>
    function getRandomNum(min, max) {
        var range = max - min;
        var rand = Math.random();
        return (min + Math.round(rand * range));
    }
    $(function () {
        var n = getRandomNum(1, 10);
        var animationSrc = '/canvas-animation/' + n + '.html';
        $('#canvas-animation').attr('src', animationSrc);
    });
</script>

  </div>
</body>
</html>